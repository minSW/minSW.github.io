<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Look out</title>
  
  
  <link href="https://minsw.github.io/feed.xml" rel="self"/>
  
  <link href="https://minsw.github.io/"/>
  <updated>2021-01-30T08:29:58.843Z</updated>
  <id>https://minsw.github.io/</id>
  
  <author>
    <name>Lukka Min</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>&amp;#039;Spark The Definitive Guide&amp;#039; 5ì¥ - êµ¬ì¡°ì  API ê¸°ë³¸ ì—°ì‚°</title>
    <link href="https://minsw.github.io/2021/01/26/Spark-The-Definitive-Guide-5%EC%9E%A5/"/>
    <id>https://minsw.github.io/2021/01/26/Spark-The-Definitive-Guide-5%EC%9E%A5/</id>
    <published>2021-01-25T20:26:48.000Z</published>
    <updated>2021-01-30T08:29:58.843Z</updated>
    
    <content type="html"><![CDATA[<br/><p>ì˜¤ëŠ˜ì˜ êµí›ˆ.<br>ë„ì»¤ ì´ë¯¸ì§€ì— ì˜ˆì œ ìˆë‹¤ê³  ì‹ ë‚˜ê²Œ ëŒë¦¬ê³ ~ ëŒë¦¬ê³ ~ í•˜ë‹¤ë³´ë©´<br>í„°ì§„ë‹¤ëŠ”ê±¸ ëª…ì‹¬í•˜ë„ë¡ í•˜ì ğŸ¥º</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.io.IOException: No space left on device</span><br></pre></td></tr></table></figure><br/><img src="https://user-images.githubusercontent.com/26691216/106086744-1b72d100-6166-11eb-8d99-1deebfa68867.jpg" width="400" alt="jongman"><center><i style="color:lightgray"> ì¸ìƒì€ ì‹¤ì „ì´ì•¼ ì¹œêµ¬ì•¼</i></center><img width="300" alt="bomb" src="https://user-images.githubusercontent.com/26691216/106087261-fcc10a00-6166-11eb-80c2-d339e59bbc99.png"><center><h2>_ _ _</h2></center><br/><hr><h1 id="CHAPTER-5-êµ¬ì¡°ì -API-ê¸°ë³¸-ì—°ì‚°"><a href="#CHAPTER-5-êµ¬ì¡°ì -API-ê¸°ë³¸-ì—°ì‚°" class="headerlink" title="CHAPTER 5 êµ¬ì¡°ì  API ê¸°ë³¸ ì—°ì‚°"></a>CHAPTER 5 êµ¬ì¡°ì  API ê¸°ë³¸ ì—°ì‚°</h1><p>CHAPTER 4 ëŠ” êµ¬ì¡°ì  APIì˜ í•µì‹¬ ì¶”ìƒí™” â€˜ê°œë…â€™ì„ ì†Œê°œ<br>CHAPTER 5 ëŠ” DataFrameê³¼ ê·¸ ë°ì´í„°ë¥¼ ë‹¤ë£¨ëŠ” ê¸°ë³¸ â€˜ê¸°ëŠ¥â€™ ì†Œê°œ</p><blockquote><p><em>â€˜DataFrame = Row íƒ€ì…ì˜ <strong>ë ˆì½”ë“œ</strong> + ì—¬ëŸ¬ <strong>ì»¬ëŸ¼</strong>â€˜</em><br>(ê° ì»¬ëŸ¼ëª…ê³¼ ë°ì´í„° íƒ€ì…ì€ <strong>ìŠ¤í‚¤ë§ˆ</strong>ë¡œ ì •ì˜)</p><p>DataFrameì˜ <strong>íŒŒí‹°ì…”ë‹</strong> :  DataFrame (ë˜ëŠ” Dataset)ì´ í´ëŸ¬ìŠ¤í„°ì—ì„œ ë¬¼ë¦¬ì ìœ¼ë¡œ ë°°ì¹˜ë˜ëŠ” í˜•íƒœë¥¼ ì •ì˜</p><ul><li><strong>íŒŒí‹°ì…”ë‹ ìŠ¤í‚¤ë§ˆ</strong> : íŒŒí‹°ì…˜ì„ ë°°ì¹˜í•˜ëŠ” ë°©ë²• ì •ì˜</li><li>íŒŒí‹°ì…”ë‹ì˜ ë¶„í•  ê¸°ì¤€? =&gt; íŠ¹ì • ì»¬ëŸ¼ or ë¹„ê²°ì •ë¡ ì (nondeterministically) ê°’ ê¸°ë°˜ìœ¼ë¡œ ì„¤ì •</li></ul></blockquote><h3 id="5-1-ìŠ¤í‚¤ë§ˆ"><a href="#5-1-ìŠ¤í‚¤ë§ˆ" class="headerlink" title="5.1 ìŠ¤í‚¤ë§ˆ"></a>5.1 ìŠ¤í‚¤ë§ˆ</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> df = spark.read.format(<span class="string">&quot;json&quot;</span>).load(<span class="string">&quot;/data/flight-data/json/2015-summary.json&quot;</span>)</span><br><span class="line">df.printSchema()</span><br><span class="line"></span><br><span class="line"><span class="comment">// root</span></span><br><span class="line"><span class="comment">//  |-- DEST_COUNTRY_NAME: string (nullable = true)</span></span><br><span class="line"><span class="comment">//  |-- ORIGIN_COUNTRY_NAME: string (nullable = true)</span></span><br><span class="line"><span class="comment">//  |-- count: long (nullable = true)</span></span><br></pre></td></tr></table></figure><ul><li><p>ìŠ¤í‚¤ë§ˆëŠ” <strong>DataFrameì˜ ì»¬ëŸ¼ëª…ê³¼ ë°ì´í„° íƒ€ì…ì„ ì •ì˜</strong></p><ul><li>ê´€ë ¨ëœ ëª¨ë“  ê²ƒì„ í•˜ë‚˜ë¡œ ë¬¶ëŠ” ì—­í• </li></ul></li><li><p>ë°ì´í„° ì†ŒìŠ¤ì—ì„œ ìŠ¤í‚¤ë§ˆë¥¼ ì–»ê±°ë‚˜ (Schema-on-read), ì§ì ‘ ì •ì˜ ê°€ëŠ¥</p><ul><li>ëŒ€ë¶€ë¶„ì˜ ë¹„ì •í˜• ë¶„ì„ (ad-hoc analysis)ì—ì„œ schema-on-read ì˜ ë™ì‘</li><li>ìš´ì˜ í™˜ê²½ ETL ì‘ì—…ì— ìŠ¤íŒŒí¬ ì‚¬ìš©ì‹œ <strong>ì§ì ‘ ì •ì˜ í•„ìš”</strong> (ìƒ˜í”Œ ë°ì´í„° íƒ€ì…ì— ë”°ë¥¸ ìŠ¤í‚¤ë§ˆ ì¶”ë¡  ë°©ì§€)</li></ul></li><li><p>ìŠ¤í‚¤ë§ˆëŠ” <code>StructType</code> ê°ì²´ </p><ul><li><p>ë³µí•© ë°ì´í„° íƒ€ì… <code>StructType</code> (=consistOf(<code>StructField</code> ê°ì²´))</p></li><li><p>ìŠ¤íŒŒí¬ëŠ” ìì²´ ë°ì´í„° íƒ€ì… ì •ë³´ë¥¼ ì‚¬ìš© =&gt; ì–¸ì–´ ë³„ ë°ì´í„° íƒ€ì…ìœ¼ë¡œ ì„¤ì • X</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">spark.read.format(<span class="string">&quot;json&quot;</span>).load(<span class="string">&quot;/data/flight-data/json/2015-summary.json&quot;</span>).schema</span><br><span class="line"><span class="comment">// res176: org.apache.spark.sql.types.StructType</span></span><br><span class="line"><span class="comment">//  = StructType(</span></span><br><span class="line"><span class="comment">//        StructField(DEST_COUNTRY_NAME,StringType,true),</span></span><br><span class="line"><span class="comment">//        StructField(ORIGIN_COUNTRY_NAME,StringType,true),</span></span><br><span class="line"><span class="comment">//        StructField(count,LongType,true)</span></span><br><span class="line"><span class="comment">//      )</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><details><summary class="point-color-can-hover">[5.1] ì˜ˆì œ í¼ì¹˜ê¸° - DataFrameì— ìŠ¤í‚¤ë§ˆ ì ìš© ì˜ˆì œ</summary><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DataFrameì— ìŠ¤í‚¤ë§ˆë¥¼ ë§Œë“¤ê³  ì ìš©í•˜ëŠ” ì˜ˆì œ</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.types.&#123;<span class="type">StructField</span>, <span class="type">StructType</span>, <span class="type">StringType</span>, <span class="type">LongType</span>&#125;</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.types.<span class="type">Metadata</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> myManualSchema = <span class="type">StructType</span>(<span class="type">Array</span>(</span><br><span class="line">  <span class="type">StructField</span>(<span class="string">&quot;DEST_COUNTRY_NAME&quot;</span>, <span class="type">StringType</span>, <span class="literal">true</span>),</span><br><span class="line">  <span class="type">StructField</span>(<span class="string">&quot;ORIGIN_COUNTRY_NAME&quot;</span>, <span class="type">StringType</span>, <span class="literal">true</span>),</span><br><span class="line">  <span class="type">StructField</span>(<span class="string">&quot;count&quot;</span>, <span class="type">LongType</span>, <span class="literal">false</span>,</span><br><span class="line">    <span class="type">Metadata</span>.fromJson(<span class="string">&quot;&#123;\&quot;hello\&quot;:\&quot;world\&quot;&#125;&quot;</span>))</span><br><span class="line">))</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> df = (spark.read.format(<span class="string">&quot;json&quot;</span>).schema(myManualSchema)</span><br><span class="line">  .load(<span class="string">&quot;/data/flight-data/json/2015-summary.json&quot;</span>))</span><br></pre></td></tr></table></figure></details><h3 id="5-2-ì»¬ëŸ¼ê³¼-í‘œí˜„ì‹"><a href="#5-2-ì»¬ëŸ¼ê³¼-í‘œí˜„ì‹" class="headerlink" title="5.2 ì»¬ëŸ¼ê³¼ í‘œí˜„ì‹"></a>5.2 ì»¬ëŸ¼ê³¼ í‘œí˜„ì‹</h3><ul><li><p>ìŠ¤íŒŒí¬ì˜ â€˜ì»¬ëŸ¼â€™ (=í‘œí˜„ì‹)</p><ul><li>ìŠ¤í”„ë ˆë“œ ì‹œíŠ¸, Rì˜ dataframe, Pandasì˜ ì»¬ëŸ¼ê³¼ ë¹„ìŠ·</li><li>ì‚¬ìš©ìëŠ” <u><strong>í‘œí˜„ì‹</strong></u>ìœ¼ë¡œ DataFrameì˜ ì»¬ëŸ¼ì„ ì„ íƒ, ì¡°ì‘, ì œê±° ê°€ëŠ¥</li><li>ì¦‰ í‘œí˜„ì‹ì„ ì‚¬ìš©í•´ ë ˆì½”ë“œ ë‹¨ìœ„ë¡œ ê³„ì‚°í•œ ê°’ì„ ë‚˜íƒ€ë‚´ëŠ” ë…¼ë¦¬ì  êµ¬ì¡°. ì‹¤ì œê°’ì„ ì–»ìœ¼ë ¤ë©´ ë¡œìš° (=&gt; DataFrame) ê°€ í•„ìš”</li><li>ì™¸ë¶€ ì ‘ê·¼ì‹œ <strong>ë°˜ë“œì‹œ DataFrame ì„ í†µí•´ì•¼ í•¨</strong></li></ul></li><li><p>ì»¬ëŸ¼ ìƒì„± &amp; ì°¸ì¡° : <code>col()</code> <code>column()</code></p><ul><li>ì»¬ëŸ¼ì´ DataFrameì— ìˆëŠ”ì§€ ì—†ëŠ”ì§€ëŠ” ëª¨ë¦„ =&gt; <strong>ë¶„ì„ê¸°</strong>ê°€ <strong>ì¹´íƒˆë¡œê·¸</strong>ì— ì €ì¥ëœ ì •ë³´ë‘ ë¹„êµí•˜ê¸° ì „ê¹Œì§€ëŠ” ë¯¸í™•ì¸ <a href="https://minsw.github.io/2021/01/26/Spark-The-Definitive-Guide-4%EC%9E%A5/#4-4-%EA%B5%AC%EC%A1%B0%EC%A0%81-API%EC%9D%98-%EC%8B%A4%ED%96%89-%EA%B3%BC%EC%A0%95">[4.4] ì°¸ê³ </a></li><li>ìŠ¤ì¹¼ë¼ëŠ” ê³ ìœ  ê¸°ëŠ¥ ì‚¬ìš© ê°€ëŠ¥ : <code>$&quot;ì»¬ëŸ¼ëª…&quot;</code> <code>&#39;ì»¬ëŸ¼ëª…</code> (<code>&#39;</code> : í‹± ë§ˆí¬, ì‹¬ë²Œ)</li><li>ëª…ì‹œì  ì°¸ì¡° : <code>DataFrame.col()</code> (ì¡°ì¸ì‹œ ìœ ìš©)<br>=&gt; ëª…ì‹œì  ì»¬ëŸ¼ ì •ì˜ ì‹œ, ë¶„ì„ê¸° ì‹¤í–‰ ë‹¨ê³„ì—ì„œ ì»¬ëŸ¼ í™•ì¸ ì ˆì°¨ ìƒëµ</li></ul><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.spark.sql.functions.&#123;col, column&#125;</span><br><span class="line">col(<span class="string">&quot;someCol&quot;</span>)</span><br><span class="line">column(<span class="string">&quot;someCol&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// in Scala</span></span><br><span class="line">$<span class="string">&quot;someCol&quot;</span></span><br><span class="line"><span class="symbol">&#x27;someCol</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ëª…ì‹œì  ì°¸ì¡°</span></span><br><span class="line">df.col(<span class="string">&quot;someCol&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p><strong>í‘œí˜„ì‹</strong> : <code>expr()</code></p><ul><li>DataFrame ë ˆì½”ë“œì˜ ì—¬ëŸ¬ ê°’ì— ëŒ€í•œ íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ ì§‘í•©</li><li>ì—¬ëŸ¬ ì»¬ëŸ¼ì„ ì…ë ¥ë°›ì•„ ì‹ë³„ -&gt; ë‹¤ì–‘í•œ í‘œí˜„ì‹ì„ ê° ë ˆì½”ë“œì— ì ìš© -&gt; <strong>â€˜ë‹¨ì¼ê°’â€™</strong> (ë³µí•© ë°ì´í„° íƒ€ì…) ìœ¼ë¡œ ì¶œë ¥ í•˜ëŠ” í•¨ìˆ˜</li><li><em>DataFrameì˜ ì»¬ëŸ¼ì€ â€˜í‘œí˜„ì‹â€™ì´ë‹¤</em><ul><li><code>expr(&quot;someCol&quot;)</code> == <code>col(&quot;someCol&quot;)</code> (ë™ì¼ ë™ì‘)</li><li>ì»¬ëŸ¼ì€ í‘œí˜„ì‹ì˜ ì¼ë¶€ ê¸°ëŠ¥ ì œê³µ</li></ul></li></ul></li><li><p>ìŠ¤íŒŒí¬ëŠ” ì—°ì‚° ìˆœì„œë¥¼ ì§€ì •í•˜ëŠ” ë…¼ë¦¬ì  íŠ¸ë¦¬ë¡œ ì»´íŒŒì¼</p><ul><li>DataFrame ì½”ë“œë‚˜ SQL í‘œí˜„ì‹ ì‘ì„± ì‹œ, ì‹¤í–‰ ì‹œì ì— ë™ì¼í•œ ë…¼ë¦¬ íŠ¸ë¦¬ë¡œ ì»´íŒŒì¼ ë˜ë¯€ë¡œ ë™ì¼í•œ ì„±ëŠ¥ ë°œíœ˜</li><li>ì˜ˆì‹œëŠ” <code>p.129</code> [ê·¸ë¦¼ 5-1] ë…¼ë¦¬ì  íŠ¸ë¦¬ DAG ì°¸ê³ </li><li><code>expr(&quot;someCol - 5&quot;)</code> == <code>col(&quot;someCol&quot;) - 5</code> == <code>expr(&quot;someCol&quot;) - 5</code>  (ë‹¤ ê°™ì€ íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ ê³¼ì •)</li></ul><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ë™ì¼í•œ í‘œí˜„ - col(), expr()</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.functions.expr</span><br><span class="line">expr(<span class="string">&quot;(((someCol + 5) * 200) - 6) &lt; otherCol&quot;</span>)</span><br><span class="line"></span><br><span class="line">(((col(<span class="string">&quot;someCol&quot;</span>) + <span class="number">5</span>) * <span class="number">200</span>) - <span class="number">6</span>) &lt; col(<span class="string">&quot;otherCol&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DataFrame ì»¬ëŸ¼ ì ‘ê·¼ (printScheme() ì•„ë‹Œ í”„ë¡œê·¸ë˜ë° ë°©ì‹)</span></span><br><span class="line">spark.read.format(<span class="string">&quot;json&quot;</span>).load(<span class="string">&quot;/data/flight-data/json/2015-summary.json&quot;</span>).columns</span><br><span class="line"><span class="comment">// res0: Array[String] = Array(DEST_COUNTRY_NAME, ORIGIN_COUNTRY_NAME, count)</span></span><br></pre></td></tr></table></figure></li></ul><blockquote><p>â€˜í‘œí˜„ì‹â€™ ê³¼ â€˜ì»¬ëŸ¼â€™ ì‚¬ì´ í•µì‹¬ ë‚´ìš©</p><ul><li>ì»¬ëŸ¼ì€ ë‹¨ì§€ í‘œí˜„ì‹ì¼ ë¿</li><li>ì»¬ëŸ¼ê³¼ ì»¬ëŸ¼ì˜ íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ì€ íŒŒì‹±ëœ í‘œí˜„ì‹ê³¼ ë™ì¼í•œ ë…¼ë¦¬ì  ì‹¤í–‰ ê³„íšìœ¼ë¡œ ì»´íŒŒì¼</li></ul></blockquote><h3 id="5-3-ë ˆì½”ë“œì™€-ë¡œìš°"><a href="#5-3-ë ˆì½”ë“œì™€-ë¡œìš°" class="headerlink" title="5.3 ë ˆì½”ë“œì™€ ë¡œìš°"></a>5.3 ë ˆì½”ë“œì™€ ë¡œìš°</h3><ul><li>ìŠ¤íŒŒí¬ì˜ â€˜ë¡œìš°â€™ (=ë ˆì½”ë“œ)<ul><li>ìŠ¤íŒŒí¬ì—ì„œ DataFrameì˜ ê° ë¡œìš°ëŠ” í•˜ë‚˜ì˜ ë ˆì½”ë“œ</li><li>ê°’ì„ ìƒì„±í•˜ê¸° ìœ„í•´ ì»¬ëŸ¼ í‘œí˜„ì‹ìœ¼ë¡œ Row ê°ì²´ë¥¼ ë‹¤ë£¸</li><li>Row ê°ì²´ëŠ” ë‚´ë¶€ ë°”ì´íŠ¸ ë°°ì—´ì„ ê°€ì§€ëŠ” ì¸í„°í˜ì´ìŠ¤ =&gt; <strong>ì˜¤ì§ ì»¬ëŸ¼ í‘œí˜„ì‹ìœ¼ë¡œë§Œ</strong> ë‹¤ë£° ìˆ˜ ìˆìŒ (ì™¸ë¶€ ë…¸ì¶œ X)<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Row í™•ì¸</span></span><br><span class="line">scala&gt; df.first()</span><br><span class="line"><span class="comment">// res1: org.apache.spark.sql.Row = [United States,Romania,15]</span></span><br></pre></td></tr></table></figure></li></ul></li><li>ë¡œìš° ìƒì„±<ul><li>ê° ì»¬ëŸ¼ì— í•´ë‹¹í•˜ëŠ” ê°’ìœ¼ë¡œ ì§ì ‘ Row ê°ì²´ ìƒì„± ê°€ëŠ¥</li><li>ê·¸ëŸ¬ë‚˜ Row ê°ì²´ëŠ” ìŠ¤í‚¤ë§ˆ ì •ë³´ X (=&gt; ì˜¤ì§ DataFrameë§Œ ê°€ì§)</li><li>=&gt; ìŠ¤í‚¤ë§ˆë‘ ê°™ì€ ìˆœì„œë¡œ ê°’ ëª…ì‹œí•´ì•¼í•¨</li></ul></li><li>ë¡œìš° ë°ì´í„° ì ‘ê·¼í•˜ë ¤ë©´ =&gt; ì›í•˜ëŠ” ìœ„ì¹˜ ì§€ì •<ul><li>Python, R ì€ ì˜¬ë°”ë¥¸ ë°ì´í„° íƒ€ì…ìœ¼ë¡œ ì•Œì•„ì„œ ë³€í™˜ë¨</li><li>Scala, Java ëŠ” í—¬í¼ ë©”ì„œë“œë‚˜ ë°ì´í„°íƒ€ì… ëª…ì‹œì  ì§€ì • í•„ìš” (Dataset API ì‚¬ìš© ì‹œ jvm ê°ì²´ ë°ì´í„° ì…‹ ì–»ì„ ìˆ˜ ìˆìŒ)<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.spark.sql.<span class="type">Row</span></span><br><span class="line"><span class="keyword">val</span> myRow = <span class="type">Row</span>(<span class="string">&quot;Hello&quot;</span>, <span class="literal">null</span>, <span class="number">1</span>, <span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">myRow(<span class="number">0</span>) <span class="comment">// type Any</span></span><br><span class="line">myRow(<span class="number">0</span>).asInstanceOf[<span class="type">String</span>] <span class="comment">// String</span></span><br><span class="line">myRow.getString(<span class="number">0</span>) <span class="comment">// String</span></span><br><span class="line">myRow.getInt(<span class="number">2</span>) <span class="comment">// Int</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python ì‚¬ìš© ì‹œ</span></span><br><span class="line">myRow[<span class="number">0</span>]</span><br><span class="line">myRow[<span class="number">2</span>]</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="5-4-DataFrameì˜-íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜"><a href="#5-4-DataFrameì˜-íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜" class="headerlink" title="5.4 DataFrameì˜ íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜"></a>5.4 DataFrameì˜ íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜</h3><blockquote><p>DataFrameì„ ë‹¤ë£¨ëŠ” ë°©ë²• (ì£¼ìš” ì‘ì—… 4ê°€ì§€)</p><ul><li>ë¡œìš°ë‚˜ ì»¬ëŸ¼ ì¶”ê°€</li><li>ë¡œìš°ë‚˜ ì»¬ëŸ¼ ì œê±°</li><li>ë¡œìš°ë¥¼ ì»¬ëŸ¼ìœ¼ë¡œ ë³€í™˜í•˜ê±°ë‚˜, ê·¸ ë°˜ëŒ€ë¡œ ë³€í™˜</li><li>ì»¬ëŸ¼ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ë¡œìš° ìˆœì„œ ë³€ê²½</li></ul><p>ëª¨ë“  ìœ í˜•ì˜ ì‘ì—…ì€ íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ìœ¼ë¡œ ë³€í™˜ ê°€ëŠ¥ (ex. ëª¨ë“  ë¡œìš°ì˜ íŠ¹ì • ì»¬ëŸ¼ê°’ ë³€ê²½ í›„ ê²°ê³¼ ë°˜í™˜)</p></blockquote><ul><li><a href="#1-DataFrame-%EC%83%9D%EC%84%B1">(1) DataFrame ìƒì„±</a></li><li><a href="#2-select-%EC%99%80-selectExpr">(2) select ì™€ selectExpr</a></li><li><a href="#3-%EC%8A%A4%ED%8C%8C%ED%81%AC-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%83%80%EC%9E%85%EC%9C%BC%EB%A1%9C-%EB%B3%80%ED%99%98%ED%95%98%EA%B8%B0">(3) ìŠ¤íŒŒí¬ ë°ì´í„° íƒ€ì…ìœ¼ë¡œ ë³€í™˜í•˜ê¸°</a></li><li><a href="#4-%EC%BB%AC%EB%9F%BC-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0">(4) ì»¬ëŸ¼ ì¶”ê°€í•˜ê¸°</a></li><li><a href="#5-%EC%BB%AC%EB%9F%BC%EB%AA%85-%EB%B3%80%EA%B2%BD%ED%95%98%EA%B8%B0">(5) ì»¬ëŸ¼ëª… ë³€ê²½í•˜ê¸°</a></li><li><a href="#6-%EC%98%88%EC%95%BD-%EB%AC%B8%EC%9E%90%EC%99%80-%ED%82%A4%EC%9B%8C%EB%93%9C">(6) ì˜ˆì•½ ë¬¸ìì™€ í‚¤ì›Œë“œ</a></li><li><a href="#7-%EB%8C%80%EC%86%8C%EB%AC%B8%EC%9E%90-%EA%B5%AC%EB%B6%84">(7) ëŒ€ì†Œë¬¸ì êµ¬ë¶„</a></li><li><a href="#8-%EC%BB%AC%EB%9F%BC-%EC%A0%9C%EA%B1%B0%ED%95%98%EA%B8%B0">(8) ì»¬ëŸ¼ ì œê±°í•˜ê¸°</a></li><li><a href="#9-%EC%BB%AC%EB%9F%BC%EC%9D%98-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%83%80%EC%9E%85-%EB%B3%80%EA%B2%BD%ED%95%98%EA%B8%B0">(9) ì»¬ëŸ¼ì˜ ë°ì´í„° íƒ€ì… ë³€ê²½í•˜ê¸°</a></li><li><a href="#10-%EB%A1%9C%EC%9A%B0-%ED%95%84%ED%84%B0%EB%A7%81%ED%95%98%EA%B8%B0">(10) ë¡œìš° í•„í„°ë§í•˜ê¸°</a></li><li><a href="#11-%EA%B3%A0%EC%9C%A0%ED%95%9C-%EB%A1%9C%EC%9A%B0-%EC%96%BB%EA%B8%B0">(11) ê³ ìœ í•œ ë¡œìš° ì–»ê¸°</a></li><li><a href="#12-%EB%AC%B4%EC%9E%91%EC%9C%84-%EC%83%98%ED%94%8C-%EB%A7%8C%EB%93%A4%EA%B8%B0">(12) ë¬´ì‘ìœ„ ìƒ˜í”Œ ë§Œë“¤ê¸°</a></li><li><a href="#13-%EC%9E%84%EC%9D%98-%EB%B6%84%ED%95%A0%ED%95%98%EA%B8%B0">(13) ì„ì˜ ë¶„í• í•˜ê¸°</a></li><li><a href="#14-%EB%A1%9C%EC%9A%B0-%ED%95%A9%EC%B9%98%EA%B8%B0%EC%99%80-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0">(14) ë¡œìš° í•©ì¹˜ê¸°ì™€ ì¶”ê°€í•˜ê¸°</a></li><li><a href="#15-%EB%A1%9C%EC%9A%B0-%EC%A0%95%EB%A0%AC%ED%95%98%EA%B8%B0">(15) ë¡œìš° ì •ë ¬í•˜ê¸°</a></li><li><a href="#16-%EB%A1%9C%EC%9A%B0-%EC%88%98-%EC%A0%9C%ED%95%9C%ED%95%98%EA%B8%B0">(16) ë¡œìš° ìˆ˜ ì œí•œí•˜ê¸°</a></li><li><a href="#17-repartition%EA%B3%BC-coalesce">(17) repartitionê³¼ coalesce</a></li><li><a href="#18-%EB%93%9C%EB%9D%BC%EC%9D%B4%EB%B2%84%EB%A1%9C-%EB%A1%9C%EC%9A%B0-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%88%98%EC%A7%91%ED%95%98%EA%B8%B0">(18) ë“œë¼ì´ë²„ë¡œ ë¡œìš° ë°ì´í„° ìˆ˜ì§‘í•˜ê¸°</a></li></ul><br/><h4 id="1-DataFrame-ìƒì„±"><a href="#1-DataFrame-ìƒì„±" class="headerlink" title="(1) DataFrame ìƒì„±"></a>(1) DataFrame ìƒì„±</h4><details><summary class="point-color-can-hover">[5.4-1] ì˜ˆì œ í¼ì¹˜ê¸° </summary><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// A. ì›ì‹œ ë°ì´í„° ì†ŒìŠ¤ -&gt; DataFrame</span></span><br><span class="line"><span class="keyword">val</span> df = (spark.read.format(<span class="string">&quot;json&quot;</span>).load(<span class="string">&quot;/data/flight-data/json/2015-summary.json&quot;</span>))</span><br><span class="line"><span class="comment">// (ì„ì‹œ ë·° ë“±ë¡)</span></span><br><span class="line">df.createOrReplaceTempView(<span class="string">&quot;dfTable&quot;</span>)</span><br><span class="line">``</span><br><span class="line"></span><br><span class="line"><span class="comment">// B. (Row ê°ì²´ë¥¼ ê°€ì§€ëŠ”) Seq íƒ€ì… -&gt; DataFrame</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.<span class="type">Row</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.types.&#123;<span class="type">StructField</span>, <span class="type">StructType</span>, <span class="type">StringType</span>, <span class="type">LongType</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> myManualSchema = <span class="keyword">new</span> <span class="type">StructType</span>(<span class="type">Array</span>(</span><br><span class="line">  <span class="keyword">new</span> <span class="type">StructField</span>(<span class="string">&quot;some&quot;</span>, <span class="type">StringType</span>, <span class="literal">true</span>),</span><br><span class="line">  <span class="keyword">new</span> <span class="type">StructField</span>(<span class="string">&quot;col&quot;</span>, <span class="type">StringType</span>, <span class="literal">true</span>),</span><br><span class="line">  <span class="keyword">new</span> <span class="type">StructField</span>(<span class="string">&quot;names&quot;</span>, <span class="type">LongType</span>, <span class="literal">false</span>)))</span><br><span class="line"><span class="keyword">val</span> myRows = <span class="type">Seq</span>(<span class="type">Row</span>(<span class="string">&quot;Hello&quot;</span>, <span class="literal">null</span>, <span class="number">1</span>L))</span><br><span class="line"><span class="comment">// sc ê°ì²´ì˜ parallelize() ë¡œ RDD ìƒì„±</span></span><br><span class="line"><span class="keyword">val</span> myRDD = spark.sparkContext.parallelize(myRows)</span><br><span class="line"><span class="comment">// createDataFrame()ë¡œ DataFrame ìƒì„±</span></span><br><span class="line"><span class="keyword">val</span> myDf = spark.createDataFrame(myRDD, myManualSchema)</span><br><span class="line">myDf.show()</span><br><span class="line"></span><br><span class="line"><span class="comment">// +-----+----+-----+</span></span><br><span class="line"><span class="comment">// | some| col|names|</span></span><br><span class="line"><span class="comment">// +-----+----+-----+</span></span><br><span class="line"><span class="comment">// |Hello|null|    1|</span></span><br><span class="line"><span class="comment">// +-----+----+-----+</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Scala ì‚¬ìš© ì‹œ toDF() ì‚¬ìš© ê°€ëŠ¥ (import spark.implicits._)</span></span><br><span class="line"><span class="keyword">val</span> myDF = <span class="type">Seq</span>((<span class="string">&quot;Hello&quot;</span>, <span class="number">2</span>, <span class="number">1</span>L)).toDF(<span class="string">&quot;col1&quot;</span>, <span class="string">&quot;col2&quot;</span>, <span class="string">&quot;col3&quot;</span>)</span><br></pre></td></tr></table></figure></details><ul><li>ìŠ¤íŒŒí¬ì˜ implicits (import í•„ìš”, <a href="http://bit.ly/2xrFpML">ì°¸ê³ </a>)<ul><li>Scala ìŠ¤íŒŒí¬ ì½˜ì†” ì‚¬ìš© ì‹œ =&gt; Seq ë°ì´í„° íƒ€ì…ì— <code>toDF()</code> ì‚¬ìš© ê°€ëŠ¥</li><li>ê·¸ëŸ¬ë‚˜ null íƒ€ì…ê³¼ëŠ” ì•ˆë§ìœ¼ë¯€ë¡œ ìš´ì˜í™˜ê²½ ì‚¬ìš©ì€ ê¶Œì¥ X</li></ul></li></ul><blockquote><h4 id="createDataFrame-vs-toDF"><a href="#createDataFrame-vs-toDF" class="headerlink" title="createDataFrame() vs toDF()"></a>createDataFrame() vs toDF()</h4><ul><li><code>createDataFrame(rowRDD: RDD[Row], schema: StructType) : DataFrame</code><ul><li>ëª¨ë“  schema customization ê°€ëŠ¥</li><li><a href="https://spark.apache.org/docs/latest/api/scala/org/apache/spark/sql/SparkSession.html#createDataFrame(rowRDD:org.apache.spark.rdd.RDD[org.apache.spark.sql.Row],schema:org.apache.spark.sql.types.StructType):org.apache.spark.sql.DataFrame">API docs#SparkSession</a></li></ul></li><li><code>toDF()</code><ul><li>ìŠ¤í‚¤ë§ˆ ì§€ì • ì—†ìŒ. schema ì¶”ë¡  (Dataset API)</li><li><code>import spark.implicits._</code> í•„ìš”</li><li><a href="https://spark.apache.org/docs/latest/api/scala/org/apache/spark/sql/Dataset.html#toDF():org.apache.spark.sql.DataFrame">API docs#Dataset</a></li></ul></li></ul></blockquote><h4 id="2-select-ì™€-selectExpr"><a href="#2-select-ì™€-selectExpr" class="headerlink" title="(2) select ì™€ selectExpr"></a>(2) select ì™€ selectExpr</h4><details><summary class="point-color-can-hover">[5.4-2] ì˜ˆì œ í¼ì¹˜ê¸° </summary><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--- SQL</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> dataFrameTable</span><br><span class="line"><span class="keyword">SELECT</span> columnName <span class="keyword">FROM</span> dataFrameTable</span><br><span class="line"><span class="keyword">SELECT</span> columnName <span class="operator">*</span> <span class="number">10</span>, otherColumn, someOtherCol <span class="keyword">as</span> c <span class="keyword">FROM</span> dataFrameTable</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># select() == SELECT query</span></span><br><span class="line">scala&gt; df.select(<span class="string">&quot;DEST_COUNTRY_NAME&quot;</span>).show(2)</span><br><span class="line">+-----------------+</span><br><span class="line">|DEST_COUNTRY_NAME|</span><br><span class="line">+-----------------+</span><br><span class="line">|    United States|</span><br><span class="line">|    United States|</span><br><span class="line">+-----------------+</span><br><span class="line"></span><br><span class="line">scala&gt; df.select(<span class="string">&quot;DEST_COUNTRY_NAME&quot;</span>, <span class="string">&quot;ORIGIN_COUNTRY_NAME&quot;</span>).show(2)</span><br><span class="line">+-----------------+-------------------+</span><br><span class="line">|DEST_COUNTRY_NAME|ORIGIN_COUNTRY_NAME|</span><br><span class="line">+-----------------+-------------------+</span><br><span class="line">|    United States|            Romania|</span><br><span class="line">|    United States|            Croatia|</span><br><span class="line">+-----------------+-------------------+</span><br><span class="line"></span><br><span class="line">--- SQL</span><br><span class="line">SELECT DEST_COUNTRY_NAME FROM dfTable LIMIT 2</span><br><span class="line">SELECT DEST_COUNTRY_NAME, ORIGIN_COUNTRY_NAME FROM dfTable LIMIT 2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ë‹¤ì–‘í•œ ì»¬ëŸ¼ ì°¸ì¡° ë°©ë²•</span></span><br><span class="line"><span class="comment"># df.select(col(&quot;DEST_COUNTRY_NAME&quot;), &quot;DEST_COUNTRY_NAME&quot;) =&gt; ì—ëŸ¬</span></span><br><span class="line">scala&gt; import org.apache.spark.sql.functions.&#123;expr, col, column&#125;</span><br><span class="line">scala&gt; (df.select(</span><br><span class="line">     |     df.col(<span class="string">&quot;DEST_COUNTRY_NAME&quot;</span>),</span><br><span class="line">     |     col(<span class="string">&quot;DEST_COUNTRY_NAME&quot;</span>),</span><br><span class="line">     |     column(<span class="string">&quot;DEST_COUNTRY_NAME&quot;</span>),</span><br><span class="line">     |     <span class="string">&#x27;DEST_COUNTRY_NAME,</span></span><br><span class="line"><span class="string">     |     $&quot;DEST_COUNTRY_NAME&quot;,</span></span><br><span class="line"><span class="string">     |     expr(&quot;DEST_COUNTRY_NAME&quot;))</span></span><br><span class="line"><span class="string">     |   .show(2))</span></span><br><span class="line"><span class="string">+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+</span></span><br><span class="line"><span class="string">|DEST_COUNTRY_NAME|DEST_COUNTRY_NAME|DEST_COUNTRY_NAME|DEST_COUNTRY_NAME|DEST_COUNTRY_NAME|DEST_COUNTRY_NAME|</span></span><br><span class="line"><span class="string">+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+</span></span><br><span class="line"><span class="string">|    United States|    United States|    United States|    United States|    United States|    United States|</span></span><br><span class="line"><span class="string">|    United States|    United States|    United States|    United States|    United States|    United States|</span></span><br><span class="line"><span class="string">+-----------------+-----------------+-----------------+-----------------+-----------------+-----------------+</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// expr() ì˜ˆì‹œ - ì»¬ëŸ¼ëª… DEST_COUNTRY_NAME -&gt; destination -&gt; DEST_COUNTRY_NAME</span></span><br><span class="line">df.select(expr(<span class="string">&quot;DEST_COUNTRY_NAME AS destination&quot;</span>)).show(<span class="number">2</span>)</span><br><span class="line">df.select(expr(<span class="string">&quot;DEST_COUNTRY_NAME as destination&quot;</span>).alias(<span class="string">&quot;DEST_COUNTRY_NAME&quot;</span>)).show(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// select() + expr() =&gt; selectExpr()</span></span><br><span class="line">df.selectExpr(<span class="string">&quot;DEST_COUNTRY_NAME as newColumnName&quot;</span>, <span class="string">&quot;DEST_COUNTRY_NAME&quot;</span>).show(<span class="number">2</span>)</span><br><span class="line"><span class="comment">// +-------------+-----------------+</span></span><br><span class="line"><span class="comment">// |newColumnName|DEST_COUNTRY_NAME|</span></span><br><span class="line"><span class="comment">// +-------------+-----------------+</span></span><br><span class="line"><span class="comment">// |United States|    United States|</span></span><br><span class="line"><span class="comment">// |United States|    United States|</span></span><br><span class="line"><span class="comment">// +-------------+-----------------+</span></span><br><span class="line"></span><br><span class="line">(df.selectExpr(</span><br><span class="line">    <span class="string">&quot;*&quot;</span>, <span class="comment">// include all original columns</span></span><br><span class="line">    <span class="string">&quot;(DEST_COUNTRY_NAME = ORIGIN_COUNTRY_NAME) as withinCountry&quot;</span>)</span><br><span class="line">  .show(<span class="number">2</span>))</span><br><span class="line"><span class="comment">// +-----------------+-------------------+-----+-------------+</span></span><br><span class="line"><span class="comment">// |DEST_COUNTRY_NAME|ORIGIN_COUNTRY_NAME|count|withinCountry|</span></span><br><span class="line"><span class="comment">// +-----------------+-------------------+-----+-------------+</span></span><br><span class="line"><span class="comment">// |    United States|            Romania|   15|        false|</span></span><br><span class="line"><span class="comment">// |    United States|            Croatia|    1|        false|</span></span><br><span class="line"><span class="comment">// +-----------------+-------------------+-----+-------------+</span></span><br><span class="line"></span><br><span class="line">df.selectExpr(<span class="string">&quot;avg(count)&quot;</span>, <span class="string">&quot;count(distinct(DEST_COUNTRY_NAME))&quot;</span>).show(<span class="number">2</span>)</span><br><span class="line"><span class="comment">// +-----------+---------------------------------+</span></span><br><span class="line"><span class="comment">// | avg(count)|count(DISTINCT DEST_COUNTRY_NAME)|</span></span><br><span class="line"><span class="comment">// +-----------+---------------------------------+</span></span><br><span class="line"><span class="comment">// |1770.765625|                              132|</span></span><br><span class="line"><span class="comment">// +-----------+---------------------------------+</span></span><br></pre></td></tr></table></figure></details><blockquote><p>DataFrameì„ ë‹¤ë£¨ê¸° ìœ„í•œ ëŒ€ë¶€ë¶„ì˜ íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ ì‘ì—… í•´ê²° ê°€ëŠ¥</p><ul><li><code>select()</code> : ì»¬ëŸ¼ì´ë‚˜ í‘œí˜„ì‹ì„ ì‚¬ìš©</li><li><code>selectExpr()</code> : ë¬¸ìì—´ í‘œí˜„ì‹ì„ ì‚¬ìš©</li><li><code>select()</code>: ë©”ì„œë“œë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” <code>org.apache.spark.sql.function</code> ì— í¬í•¨ëœ ë‹¤ì–‘í•œ í•¨ìˆ˜</li></ul></blockquote><ul><li>DataFrame ì»¬ëŸ¼ ë‹¤ë£° ì‹œ, SQL ì‚¬ìš© ê°€ëŠ¥</li><li>ì»¬ëŸ¼ ì°¸ì¡° ë°©ë²•ì€ ë‹¤ì–‘í•œ ë°©ë²•ì„ ì„ì–´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. 5.2 ì¬ì°¸ê³ <ul><li>Column ê°ì²´ë‘ ë¬¸ìì—´ì„ í•¨ê»˜ ì„ì–´ì“¸ìˆ˜ëŠ” X (ex. <code>df.select(col(&quot;DEST_COUNTRY_NAME&quot;), &quot;DEST_COUNTRY_NAME&quot;)</code> =&gt; ì»´íŒŒì¼ ì—ëŸ¬)</li><li>ê°€ì¥ ìœ ì—°í•œ ì°¸ì¡° ë°©ë²• =&gt; <code>expr()</code></li></ul></li><li><code>select()</code> + <code>expr()</code> íŒ¨í„´ì„ ìì£¼ ì‚¬ìš© =&gt; <strong><code>selectExpr()</code></strong> (íš¨ìœ¨ì„± â†‘)<ul><li><i style="color:gray">â€œ?? : í¬í­..ìŠ¤íŒŒí¬ì˜ ì§„ì •í•œ ëŠ¥ë ¥ì„ ë³´ì—¬ì£¼ì§€..â€</i></li><li>ìƒˆë¡œìš´ DataFrame ìƒì„±í•˜ëŠ” ë³µì¡í•œ í‘œí˜„ì‹ ê°„ë‹¨í•˜ê²Œ í‘œí˜„ ê°€ëŠ¥</li><li>ëª¨ë“  ìœ íš¨í•œ ë¹„ì§‘ê³„í˜• (non-aggregating) SQL ì§€ì • ê°€ëŠ¥ (ë‹¨, ì»¬ëŸ¼ ì‹ë³„ ê°€ëŠ¥í•´ì•¼)</li><li>ì§‘ê³„ í•¨ìˆ˜ (avg, count ë“±) ì‚¬ìš© ê°€ëŠ¥</li></ul></li></ul><h4 id="3-ìŠ¤íŒŒí¬-ë°ì´í„°-íƒ€ì…ìœ¼ë¡œ-ë³€í™˜í•˜ê¸°"><a href="#3-ìŠ¤íŒŒí¬-ë°ì´í„°-íƒ€ì…ìœ¼ë¡œ-ë³€í™˜í•˜ê¸°" class="headerlink" title="(3) ìŠ¤íŒŒí¬ ë°ì´í„° íƒ€ì…ìœ¼ë¡œ ë³€í™˜í•˜ê¸°"></a>(3) ìŠ¤íŒŒí¬ ë°ì´í„° íƒ€ì…ìœ¼ë¡œ ë³€í™˜í•˜ê¸°</h4><details><summary class="point-color-can-hover">[5.4-3] ì˜ˆì œ í¼ì¹˜ê¸° </summary><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.spark.sql.functions.lit</span><br><span class="line"></span><br><span class="line">df.select(expr(<span class="string">&quot;*&quot;</span>), lit(<span class="number">1</span>).as(<span class="string">&quot;One&quot;</span>)).show(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// +-----------------+-------------------+-----+---+</span></span><br><span class="line"><span class="comment">// |DEST_COUNTRY_NAME|ORIGIN_COUNTRY_NAME|count|One|</span></span><br><span class="line"><span class="comment">// +-----------------+-------------------+-----+---+</span></span><br><span class="line"><span class="comment">// |    United States|            Romania|   15|  1|</span></span><br><span class="line"><span class="comment">// |    United States|            Croatia|    1|  1|</span></span><br><span class="line"><span class="comment">// +-----------------+-------------------+-----+---+</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- SQL ì—ì„œ ë¦¬í„°ëŸ´ì€ ìƒìˆ«ê°’ (ë™ì¼ í‘œí˜„)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span>, <span class="number">1</span> <span class="keyword">as</span> <span class="keyword">One</span> <span class="keyword">FROM</span> dfTable LIMIT <span class="number">2</span></span><br></pre></td></tr></table></figure></details><ul><li><strong>ë¦¬í„°ëŸ´(literal)</strong> : í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì˜ ë¦¬í„°ëŸ´ ê°’ =&gt; ìŠ¤íŒŒí¬ê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” ê°’ìœ¼ë¡œ ë³€í™˜<ul><li>ë•Œë¡œëŠ” ëª…ì‹œì  ê°’ (ìƒìˆ˜ê°’, ë¹„êµì— ì‚¬ìš©í•  ë¬´ì–¸ê°€ ë“±..) ì„ ìŠ¤íŒŒí¬ì— ì „ë‹¬í•´ì•¼í•¨ =&gt; ë¦¬í„°ëŸ´ ì‚¬ìš©</li><li>ë¦¬í„°ëŸ´ì€ í‘œí˜„ì‹</li><li>ì–´ë–¤ ìƒìˆ˜ë‚˜ í”„ë¡œê·¸ë˜ë°ìœ¼ë¡œ ìƒì„±ëœ ë³€ìˆ«ê°’ì„ íŠ¹ì • ì»¬ëŸ¼ì˜ ê°’ê³¼ ë¹„êµí•  ë•Œ ì‚¬ìš©</li></ul></li></ul><h4 id="4-ì»¬ëŸ¼-ì¶”ê°€í•˜ê¸°"><a href="#4-ì»¬ëŸ¼-ì¶”ê°€í•˜ê¸°" class="headerlink" title="(4) ì»¬ëŸ¼ ì¶”ê°€í•˜ê¸°"></a>(4) ì»¬ëŸ¼ ì¶”ê°€í•˜ê¸°</h4><details><summary class="point-color-can-hover">[5.4-4] ì˜ˆì œ í¼ì¹˜ê¸° </summary><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">df.withColumn(<span class="string">&quot;numberOne&quot;</span>, lit(<span class="number">1</span>)).show(<span class="number">2</span>)</span><br><span class="line"><span class="comment">// +-----------------+-------------------+-----+---------+</span></span><br><span class="line"><span class="comment">// |DEST_COUNTRY_NAME|ORIGIN_COUNTRY_NAME|count|numberOne|</span></span><br><span class="line"><span class="comment">// +-----------------+-------------------+-----+---------+</span></span><br><span class="line"><span class="comment">// |    United States|            Romania|   15|        1|</span></span><br><span class="line"><span class="comment">// |    United States|            Croatia|    1|        1|</span></span><br><span class="line"><span class="comment">// +-----------------+-------------------+-----+---------+</span></span><br><span class="line"></span><br><span class="line">(df.withColumn(<span class="string">&quot;withinCountry&quot;</span>, expr(<span class="string">&quot;ORIGIN_COUNTRY_NAME == DEST_COUNTRY_NAME&quot;</span>))</span><br><span class="line">  .show(<span class="number">2</span>))</span><br><span class="line"><span class="comment">// +-----------------+-------------------+-----+-------------+</span></span><br><span class="line"><span class="comment">// |DEST_COUNTRY_NAME|ORIGIN_COUNTRY_NAME|count|withinCountry|</span></span><br><span class="line"><span class="comment">// +-----------------+-------------------+-----+-------------+</span></span><br><span class="line"><span class="comment">// |    United States|            Romania|   15|        false|</span></span><br><span class="line"><span class="comment">// |    United States|            Croatia|    1|        false|</span></span><br><span class="line"><span class="comment">// +-----------------+-------------------+-----+-------------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ì»¬ëŸ¼ëª… ë³€ê²½ë„ ê°€ëŠ¥ (DEST_COUNTRY_NAME -&gt; Destination)</span></span><br><span class="line">df.withColumn(<span class="string">&quot;Destination&quot;</span>, expr(<span class="string">&quot;DEST_COUNTRY_NAME&quot;</span>)).columns</span><br><span class="line"><span class="comment">// res18: Array[String] = Array(DEST_COUNTRY_NAME, ORIGIN_COUNTRY_NAME, count, Destination)</span></span><br></pre></td></tr></table></figure></details><ul><li><code>withColumn(ì»¬ëŸ¼ëª…, ê°’ì„ ìƒì„±í•  í‘œí˜„ì‹)</code> ì‚¬ìš©<ul><li>ê³µì‹ì  ì»¬ëŸ¼ ì¶”ê°€ ë°©ë²•</li><li>ì»¬ëŸ¼ëª… ë³€ê²½í•˜ì—¬ ì¶”ê°€ë„ ê°€ëŠ¥</li></ul></li></ul><h4 id="5-ì»¬ëŸ¼ëª…-ë³€ê²½í•˜ê¸°"><a href="#5-ì»¬ëŸ¼ëª…-ë³€ê²½í•˜ê¸°" class="headerlink" title="(5) ì»¬ëŸ¼ëª… ë³€ê²½í•˜ê¸°"></a>(5) ì»¬ëŸ¼ëª… ë³€ê²½í•˜ê¸°</h4><details><summary class="point-color-can-hover">[5.4-5] ì˜ˆì œ í¼ì¹˜ê¸° </summary><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DEST_COUNTRY_NAME -&gt; dest ë¡œ ë³€ê²½</span></span><br><span class="line">df.withColumnRenamed(<span class="string">&quot;DEST_COUNTRY_NAME&quot;</span>, <span class="string">&quot;dest&quot;</span>).columns</span><br><span class="line"><span class="comment">// res21: Array[String] = Array(dest, ORIGIN_COUNTRY_NAME, count)</span></span><br></pre></td></tr></table></figure></details><ul><li><code>withColumnRenamed(ì»¬ëŸ¼ëª…, ë³€ê²½í•  ë¬¸ìì—´)</code> ì‚¬ìš©</li></ul><h4 id="6-ì˜ˆì•½-ë¬¸ìì™€-í‚¤ì›Œë“œ"><a href="#6-ì˜ˆì•½-ë¬¸ìì™€-í‚¤ì›Œë“œ" class="headerlink" title="(6) ì˜ˆì•½ ë¬¸ìì™€ í‚¤ì›Œë“œ"></a>(6) ì˜ˆì•½ ë¬¸ìì™€ í‚¤ì›Œë“œ</h4><details><summary class="point-color-can-hover">[5.4-6] ì˜ˆì œ í¼ì¹˜ê¸° </summary><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ì´ìŠ¤ì¼€ì´í•‘ í•„ìš” ì—†ëŠ” ì˜ˆì‹œ - ìƒˆë¡œìš´ ì»¬ëŸ¼ëª…ì„ ë‚˜íƒ€ë‚´ëŠ” ë¬¸ìì—´</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.functions.expr</span><br><span class="line"><span class="keyword">val</span> dfWithLongColName = df.withColumn(</span><br><span class="line">  <span class="string">&quot;This Long Column-Name&quot;</span>,</span><br><span class="line">  expr(<span class="string">&quot;ORIGIN_COUNTRY_NAME&quot;</span>))</span><br><span class="line"><span class="comment">// dfWithLongColName: org.apache.spark.sql.DataFrame = [DEST_COUNTRY_NAME: string, ORIGIN_COUNTRY_NAME: string ... 2 more fields]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ì´ìŠ¤ì¼€ì´í•‘ í•„ìš”í•œ ì˜ˆì‹œ - í‘œí˜„ì‹ìœ¼ë¡œ í•´ë‹¹ ì»¬ëŸ¼ì„ ì°¸ì¡° </span></span><br><span class="line">(dfWithLongColName.selectExpr(</span><br><span class="line">    <span class="string">&quot;`This Long Column-Name`&quot;</span>,</span><br><span class="line">    <span class="string">&quot;`This Long Column-Name` as `new col`&quot;</span>)</span><br><span class="line">  .show(<span class="number">2</span>))</span><br><span class="line"><span class="comment">// +---------------------+-------+</span></span><br><span class="line"><span class="comment">// |This Long Column-Name|new col|</span></span><br><span class="line"><span class="comment">// +---------------------+-------+</span></span><br><span class="line"><span class="comment">// |              Romania|Romania|</span></span><br><span class="line"><span class="comment">// |              Croatia|Croatia|</span></span><br><span class="line"><span class="comment">// +---------------------+-------+</span></span><br><span class="line"></span><br><span class="line">dfWithLongColName.createOrReplaceTempView(<span class="string">&quot;dfTableLong&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ê°™ì€ DataFrame ìƒì„±</span></span><br><span class="line">dfWithLongColName.select(col(<span class="string">&quot;This Long Column-Name&quot;</span>)).columns</span><br><span class="line">dfWithLongColName.select(expr(<span class="string">&quot;`This Long Column-Name`&quot;</span>)).columns</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- SQL (ë™ì¼ í‘œí˜„)</span></span><br><span class="line"><span class="keyword">SELECT</span> `This Long <span class="keyword">Column</span><span class="operator">-</span>Name`, `This Long <span class="keyword">Column</span><span class="operator">-</span>Name` <span class="keyword">as</span> `<span class="keyword">new</span> col`</span><br><span class="line"><span class="keyword">FROM</span> dfTableLong LIMIT <span class="number">2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></details><ul><li>ì˜ˆì•½ ë¬¸ì(ê³µë°±, í•˜ì´í”ˆ (-) ë“±..) ëŠ” ì»¬ëŸ¼ëª… ì‚¬ìš© ë¶ˆê°€<ul><li>=&gt; ì‚¬ìš©í•˜ë ¤ë©´ <strong><code>`</code> (ë°±í‹±ë¬¸ì)</strong> ë¥¼ ì´ìš©í•œ ì´ìŠ¤ì¼€ì´í•‘(escaping) í•„ìš”</li></ul></li><li>ì˜ˆì•½ ë¬¸ìë‚˜ í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” â€˜í‘œí˜„ì‹â€™ì—ëŠ” ì´ìŠ¤ì¼€ì´í”„ ì²˜ë¦¬ í•„ìš”<ul><li>â€˜ë¬¸ìì—´â€™ë¡œ ëª…ì‹œì  ì»¬ëŸ¼ ì°¸ì¡° ì‹œì—ëŠ” ë¦¬í„°ëŸ´ë¡œ í•´ì„ =&gt; ì˜ˆì•½ë¬¸ì ì—†ì´ë„ ì°¸ì¡° ê°€ëŠ¥</li></ul></li></ul><h4 id="7-ëŒ€ì†Œë¬¸ì-êµ¬ë¶„"><a href="#7-ëŒ€ì†Œë¬¸ì-êµ¬ë¶„" class="headerlink" title="(7) ëŒ€ì†Œë¬¸ì êµ¬ë¶„"></a>(7) ëŒ€ì†Œë¬¸ì êµ¬ë¶„</h4><details><summary class="point-color-can-hover">[5.4-7] ì˜ˆì œ í¼ì¹˜ê¸° </summary><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> spark.sql.caseSensitive <span class="literal">true</span></span><br></pre></td></tr></table></figure></details><ul><li>ê¸°ë³¸ì ìœ¼ë¡œ ìŠ¤íŒŒí¬ëŠ” ëŒ€ì†Œë¬¸ìë¥¼ ê°€ë¦¬ì§€ ì•ŠìŒ</li><li><code>set spark.sql.caseSenstive true</code> ì„¤ì • ì‹œ êµ¬ë¶„ ê°€ëŠ¥</li></ul><h4 id="8-ì»¬ëŸ¼-ì œê±°í•˜ê¸°"><a href="#8-ì»¬ëŸ¼-ì œê±°í•˜ê¸°" class="headerlink" title="(8) ì»¬ëŸ¼ ì œê±°í•˜ê¸°"></a>(8) ì»¬ëŸ¼ ì œê±°í•˜ê¸°</h4><details><summary class="point-color-can-hover">[5.4-8] ì˜ˆì œ í¼ì¹˜ê¸° </summary><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">df.drop(<span class="string">&quot;ORIGIN_COUNTRY_NAME&quot;</span>).columns</span><br><span class="line"><span class="comment">// res30: Array[String] = Array(DEST_COUNTRY_NAME, count)</span></span><br><span class="line"></span><br><span class="line">dfWithLongColName.drop(<span class="string">&quot;ORIGIN_COUNTRY_NAME&quot;</span>, <span class="string">&quot;DEST_COUNTRY_NAME&quot;</span>)</span><br><span class="line"><span class="comment">// res32: org.apache.spark.sql.DataFrame = [count: bigint, This Long Column-Name: string]</span></span><br></pre></td></tr></table></figure></details><ul><li><code>drop(ì»¬ëŸ¼ëª…...)</code> ì‚¬ìš©<ul><li>ì—¬ëŸ¬ê°œë¥¼ ì¸ìˆ˜ë¡œ ë„£ì–´ ë‹¤ìˆ˜ì˜ ì»¬ëŸ¼ì„ í•œë²ˆì— ì œê±° ê°€ëŠ¥</li></ul></li><li><code>select()</code> ë¡œë„ ì œê±° ê°€ëŠ¥</li></ul><h4 id="9-ì»¬ëŸ¼ì˜-ë°ì´í„°-íƒ€ì…-ë³€ê²½í•˜ê¸°"><a href="#9-ì»¬ëŸ¼ì˜-ë°ì´í„°-íƒ€ì…-ë³€ê²½í•˜ê¸°" class="headerlink" title="(9) ì»¬ëŸ¼ì˜ ë°ì´í„° íƒ€ì… ë³€ê²½í•˜ê¸°"></a>(9) ì»¬ëŸ¼ì˜ ë°ì´í„° íƒ€ì… ë³€ê²½í•˜ê¸°</h4><details><summary class="point-color-can-hover">[5.4-9] ì˜ˆì œ í¼ì¹˜ê¸° </summary><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// count ì»¬ëŸ¼ : Integer -&gt; String ìœ¼ë¡œ í˜•ë³€í™˜</span></span><br><span class="line">df.withColumn(<span class="string">&quot;count2&quot;</span>, col(<span class="string">&quot;count&quot;</span>).cast(<span class="string">&quot;long&quot;</span>))</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- SQL (ë™ì¼ í‘œí˜„)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span>, <span class="built_in">cast</span>(count <span class="keyword">as</span> string) <span class="keyword">AS</span> count2 <span class="keyword">FROM</span> dfTable</span><br></pre></td></tr></table></figure></details><ul><li><code>cast()</code> ì‚¬ìš©<ul><li>íŠ¹ì • ë°ì´í„° íƒ€ì… =&gt; ë‹¤ë¥¸ ë°ì´í„° íƒ€ì…ìœ¼ë¡œ í˜•ë³€í™˜</li></ul></li></ul><h4 id="10-ë¡œìš°-í•„í„°ë§í•˜ê¸°"><a href="#10-ë¡œìš°-í•„í„°ë§í•˜ê¸°" class="headerlink" title="(10) ë¡œìš° í•„í„°ë§í•˜ê¸°"></a>(10) ë¡œìš° í•„í„°ë§í•˜ê¸°</h4><details><summary class="point-color-can-hover">[5.4-10] ì˜ˆì œ í¼ì¹˜ê¸° </summary><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ë™ì¼í•œ í‘œí˜„ì‹</span></span><br><span class="line">df.filter(col(<span class="string">&quot;count&quot;</span>) &lt; <span class="number">2</span>).show(<span class="number">2</span>)</span><br><span class="line">df.where(<span class="string">&quot;count &lt; 2&quot;</span>).show(<span class="number">2</span>)</span><br><span class="line"><span class="comment">// +-----------------+-------------------+-----+</span></span><br><span class="line"><span class="comment">// |DEST_COUNTRY_NAME|ORIGIN_COUNTRY_NAME|count|</span></span><br><span class="line"><span class="comment">// +-----------------+-------------------+-----+</span></span><br><span class="line"><span class="comment">// |    United States|            Croatia|    1|</span></span><br><span class="line"><span class="comment">// |    United States|          Singapore|    1|</span></span><br><span class="line"><span class="comment">// +-----------------+-------------------+-----+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ì—¬ëŸ¬ í•„í„° ì ìš© ì‹œ (ìˆœì„œ ë¬´ê´€, ë™ì‹œ ì ìš©)</span></span><br><span class="line">df.where(col(<span class="string">&quot;count&quot;</span>) &lt; <span class="number">2</span>).where(col(<span class="string">&quot;ORIGIN_COUNTRY_NAME&quot;</span>) =!= <span class="string">&quot;Croatia&quot;</span>).show(<span class="number">2</span>)</span><br><span class="line"><span class="comment">// +-----------------+-------------------+-----+</span></span><br><span class="line"><span class="comment">// |DEST_COUNTRY_NAME|ORIGIN_COUNTRY_NAME|count|</span></span><br><span class="line"><span class="comment">// +-----------------+-------------------+-----+</span></span><br><span class="line"><span class="comment">// |    United States|          Singapore|    1|</span></span><br><span class="line"><span class="comment">// |          Moldova|      United States|    1|</span></span><br><span class="line"><span class="comment">// +-----------------+-------------------+-----+</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- SQL (ë™ì¼ í‘œí˜„)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> dfTable <span class="keyword">WHERE</span> count <span class="operator">&lt;</span> <span class="number">2</span> LIMIT <span class="number">2</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> dfTable <span class="keyword">WHERE</span> count <span class="operator">&lt;</span> <span class="number">2</span> <span class="keyword">AND</span> ORIGIN_COUNTRY_NAME <span class="operator">!=</span> &quot;Croatia&quot; LIMIT <span class="number">2</span></span><br></pre></td></tr></table></figure></details><ul><li>í•„í„°ë§ì„ í•˜ë ¤ë©´ ì°¸/ê±°ì§“ íŒë³„ í‘œí˜„ì‹ í•„ìš”<ul><li>ë¬¸ìì—´ í‘œí˜„ì‹, ì»¬ëŸ¼ì„ ë‹¤ë£¨ëŠ” ê¸°ëŠ¥ìœ¼ë¡œ í‘œí˜„ì‹ ë§Œë“¦</li></ul></li><li><code>where()</code> <code>filter()</code> ì‚¬ìš© ê°€ëŠ¥<ul><li>ë‘ ë©”ì„œë“œ ëª¨ë‘ ê°™ì€ íŒŒë¼ë¯¸í„° íƒ€ì… ë° ê°™ì€ ì—°ì‚° ìˆ˜í–‰</li><li><code>where()</code> ëŠ” SQLê³¼ ìœ ì‚¬</li><li><code>filter()</code> ëŠ” Dataset APIë¥¼ ì´ìš©í•´ì„œ ì‚¬ìš©í•˜ë©´ Dataset ê° ë ˆì½”ë“œì— ì ìš© í•  í•¨ìˆ˜ë¥¼ ì‚¬ìš© ê°€ëŠ¥ (=&gt; ìì„¸í•œê±´ 11ì¥)</li></ul></li><li>ìŠ¤íŒŒí¬ëŠ” í•„í„°ì˜ ìˆœì„œì™€ ìƒê´€ì—†ì´ ë™ì‹œì— ëª¨ë“  í•„í„°ë§ ì‘ì—… ìˆ˜í–‰<ul><li>ê°™ì€ í‘œí˜„ì‹ì— ì—¬ëŸ¬ í•„í„° ì ìš©ì‹œ</li><li>ì°¨ë¡€ëŒ€ë¡œ AND í•„í„° ì—°ê²° í›„ íŒë‹¨ì€ ìŠ¤íŒŒí¬ì—ê²Œ ë§¡ê²¨ì•¼ í•¨</li></ul></li></ul><h4 id="11-ê³ ìœ í•œ-ë¡œìš°-ì–»ê¸°"><a href="#11-ê³ ìœ í•œ-ë¡œìš°-ì–»ê¸°" class="headerlink" title="(11) ê³ ìœ í•œ ë¡œìš° ì–»ê¸°"></a>(11) ê³ ìœ í•œ ë¡œìš° ì–»ê¸°</h4><details><summary class="point-color-can-hover">[5.4-11] ì˜ˆì œ í¼ì¹˜ê¸° </summary><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">df.select(<span class="string">&quot;ORIGIN_COUNTRY_NAME&quot;</span>, <span class="string">&quot;DEST_COUNTRY_NAME&quot;</span>).distinct().count()</span><br><span class="line"><span class="comment">// res41: Long = 256</span></span><br><span class="line"></span><br><span class="line">df.select(<span class="string">&quot;ORIGIN_COUNTRY_NAME&quot;</span>).distinct().count()</span><br><span class="line"><span class="comment">// res44: Long = 125</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- SQL (ë™ì¼ í‘œí˜„)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span>(ORIGIN_COUNTRY_NAME, DEST_COUNTRY_NAME)) <span class="keyword">FROM</span> dfTable</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> ORIGIN_COUNTRY_NAME) <span class="keyword">FROM</span> dfTable</span><br></pre></td></tr></table></figure></details><ul><li><code>distinct()</code> ì‚¬ìš©<ul><li>ê³ ìœ³ê°’ì´ë‚˜ ì¤‘ë³µë˜ì§€ ì•Šì€ ê°’ì„ ì–»ëŠ” ì—°ì‚°</li></ul></li></ul><h4 id="12-ë¬´ì‘ìœ„-ìƒ˜í”Œ-ë§Œë“¤ê¸°"><a href="#12-ë¬´ì‘ìœ„-ìƒ˜í”Œ-ë§Œë“¤ê¸°" class="headerlink" title="(12) ë¬´ì‘ìœ„ ìƒ˜í”Œ ë§Œë“¤ê¸°"></a>(12) ë¬´ì‘ìœ„ ìƒ˜í”Œ ë§Œë“¤ê¸°</h4><details><summary class="point-color-can-hover">[5.4-12] ì˜ˆì œ í¼ì¹˜ê¸° </summary><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> seed = <span class="number">5</span></span><br><span class="line"><span class="keyword">val</span> withReplacement = <span class="literal">false</span></span><br><span class="line"><span class="keyword">val</span> fraction = <span class="number">0.5</span></span><br><span class="line">df.sample(withReplacement, fraction, seed).count()</span><br><span class="line"><span class="comment">// res46: Long = 126</span></span><br></pre></td></tr></table></figure></details><ul><li><code>sample(ë³µì›ì¶”ì¶œ ì—¬ë¶€, ì¶”ì¶œ ë¹„ìœ¨, seed)</code> ì‚¬ìš©<ul><li>í‘œë³¸ ë°ì´í„° ì¶”ì¶œ ë¹„ìœ¨ (&lt;=1.0) ì§€ì • ê°€ëŠ¥</li><li>ë³µì› ì¶”ì¶œ (sample with replacement), ë¹„ë³µì› ì¶”ì¶œ (sample without replacement) ì‚¬ìš© ì—¬ë¶€ ì§€ì • ê°€ëŠ¥</li></ul></li></ul><h4 id="13-ì„ì˜-ë¶„í• í•˜ê¸°"><a href="#13-ì„ì˜-ë¶„í• í•˜ê¸°" class="headerlink" title="(13) ì„ì˜ ë¶„í• í•˜ê¸°"></a>(13) ì„ì˜ ë¶„í• í•˜ê¸°</h4><details><summary class="point-color-can-hover">[5.4-13] ì˜ˆì œ í¼ì¹˜ê¸° </summary><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ì´í•©ì´ 1ì´ ì•„ë‹ ê²½ìš° ì„¤ì •ë˜ëŠ” default</span></span><br><span class="line"><span class="keyword">val</span> dataFrames = df.randomSplit(<span class="type">Array</span>(<span class="number">0.25</span>, <span class="number">0.75</span>), seed)</span><br><span class="line">dataFrames(<span class="number">0</span>).count() &gt; dataFrames(<span class="number">1</span>).count()</span><br><span class="line"><span class="comment">// res51: Boolean = false</span></span><br></pre></td></tr></table></figure></details><ul><li>ì„ì˜ ë¶„í•  (random split) : ì›ë³¸ DataFrame ì„ ì„ì˜ í¬ê¸°ë¡œ â€˜ë¶„í• â€™<ul><li>ë¨¸ì‹ ëŸ¬ë‹ ì•Œê³ ë¦¬ì¦˜ ì‚¬ìš© ì‹œ í•™ìŠµì…‹, ê²€ì¦ì…‹, í…ŒìŠ¤íŠ¸ì…‹ ë§Œë“¤ë•Œ ì£¼ë¡œ ì‚¬ìš©</li></ul></li><li><code>randomSplit(ë¶„í•  ê°€ì¤‘ì¹˜ Array, seed)</code><ul><li>ì„ì˜ì„±(randomized) ì„ ê°€ì§€ë¯€ë¡œ ì‹œë“œê°’(seed) í•„ìˆ˜</li><li>DataFrame ë¹„ìœ¨ì€ ì´í•©ì´ 1ì´ ë˜ê²Œ ì§€ì • (ì•„ë‹ ê²½ìš° ì˜ˆì œ ë¹„ìœ¨ë¡œ ì§€ì •ë¨)</li></ul></li></ul><h4 id="14-ë¡œìš°-í•©ì¹˜ê¸°ì™€-ì¶”ê°€í•˜ê¸°"><a href="#14-ë¡œìš°-í•©ì¹˜ê¸°ì™€-ì¶”ê°€í•˜ê¸°" class="headerlink" title="(14) ë¡œìš° í•©ì¹˜ê¸°ì™€ ì¶”ê°€í•˜ê¸°"></a>(14) ë¡œìš° í•©ì¹˜ê¸°ì™€ ì¶”ê°€í•˜ê¸°</h4><details><summary class="point-color-can-hover">[5.4-14] ì˜ˆì œ í¼ì¹˜ê¸° </summary><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.spark.sql.<span class="type">Row</span></span><br><span class="line"><span class="keyword">val</span> schema = df.schema</span><br><span class="line"><span class="keyword">val</span> newRows = <span class="type">Seq</span>(</span><br><span class="line">  <span class="type">Row</span>(<span class="string">&quot;New Country&quot;</span>, <span class="string">&quot;Other Country&quot;</span>, <span class="number">5</span>L),</span><br><span class="line">  <span class="type">Row</span>(<span class="string">&quot;New Country 2&quot;</span>, <span class="string">&quot;Other Country 3&quot;</span>, <span class="number">1</span>L)</span><br><span class="line">)</span><br><span class="line"><span class="keyword">val</span> parallelizedRows = spark.sparkContext.parallelize(newRows)</span><br><span class="line"><span class="keyword">val</span> newDF = spark.createDataFrame(parallelizedRows, schema)</span><br><span class="line"></span><br><span class="line"><span class="comment">// df + newDF =&gt; ë¡œìš°ê°€ ì¶”ê°€ëœ ìƒˆë¡œìš´ ê°ì²´</span></span><br><span class="line">(df.union(newDF)</span><br><span class="line">  .where(<span class="string">&quot;count = 1&quot;</span>)</span><br><span class="line">  .where($<span class="string">&quot;ORIGIN_COUNTRY_NAME&quot;</span> =!= <span class="string">&quot;United States&quot;</span>)</span><br><span class="line">  .show()) <span class="comment">// get all of them and we&#x27;ll see our new rows at the end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// schema: org.apache.spark.sql.types.StructType = StructType(StructField(DEST_COUNTRY_NAME,StringType,true), StructField(ORIGIN_COUNTRY_NAME,StringType,true), StructField(count,LongType,true))</span></span><br><span class="line"><span class="comment">// newRows: Seq[org.apache.spark.sql.Row] = List([New Country,Other Country,5], [New Country 2,Other Country 3,1])</span></span><br><span class="line"><span class="comment">// parallelizedRows: org.apache.spark.rdd.RDD[org.apache.spark.sql.Row] = ParallelCollectionRDD[74] at parallelize at &lt;console&gt;:29</span></span><br><span class="line"><span class="comment">// newDF: org.apache.spark.sql.DataFrame = [DEST_COUNTRY_NAME: string, ORIGIN_COUNTRY_NAME: string ... 1 more field]</span></span><br><span class="line"><span class="comment">// +-----------------+-------------------+-----+</span></span><br><span class="line"><span class="comment">// |DEST_COUNTRY_NAME|ORIGIN_COUNTRY_NAME|count|</span></span><br><span class="line"><span class="comment">// +-----------------+-------------------+-----+</span></span><br><span class="line"><span class="comment">// |    United States|            Croatia|    1|</span></span><br><span class="line"><span class="comment">// |    United States|          Singapore|    1|</span></span><br><span class="line"><span class="comment">// |    United States|          Gibraltar|    1|</span></span><br><span class="line"><span class="comment">// |    United States|             Cyprus|    1|</span></span><br><span class="line"><span class="comment">// |    United States|            Estonia|    1|</span></span><br><span class="line"><span class="comment">// |    United States|          Lithuania|    1|</span></span><br><span class="line"><span class="comment">// |    United States|           Bulgaria|    1|</span></span><br><span class="line"><span class="comment">// |    United States|            Georgia|    1|</span></span><br><span class="line"><span class="comment">// |    United States|            Bahrain|    1|</span></span><br><span class="line"><span class="comment">// |    United States|   Papua New Guinea|    1|</span></span><br><span class="line"><span class="comment">// |    United States|         Montenegro|    1|</span></span><br><span class="line"><span class="comment">// |    United States|            Namibia|    1|</span></span><br><span class="line"><span class="comment">// |    New Country 2|    Other Country 3|    1|</span></span><br><span class="line"><span class="comment">// +-----------------+-------------------+-----+</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></details><ul><li>DataFrameì€ ë¶ˆë³€ì„± (immutability)<ul><li>DataFrameì„ ë³€ê²½í•˜ëŠ” ë ˆì½”ë“œ ì¶”ê°€ëŠ” ë¶ˆê°€ëŠ¥</li><li>=&gt; ì›ë³¸ DataFrameì„ ìƒˆë¡œìš´ DataFrameê³¼ <strong>í†µí•©(union)</strong> (ê²°í•©)</li><li>ë‹¨, í†µí•©í•˜ë ¤ëŠ” ë‘ DataFrameì€ ë°˜ë“œì‹œ ë™ì¼í•œ ìŠ¤í‚¤ë§ˆì™€ ì»¬ëŸ¼ ìˆ˜ë¥¼ ê°€ì ¸ì•¼ í•¨</li></ul></li><li><code>union()</code><ul><li>í˜„ì¬ ìŠ¤í‚¤ë§ˆê°€ ì•„ë‹Œ ì»¬ëŸ¼ ìœ„ì¹˜ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘ (ìë™ ì •ë ¬ X)</li><li>ë¡œìš°ê°€ ì¶”ê°€ëœ DataFrame ì„ ì°¸ì¡°í•˜ë ¤ë©´ ìƒˆë¡­ê²Œ ë§Œë“¤ì–´ì§„ DataFrame ì‚¬ìš©í•´ì•¼í•˜ì§€ë§Œ, <u>ë·°ë‚˜ í…Œì´ë¸”ë¡œ ë“±ë¡ ì‹œì—ëŠ” ë™ì ìœ¼ë¡œ ì°¸ì¡° ê°€ëŠ¥</u></li></ul></li><li>ì»¬ëŸ¼ í‘œí˜„ì‹ê³¼ ë¬¸ì ë¹„êµì—´ ë¹„êµ ì‹œ<ul><li>(ì»¬ëŸ¼ í‘œí˜„ì‹ì´ ì•„ë‹Œ) ì»¬ëŸ¼ì˜ ì‹¤ì œê°’ì„ ë¹„êµ ëŒ€ìƒ ë¬¸ìì—´ê³¼ ë¹„êµí•˜ë ¤ë©´</li><li>ìŠ¤ì¹¼ë¼ ì‚¬ìš© ì‹œ ë°˜ë“œì‹œ <strong><code>=!=</code> í•¨ìˆ˜</strong> ì‚¬ìš©<ul><li><code>=!=</code>, <code>===</code> ëŠ” ìŠ¤íŒŒí¬ì˜ Column í´ë˜ìŠ¤ì— ì •ì˜ëœ í•¨ìˆ˜</li></ul></li><li>íŒŒì´ì¬ì€ ê·¸ëŒ€ë¡œ <code>!=</code>, <code>==</code></li></ul></li></ul><h4 id="15-ë¡œìš°-ì •ë ¬í•˜ê¸°"><a href="#15-ë¡œìš°-ì •ë ¬í•˜ê¸°" class="headerlink" title="(15) ë¡œìš° ì •ë ¬í•˜ê¸°"></a>(15) ë¡œìš° ì •ë ¬í•˜ê¸°</h4><details><summary class="point-color-can-hover">[5.4-15] ì˜ˆì œ í¼ì¹˜ê¸° </summary><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">df.sort(<span class="string">&quot;count&quot;</span>).show(<span class="number">5</span>)</span><br><span class="line">df.orderBy(<span class="string">&quot;count&quot;</span>, <span class="string">&quot;DEST_COUNTRY_NAME&quot;</span>).show(<span class="number">5</span>)</span><br><span class="line">df.orderBy(col(<span class="string">&quot;count&quot;</span>), col(<span class="string">&quot;DEST_COUNTRY_NAME&quot;</span>)).show(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ì •ë ¬ ê¸°ì¤€ ì§€ì • (desc ì˜¤ë¦„)</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.functions.&#123;desc, asc&#125;</span><br><span class="line"></span><br><span class="line">df.orderBy(expr(<span class="string">&quot;count desc&quot;</span>)).show(<span class="number">2</span>)</span><br><span class="line"><span class="comment">// ì´ê±° ì™œ ë‚´ë¦¼ì°¨ìˆœì´ì•„ë‹ˆë¼ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ë‚˜ì˜¤ë‚˜... expr(&quot;count desc&quot;) ì„¤ì • ì•ˆë˜ê³  default ì •ë ¬ (asc)ë¡œ ì„¤ì •ë˜ì„œ ë‚˜ì˜¤ëŠ” ë“¯í•œë°..?</span></span><br><span class="line"><span class="comment">// +-----------------+-------------------+-----+</span></span><br><span class="line"><span class="comment">// |DEST_COUNTRY_NAME|ORIGIN_COUNTRY_NAME|count|</span></span><br><span class="line"><span class="comment">// +-----------------+-------------------+-----+</span></span><br><span class="line"><span class="comment">// |          Moldova|      United States|    1|</span></span><br><span class="line"><span class="comment">// |    United States|            Croatia|    1|</span></span><br><span class="line"><span class="comment">// +-----------------+-------------------+-----+</span></span><br><span class="line"></span><br><span class="line">df.orderBy(desc(<span class="string">&quot;count&quot;</span>), asc(<span class="string">&quot;DEST_COUNTRY_NAME&quot;</span>)).show(<span class="number">2</span>)</span><br><span class="line"><span class="comment">// +-----------------+-------------------+------+</span></span><br><span class="line"><span class="comment">// |DEST_COUNTRY_NAME|ORIGIN_COUNTRY_NAME| count|</span></span><br><span class="line"><span class="comment">// +-----------------+-------------------+------+</span></span><br><span class="line"><span class="comment">// |    United States|      United States|370002|</span></span><br><span class="line"><span class="comment">// |    United States|             Canada|  8483|</span></span><br><span class="line"><span class="comment">// +-----------------+-------------------+------+</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- SQL</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> dfTable <span class="keyword">ORDER</span> <span class="keyword">BY</span> count <span class="keyword">DESC</span>, DEST_COUNTRY_NAME <span class="keyword">ASC</span> LIMIT <span class="number">2</span></span><br></pre></td></tr></table></figure><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// sortWithinPartitions() ë¡œ íŒŒí‹°ì…˜ë³„ ì •ë ¬</span></span><br><span class="line">(spark.read.format(<span class="string">&quot;json&quot;</span>).load(<span class="string">&quot;/data/flight-data/json/*-summary.json&quot;</span>)</span><br><span class="line">  .sortWithinPartitions(<span class="string">&quot;count&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// explain() ì‹œ</span></span><br><span class="line"><span class="comment">// == Physical Plan ==</span></span><br><span class="line"><span class="comment">// *(1) Sort [count#450L ASC NULLS FIRST], false, 0</span></span><br><span class="line"><span class="comment">// +- *(1) FileScan json [DEST_COUNTRY_NAME#448,ORIGIN_COUNTRY_NAME#449,count#450L] Batched: false, Format: JSON, Location: InMemoryFileIndex[file:/data/flight-data/json/2015-summary.json, file:/data/flight-data/json/2012..., PartitionFilters: [], PushedFilters: [], ReadSchema: struct&lt;DEST_COUNTRY_NAME:string,ORIGIN_COUNTRY_NAME:string,count:bigint&gt;</span></span><br></pre></td></tr></table></figure></details><ul><li><code>sort()</code> <code>orderBy()</code> ì‚¬ìš©<ul><li>ë‘ ë©”ì„œë“œëŠ” ì™„ì „íˆ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë™ì‘ (<code>orderBy()</code> ë‚´ë¶€ì—ì„œ <code>sort()</code> ì‚¬ìš©)</li><li>ë‹¤ìˆ˜ ì»¬ëŸ¼ ì§€ì •, ì»¬ëŸ¼ í‘œí˜„ì‹, ë¬¸ìì—´ ì‚¬ìš© ê°€ëŠ¥</li><li>ì •ë ¬ ê¸°ì¤€ : <code>asc()</code>, <code>desc()</code> ë¡œ ëª…í™•í•œ ì§€ì • ê°€ëŠ¥ (ê¸°ë³¸ ë™ì‘ì€ ì˜¤ë¦„ì°¨ìˆœ)</li></ul></li><li>ì •ë ¬ëœ DataFrame ì˜ NULL ê°’ í‘œì‹œ ê¸°ì¤€<ul><li><code>asc_nulls_first</code>, <code>desc_nulls_first</code>, <code>asc_nulls_last</code>, <code>desc_nulls_last</code> ë¡œ ê¸°ì¤€ ì§€ì • ê°€ëŠ¥</li></ul></li><li>íŒŒí‹°ì…˜ ë³„ ì •ë ¬ =&gt; <code>sortWithinPartitions()</code><ul><li>íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ ì²˜ë¦¬ ì „ ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•¨</li><li>ë” ìì„¸í•œ íŠœë‹ê³¼ ìµœì í™” ë‚´ìš©ì€ 3ë¶€ì—ì„œ</li></ul></li></ul><blockquote><p><code>df.orderBy(expr(&quot;count desc&quot;))</code> ?</p><ul><li>count ì»¬ëŸ¼ì„ desc() (ë‚´ë¦¼ì°¨ìˆœ) ìœ¼ë¡œ ì •ë ¬ë˜ì•¼ ë§ë‚˜?<ul><li>ì‹¤ì œë¡œëŠ” ê·¸ë ‡ê²Œ ë™ì‘ í•˜ì§€ ì•ŠìŒ (=&gt; ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬ë¨)</li></ul></li><li>ì˜ëª»ëœ ì˜ˆì œì¸ë“¯í•œë°..<ul><li>ê´€ë ¨ stackoverflow ì§ˆë¬¸ <a href="https://stackoverflow.com/questions/63112281/pyspark-sort-dataframe-by-expression">ë§í¬ 1</a> / <a href="https://stackoverflow.com/questions/63373479/sorting-2-columns-in-opposite-direction-does-not-work-using-expr-function">ë§í¬ 2</a></li></ul></li></ul></blockquote><h4 id="16-ë¡œìš°-ìˆ˜-ì œí•œí•˜ê¸°"><a href="#16-ë¡œìš°-ìˆ˜-ì œí•œí•˜ê¸°" class="headerlink" title="(16) ë¡œìš° ìˆ˜ ì œí•œí•˜ê¸°"></a>(16) ë¡œìš° ìˆ˜ ì œí•œí•˜ê¸°</h4><details><summary class="point-color-can-hover">[5.4-16] ì˜ˆì œ í¼ì¹˜ê¸° </summary><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">df.limit(<span class="number">5</span>).show()</span><br><span class="line"></span><br><span class="line">df.orderBy(expr(<span class="string">&quot;count desc&quot;</span>)).limit(<span class="number">6</span>).show()</span><br><span class="line"><span class="comment">// +--------------------+-------------------+-----+</span></span><br><span class="line"><span class="comment">// |   DEST_COUNTRY_NAME|ORIGIN_COUNTRY_NAME|count|</span></span><br><span class="line"><span class="comment">// +--------------------+-------------------+-----+</span></span><br><span class="line"><span class="comment">// |               Malta|      United States|    1|</span></span><br><span class="line"><span class="comment">// |Saint Vincent and...|      United States|    1|</span></span><br><span class="line"><span class="comment">// |       United States|            Croatia|    1|</span></span><br><span class="line"><span class="comment">// |       United States|          Gibraltar|    1|</span></span><br><span class="line"><span class="comment">// |       United States|          Singapore|    1|</span></span><br><span class="line"><span class="comment">// |             Moldova|      United States|    1|</span></span><br><span class="line"><span class="comment">// +--------------------+-------------------+-----+</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// ë’·êµ¬ë¥´ê¸°í•˜ë©´ì„œ ë´ë„ ê²°ê³¼ê°€ ì´ë ‡ê²Œ ë‚˜ì™€ì•¼í• ê±°ê°™ì€ë°...</span></span><br><span class="line"><span class="comment">// df.orderBy(desc(&quot;count&quot;)).limit(6).show()</span></span><br><span class="line"><span class="comment">// +-----------------+-------------------+------+</span></span><br><span class="line"><span class="comment">// |DEST_COUNTRY_NAME|ORIGIN_COUNTRY_NAME| count|</span></span><br><span class="line"><span class="comment">// +-----------------+-------------------+------+</span></span><br><span class="line"><span class="comment">// |    United States|      United States|370002|</span></span><br><span class="line"><span class="comment">// |    United States|             Canada|  8483|</span></span><br><span class="line"><span class="comment">// |           Canada|      United States|  8399|</span></span><br><span class="line"><span class="comment">// |    United States|             Mexico|  7187|</span></span><br><span class="line"><span class="comment">// |           Mexico|      United States|  7140|</span></span><br><span class="line"><span class="comment">// |   United Kingdom|      United States|  2025|</span></span><br><span class="line"><span class="comment">// +-----------------+-------------------+------+</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- SQL</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> dfTable LIMIT <span class="number">6</span></span><br></pre></td></tr></table></figure></details><ul><li><code>limit(ë¡œìš° ìˆ˜)</code> ì‚¬ìš©<ul><li>ì¶”ì¶œí•  ë¡œìš° ìˆ˜ ì œí•œí•˜ì—¬ ì¶”ì¶œ</li></ul></li></ul><h4 id="17-repartitionê³¼-coalesce"><a href="#17-repartitionê³¼-coalesce" class="headerlink" title="(17) repartitionê³¼ coalesce"></a>(17) repartitionê³¼ coalesce</h4><details><summary class="point-color-can-hover">[5.4-17] ì˜ˆì œ í¼ì¹˜ê¸° </summary><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DataFrame í˜„ì¬ íŒŒí‹°ì…˜ ìˆ˜ êµ¬í•˜ê¸°</span></span><br><span class="line">df.rdd.getNumPartitions <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ì „ì²´ ë°ì´í„° ì…”í”Œ</span></span><br><span class="line">df.repartition(<span class="number">5</span>)</span><br><span class="line"><span class="comment">// df.repartition(5).rdd.getNumPartitions =&gt; 5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// íŠ¹ì • ì»¬ëŸ¼ ê¸°ì¤€ íŒŒí‹°ì…˜ ì¬ë¶„ë°°</span></span><br><span class="line">df.repartition(col(<span class="string">&quot;DEST_COUNTRY_NAME&quot;</span>))</span><br><span class="line"><span class="comment">// df.repartition(col(&quot;DEST_COUNTRY_NAME&quot;)).rdd.getNumPartition =&gt; 200</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// íŠ¹ì • ì»¬ëŸ¼ ì§€ì • + íŒŒí‹°ì…˜ ìˆ˜ ì§€ì •</span></span><br><span class="line">df.repartition(<span class="number">5</span>, col(<span class="string">&quot;DEST_COUNTRY_NAME&quot;</span>))</span><br><span class="line"><span class="comment">// df.repartition(5, col(&quot;DEST_COUNTRY_NAME&quot;)).rdd.getNumPartitions =&gt; 5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// coalesce() ë¡œ ì…”í”Œì—†ì´ íŒŒí‹°ì…˜ ë³‘í•© (1 -&gt; 5 -&gt; 2)</span></span><br><span class="line">df.repartition(<span class="number">5</span>, col(<span class="string">&quot;DEST_COUNTRY_NAME&quot;</span>)).coalesce(<span class="number">2</span>)</span><br><span class="line"><span class="comment">// df.repartition(5, col(&quot;DEST_COUNTRY_NAME&quot;)).coalesce(2).rdd.getNumPartitions =&gt; 2</span></span><br></pre></td></tr></table></figure></details><ul><li>ë˜ ë‹¤ë¥¸ ìµœì í™” ê¸°ë²•? =&gt; ìì£¼ í•„í„°ë§í•˜ëŠ” ì»¬ëŸ¼ ê¸°ì¤€ìœ¼ë¡œ ë°ì´í„° ë¶„í• <ul><li>íŒŒí‹°ì…”ë‹ ìŠ¤í‚¤ë§ˆì™€ íŒŒí‹°ì…˜ ìˆ˜ë¥¼ í¬í•¨í•œ í´ëŸ¬ìŠ¤í„° ì „ë°˜ì˜ ë¬¼ë¦¬ì  ë°ì´í„° êµ¬ì„± ì œì–´ ê°€ëŠ¥</li></ul></li><li><code>repartition()</code> : ì „ì²´ ë°ì´í„° ì…”í”Œ<ul><li>í–¥í›„ ì‚¬ìš©í•  íŒŒí‹°ì…˜ ìˆ˜ &gt; í˜„ì¬ íŒŒí‹°ì…˜ ìˆ˜ ì¸ ê²½ìš° ì‚¬ìš© (íŒŒí‹°ì…˜ ìˆ˜ â†‘)</li><li>ì»¬ëŸ¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒí‹°ì…˜ì„ ë§Œë“œëŠ” ê²½ìš° ì‚¬ìš©<ul><li>ìì£¼ í•„í„°ë§ë˜ëŠ” ì»¬ëŸ¼ì´ ìˆë‹¤ë©´ í•´ë‹¹ ì»¬ëŸ¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒí‹°ì…˜ ì¬ë¶„ë°° ì¶”ì²œ</li></ul></li><li>ì„ íƒì ìœ¼ë¡œ íŒŒí‹°ì…˜ ìˆ˜ ì§€ì • ê°€ëŠ¥</li></ul></li><li><code>coalesce()</code> : ì „ì²´ ë°ì´í„° ì…”í”Œ ì—†ì´ íŒŒí‹°ì…˜ ë³‘í•©<ul><li><strong>íŒŒí‹°ì…˜ ìˆ˜ë¥¼ ì¤„ì´ë ¤ë©´</strong> coalesce ì‚¬ìš© (<del>repartition</del> X)</li></ul></li><li>DataFrame íŒŒí‹°ì…˜ ìˆ˜ í™•ì¸ì€ <code>df.rdd.getNumPartitions</code> ë¡œ í™•ì¸</li></ul><h4 id="18-ë“œë¼ì´ë²„ë¡œ-ë¡œìš°-ë°ì´í„°-ìˆ˜ì§‘í•˜ê¸°"><a href="#18-ë“œë¼ì´ë²„ë¡œ-ë¡œìš°-ë°ì´í„°-ìˆ˜ì§‘í•˜ê¸°" class="headerlink" title="(18) ë“œë¼ì´ë²„ë¡œ ë¡œìš° ë°ì´í„° ìˆ˜ì§‘í•˜ê¸°"></a>(18) ë“œë¼ì´ë²„ë¡œ ë¡œìš° ë°ì´í„° ìˆ˜ì§‘í•˜ê¸°</h4><details><summary class="point-color-can-hover">[5.4-18] ì˜ˆì œ í¼ì¹˜ê¸° </summary></details><ul><li>ìŠ¤íŒŒí¬ëŠ” â€˜ë“œë¼ì´ë²„â€™ì—ì„œ í´ëŸ¬ìŠ¤í„° ìƒíƒœ ì •ë³´ ìœ ì§€<ul><li>ë¡œì»¬ í™˜ê²½ì—ì„œ ë°ì´í„° ë‹¤ë£° ë•ŒëŠ” â€˜ë“œë¼ì´ë²„â€™ë¡œ ë°ì´í„° ìˆ˜ì§‘</li></ul></li><li>ì‚¬ìš©í•´ë³¸ ë°ì´í„° ìˆ˜ì§‘ ë©”ì„œë“œ ì¼ë¶€<ul><li><code>collect()</code> : ì „ì²´ DataFrameì˜ ëª¨ë“  ë°ì´í„° ìˆ˜ì§‘</li><li><code>take()</code> : ìƒìœ„ Nê°œ ë¡œìš° ë°˜í™˜</li><li><code>show()</code> : ì—¬ëŸ¬ ë¡œìš°ë¥¼ ë³´ê¸° ì¢‹ê²Œ ì¶œë ¥</li></ul></li><li><code>toLocalIterator()</code> : ì „ì²´ ë°ì´í„°ì…‹ì— ëŒ€í•œ ë°˜ë³µ(iterate) ì²˜ë¦¬ë¥¼ ìœ„í•´ â€˜ë“œë¼ì´ë²„â€™ë¡œ ë¡œìš°ë¥¼ ëª¨ìœ¼ëŠ” ë°©ë²•<ul><li>iterator(ë°˜ë³µì) ë¡œ ëª¨ë“  íŒŒí‹°ì…˜ì˜ ë°ì´í„°ë¥¼ â€˜ë“œë¼ì´ë²„â€™ì— ì „ë‹¬</li><li>ë°ì´í„°ì…‹ì˜ íŒŒí‹°ì…˜ì„ ì°¨ë¡€ëŒ€ë¡œ ë°˜ë³µ ì²˜ë¦¬ ê°€ëŠ¥</li></ul></li><li>ë“œë¼ì´ë²„ë¡œ ëª¨ë“  ë°ì´í„° ì»¬ë ‰ì…˜ì„ ìˆ˜ì§‘í•˜ëŠ” ê±´<ul><li>=&gt; <strong>ë§¤ìš° í° ë¹„ìš©</strong> (CPU, ë©”ëª¨ë¦¬, ë„¤íŠ¸ì›Œí¬)</li><li>ì°¨ë¡€ëŒ€ë¡œ ì²˜ë¦¬í•˜ë¯€ë¡œ ì²˜ë¦¬ ë¹„ìš© ì—„ì²­ë‚¨ (ë³‘ë ¬ ì—°ì‚° X)</li></ul></li><li>ë”°ë¼ì„œ ëŒ€ê·œëª¨ ë°ì´í„°ì…‹ì— <code>collect()</code> ë‚˜ ë§¤ìš° í° íŒŒí‹°ì…˜ì— ëŒ€í•´ <code>toLocalIterator()</code> ì‚¬ìš© ì‹œ =&gt; ë“œë¼ì´ë²„ ë¹„ì •ìƒì  ì¢…ë£Œ</li></ul><h3 id="5-5-ì •ë¦¬"><a href="#5-5-ì •ë¦¬" class="headerlink" title="5.5 ì •ë¦¬"></a>5.5 ì •ë¦¬</h3><ul><li>DataFrame ê¸°ë³¸ ì—°ì‚°</li><li>DataFrame ì‚¬ìš©ì— í•„ìš”í•œ ê°œë…, ë‹¤ì–‘í•œ ê¸°ëŠ¥</li></ul><h3 id="ğŸ“’-ë‹¨ì–´ì¥"><a href="#ğŸ“’-ë‹¨ì–´ì¥" class="headerlink" title="ğŸ“’ ë‹¨ì–´ì¥"></a>ğŸ“’ ë‹¨ì–´ì¥</h3><ul><li>ë¹„ê²°ì •ë¡ ì (nondeterministically) : = ë§¤ë²ˆ ë³€í•˜ëŠ”</li><li>ETL : <code>ì¶”ì¶œ(Extract)</code> - <code>ë³€í™˜(Transform)</code> - <code>ì ì¬(Load)</code>  <i style="color:lightgray">(ì¹œìˆ™í•˜ì¥¬?)</i></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;br/&gt;

&lt;p&gt;ì˜¤ëŠ˜ì˜ êµí›ˆ.&lt;br&gt;ë„ì»¤ ì´ë¯¸ì§€ì— ì˜ˆì œ ìˆë‹¤ê³  ì‹ ë‚˜ê²Œ ëŒë¦¬ê³ ~ ëŒë¦¬ê³ ~ í•˜ë‹¤ë³´ë©´&lt;br&gt;í„°ì§„ë‹¤ëŠ”ê±¸ ëª…ì‹¬í•˜ë„ë¡ í•˜ì ğŸ¥º&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter</summary>
      
    
    
    
    <category term="spark" scheme="https://minsw.github.io/categories/spark/"/>
    
    
    <category term="study" scheme="https://minsw.github.io/tags/study/"/>
    
    <category term="book" scheme="https://minsw.github.io/tags/book/"/>
    
    <category term="spark" scheme="https://minsw.github.io/tags/spark/"/>
    
    <category term="apache" scheme="https://minsw.github.io/tags/apache/"/>
    
  </entry>
  
  <entry>
    <title>&amp;#039;Spark The Definitive Guide&amp;#039; 4ì¥ - ëˆˆ ë– , êµ¬ì¡°ì  API ë“¤ì–´ê°„ë‹¤</title>
    <link href="https://minsw.github.io/2021/01/26/Spark-The-Definitive-Guide-4%EC%9E%A5/"/>
    <id>https://minsw.github.io/2021/01/26/Spark-The-Definitive-Guide-4%EC%9E%A5/</id>
    <published>2021-01-25T17:24:59.000Z</published>
    <updated>2021-01-25T20:16:39.181Z</updated>
    
    <content type="html"><![CDATA[<br/><h4 id="ğŸ“Œ-Part-2-êµ¬ì¡°ì -API-DataFrame-SQL-Dataset"><a href="#ğŸ“Œ-Part-2-êµ¬ì¡°ì -API-DataFrame-SQL-Dataset" class="headerlink" title="ğŸ“Œ [Part 2] êµ¬ì¡°ì  API : DataFrame, SQL, Dataset"></a>ğŸ“Œ [Part 2] êµ¬ì¡°ì  API : DataFrame, SQL, Dataset</h4><h4 id="ë“¤ì–´ê°€ê¸°ì „-ìŠ¤íŒŒí¬-ê¸°ë³¸-ê°œë…-ì‚´ì§-ë³µìŠµ-ğŸ‘€"><a href="#ë“¤ì–´ê°€ê¸°ì „-ìŠ¤íŒŒí¬-ê¸°ë³¸-ê°œë…-ì‚´ì§-ë³µìŠµ-ğŸ‘€" class="headerlink" title="ë“¤ì–´ê°€ê¸°ì „, ìŠ¤íŒŒí¬ ê¸°ë³¸ ê°œë… ì‚´ì§ ë³µìŠµ ğŸ‘€"></a>ë“¤ì–´ê°€ê¸°ì „, ìŠ¤íŒŒí¬ ê¸°ë³¸ ê°œë… ì‚´ì§ ë³µìŠµ ğŸ‘€</h4><blockquote><p>ìŠ¤íŒŒí¬ëŠ” <code>íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ì˜ ì²˜ë¦¬ ê³¼ì •ì„ ì •ì˜í•˜ëŠ” ë¶„ì‚° í”„ë¡œê·¸ë˜ë° ëª¨ë¸</code>.</p><p>(ì‚¬ìš©ìê°€ ì •ì˜í•œ) ë‹¤ìˆ˜ì˜ <strong>íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜</strong>ì€ â†’ <strong>DAG</strong> (ì§€í–¥ì„± ë¹„ìˆœí™˜ ê·¸ë˜í”„) ë¡œ í‘œí˜„ë˜ëŠ” ëª…ë ¹ì„ ë§Œë“¤ê³ <br><strong>ì•¡ì…˜</strong>ì€ í•˜ë‚˜ì˜ ì¡ì„ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‹¤í–‰í•˜ê¸° ìœ„í•´ â†’ ìŠ¤í…Œì´ì§€ì™€ íƒœìŠ¤í¬ë¡œ ë‚˜ëˆ„ê³  DAG ì²˜ë¦¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰</p><p>ì´ëŸ° íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ê³¼ ì•¡ì…˜ìœ¼ë¡œ ë‹¤ë£¨ëŠ” ë…¼ë¦¬ì  êµ¬ì¡°? =&gt; <strong><u>DataFrame, Dataset</u></strong></p></blockquote><img width="300" alt="start" src="https://user-images.githubusercontent.com/26691216/105742251-98dbed00-5f7e-11eb-98c3-96ff8f8679dc.gif"/><center><h2>_ _ _</h2></center><br/><hr><h1 id="Chapter-4-êµ¬ì¡°ì -API-ê°œìš”"><a href="#Chapter-4-êµ¬ì¡°ì -API-ê°œìš”" class="headerlink" title="Chapter 4 êµ¬ì¡°ì  API ê°œìš”"></a>Chapter 4 êµ¬ì¡°ì  API ê°œìš”</h1><p>ë°˜ë“œì‹œ ì´í•´í•´ì•¼ (í•œë‹¤ê³ ) í•˜ëŠ” ì•„ë˜ ì„¸ ê°€ì§€ ê¸°ë³¸ê°œë…ì„ ì„¤ëª…í•œë‹¤.</p><ul><li><code>íƒ€ì…í˜•(typed)</code> / <code>ë¹„íƒ€ì…í˜•(untyped)</code> API ê°œë…ê³¼ ì°¨ì´ì </li><li>í•µì‹¬ ìš©ì–´</li><li>ìŠ¤íŒŒí¬ê°€ êµ¬ì¡°ì  APIì˜ ë°ì´í„° íë¦„ì„ í•´ì„í•˜ê³  í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‹¤í–‰í•˜ëŠ” ë°©ì‹</li></ul><h3 id="êµ¬ì¡°ì -API-ì˜-íŠ¹ì§•"><a href="#êµ¬ì¡°ì -API-ì˜-íŠ¹ì§•" class="headerlink" title="êµ¬ì¡°ì  API ì˜ íŠ¹ì§•"></a>êµ¬ì¡°ì  API ì˜ íŠ¹ì§•</h3><ul><li>ë°ì´í„° íë¦„ì„ ì •ì˜í•˜ëŠ” ê¸°ë³¸ ì¶”ìƒí™” ê°œë…</li><li>ë‹¤ì–‘í•œ ìœ í˜•ì˜ ë°ì´í„° ì²˜ë¦¬ ê°€ëŠ¥<ul><li>ë¹„ì •í˜• ë¡œê·¸íŒŒì¼, ë°˜ì •í˜• CSV íŒŒì¼, ì •í˜•ì  Parquet (íŒŒ-ì¼€ì´) íŒŒì¼ ë“±</li></ul></li><li>ë°°ì¹˜(batch), ìŠ¤íŠ¸ë¦¬ë° (streaming) ì²˜ë¦¬ì—ì„œ ì‚¬ìš© ê°€ëŠ¥<ul><li>ë°°ì¹˜ ì‘ì—… &lt;-&gt; ìŠ¤íŠ¸ë¦¬ë° ì‘ì—… : ì‰½ê²Œ ë³€í™˜ ê°€ëŠ¥</li></ul></li><li>êµ¬ì¡°ì  API ì˜ ì„¸ ê°€ì§€ ë¶„ì‚° ì»¬ë ‰ì…˜ API<ul><li>Dataset</li><li>DataFrame</li><li>SQL í…Œì´ë¸”ê³¼ ë·°</li></ul></li></ul><h3 id="4-1-DataFrameê³¼-Dataset"><a href="#4-1-DataFrameê³¼-Dataset" class="headerlink" title="4.1 DataFrameê³¼ Dataset"></a>4.1 DataFrameê³¼ Dataset</h3><blockquote><p>DataFrame (ì½”ë“œ ì‚¬ìš©) == í…Œì´ë¸”/ë·° (SQL ì‚¬ìš©)</p></blockquote><ul><li>ìŠ¤íŒŒí¬ì˜ êµ¬ì¡°í™”ëœ ì»¬ë ‰ì…˜ ê°œë… : <a href="https://minsw.github.io/2021/01/24/Spark-The-Definitive-Guide-2%EC%9E%A5/#2-6-DataFrame">DataFrame [2.6]</a> / <a href="https://minsw.github.io/2021/01/24/Spark-The-Definitive-Guide-3%EC%9E%A5/#3-2-Dataset-%ED%83%80%EC%9E%85-%EC%95%88%EC%A0%95%EC%84%B1%EC%9D%84-%EC%A0%9C%EA%B3%B5%ED%95%98%EB%8A%94-%EA%B5%AC%EC%A1%B0%EC%A0%81-API">Dataset [3.2]</a></li><li>ê·¸ë˜ì„œ ì´ê²ƒë“¤ì´ ë­”ë°?<ul><li>ì˜ ì •ì˜ëœ ë¡œìš°(row), ì»¬ëŸ¼(column)ì„ ê°–ëŠ” ë¶„ì‚° í…Œì´ë¸” í˜•íƒœì˜ ì»¬ë ‰ì…˜<ul><li>ê° ì»¬ëŸ¼ì€ ë‹¤ë¥¸ ì»¬ëŸ¼ê³¼ ë™ì¼í•œ ìˆ˜ì˜ ë¡œìš°ë¥¼ ê°€ì§ (ê°’ ì—†ìŒì€ null)</li><li>ëª¨ë“  ë¡œìš°ëŠ” ê°™ì€ ë°ì´í„° íƒ€ì… ì •ë³´</li></ul></li><li>ì§€ì—° ì—°ì‚°ì˜ ì‹¤í–‰ ê³„íš<ul><li>ê²°ê³¼ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ ì–´ë–¤ ë°ì´í„°ì— ì–´ë–¤ ì—°ì‚°ì„ ì ìš©í•´ì•¼í•˜ëŠ”ì§€ ì •ì˜</li></ul></li><li>ë¶ˆë³€ì„± (Immutability)</li></ul></li></ul><h3 id="4-2-ìŠ¤í‚¤ë§ˆ"><a href="#4-2-ìŠ¤í‚¤ë§ˆ" class="headerlink" title="4.2 ìŠ¤í‚¤ë§ˆ"></a>4.2 ìŠ¤í‚¤ë§ˆ</h3><ul><li>ìŠ¤í‚¤ë§ˆ : DataFrameì˜ ì»¬ëŸ¼ëª…ê³¼ ë°ì´í„° íƒ€ì… ì •ì˜<ul><li>ì§ì ‘ ì •ì˜ or Schema-on-read (ë°ì´í„°ì†ŒìŠ¤ì—ì„œ ì–»ëŠ” ê²ƒ)</li><li>ì—¬ëŸ¬ ë°ì´í„° íƒ€ì…ìœ¼ë¡œ êµ¬ì„±</li></ul></li></ul><h3 id="4-3-ìŠ¤íŒŒí¬ì˜-êµ¬ì¡°ì -ë°ì´í„°-íƒ€ì…-ê°œìš”"><a href="#4-3-ìŠ¤íŒŒí¬ì˜-êµ¬ì¡°ì -ë°ì´í„°-íƒ€ì…-ê°œìš”" class="headerlink" title="4.3 ìŠ¤íŒŒí¬ì˜ êµ¬ì¡°ì  ë°ì´í„° íƒ€ì… ê°œìš”"></a>4.3 ìŠ¤íŒŒí¬ì˜ êµ¬ì¡°ì  ë°ì´í„° íƒ€ì… ê°œìš”</h3><ul><li><p>ìŠ¤íŒŒí¬ê°€ ì‚¬ìš©í•˜ëŠ” <strong>ì¹´íƒˆë¦¬ìŠ¤íŠ¸ (Catalyst)</strong> ì—”ì§„ </p><ul><li>ë‹¤ì–‘í•œ ì‹¤í–‰ ìµœì í™” ê¸°ëŠ¥ ì œê³µ</li><li>ì‹¤í–‰ ê³„íšê³¼ ì²˜ë¦¬ì— ì‚¬ìš©í•˜ëŠ” ìì²´ ë°ì´í„° íƒ€ì… ì •ë³´ë¥¼ ê°€ì§</li></ul></li><li><p>ìŠ¤íŒŒí¬ëŠ” ì‚¬ì‹¤ìƒ â€˜í”„ë¡œê·¸ë˜ë° ì–¸ì–´â€™</p><ul><li><p>ì—¬ëŸ¬ ì–¸ì–´ APIì™€ ì§ì ‘ ë§¤í•‘ (ê° ì–¸ì–´ì— ëŒ€í•œ ë§¤í•‘ í…Œì´ë¸”ì„ ê°€ì§)</p></li><li><p>íŒŒì´ì¬ì´ë‚˜ R ë¡œ êµ¬ì¡°ì  API ì‚¬ìš©í•´ë„ =&gt; ëŒ€ë¶€ë¶„ì˜ ì—°ì‚°ì€ <del>ê° ì–¸ì–´ì˜ ìì²´ ë°ì´í„° íƒ€ì…</del> ì´ ì•„ë‹Œ <strong>ìŠ¤íŒŒí¬ì˜ ë°ì´í„° íƒ€ì…</strong> ì‚¬ìš© (ì¹´íƒˆë¦¬ìŠ¤íŠ¸ ì—”ì§„ì—ì„œ ë³€í™˜)</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> df = spark.range(<span class="number">500</span>).toDF(<span class="string">&quot;number&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// scalaê°€ ì•„ë‹Œ &#x27;spark&#x27;ì˜ ë§ì…ˆ ì—°ì‚° ìˆ˜í–‰</span></span><br><span class="line">df.select(df.col(<span class="string">&quot;number&quot;</span>) + <span class="number">10</span>)</span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>ë¹„íƒ€ì…í˜•(untyped)</code> DataFrame vs <code>íƒ€ì…í˜•(typed)</code> Dataset</p><ul><li>DataFrame, Dataset ëª¨ë‘ ë°ì´í„° íƒ€ì…ì€ ì¡´ì¬</li><li>ê·¸ëŸ¬ë‚˜ ìŠ¤í‚¤ë§ˆì— ëª…ì‹œëœ ë°ì´í„° íƒ€ì… <strong>ì¼ì¹˜ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ì‹œì </strong> ì°¨ì´<ul><li><u>DataFrameì€ <strong>ëŸ°íƒ€ì„</strong>ì—</u> ì¼ì¹˜ ì—¬ë¶€ í™•ì¸ =&gt; <code>ë¹„íƒ€ì…í˜•(untyped)</code></li><li><u>Datasetì€ <strong>ì»´íŒŒì¼ íƒ€ì„</strong>ì—</u> ì¼ì¹˜ ì—¬ë¶€ í™•ì¸ =&gt; <code>íƒ€ì…í˜•(typed)</code></li></ul></li><li>DataFrame ì€ Row íƒ€ì… ì‚¬ìš©<ul><li><strong>Row íƒ€ì…</strong> : ìŠ¤íŒŒí¬ê°€ ì‚¬ìš©í•˜ëŠ” â€˜ì—°ì‚°ì— ìµœì í™”ëœ ì¸ë©”ëª¨ë¦¬ í¬ë©§â€™ ì˜ ë‚´ë¶€ì  í‘œí˜„ ë°©ì‹ =&gt; ì–¸ì–´ì™€ ë¬´ê´€í•œ ë™ì¼í•œ íš¨ê³¼/íš¨ìœ¨ì„±</li><li>ë§¤ìš° íš¨ìœ¨ì ì¸ ì—°ì‚° (vs Datasetì˜ JVM ë°ì´í„° íƒ€ì… : GC, ê°ì²´ ì´ˆê¸°í™” ë¶€í•˜ .. )</li></ul></li><li>Datasetì€ ì§€ì •ëœ ë°ì´í„° íƒ€ì…(T) ì‚¬ìš©<ul><li>ì—„ê²©í•œ ë°ì´í„° íƒ€ì… ê²€ì¦ =&gt; CHAPTER 11 ì°¸ê³ </li></ul></li></ul></li><li><p>ì»¬ëŸ¼ (column)</p><ul><li>ë‹¨ìˆœ ë°ì´í„° íƒ€ì… (ì •ìˆ˜í˜•, ë¬¸ìì—´), ë³µí•© ë°ì´í„° íƒ€ì… (ë°°ì—´, ë§µ), null ê°’ í‘œí˜„</li><li>ìŠ¤íŒŒí¬ëŠ” ë°ì´í„° íƒ€ì…ì˜ ëª¨ë“  ì •ë³´ë¥¼ ì¶”ì , ë‹¤ì–‘í•œ ì»¬ëŸ¼ ë³€í™˜ ë°©ë²• ì œê³µ</li><li>ìŠ¤íŒŒí¬ì˜ ì»¬ëŸ¼ == í…Œì´ë¸”ì˜ ì»¬ëŸ¼</li></ul></li><li><p>ë¡œìš° (row)</p><ul><li>ë°ì´í„° ë ˆì½”ë“œ (DataFrameì˜ ë ˆì½”ë“œëŠ” Row íƒ€ì…)</li><li>ë¡œìš°ëŠ” SQL, RDD, ë°ì´í„° ì†ŒìŠ¤ì—ì„œ ì–»ê±°ë‚˜ ì§ì ‘ ë§Œë“¤ê±°ë‚˜<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spark.range(<span class="number">2</span>).toDF().collect()</span><br><span class="line"><span class="comment">// res165: Array[org.apache.spark.sql.Row] = Array([0], [1])</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>ìŠ¤íŒŒí¬ì˜ <strong>ë°ì´í„° íƒ€ì…</strong></p><ul><li>ìŠ¤íŒŒí¬ëŠ” ì—¬ëŸ¬ê°€ì§€ ë‚´ë¶€ ë°ì´í„° íƒ€ì…ì„ ê°€ì§</li><li><code>p.116 ~ 118</code> [í‘œ 4-1 ~ 3] ìŠ¤íŒŒí¬ê°€ ì§€ì›í•˜ëŠ” ì–¸ì–´ë³„ ë§¤í•‘ ì •ë³´ (íŒŒì´ì¬/ìŠ¤ì¹¼ë¼/ìë°” ë°ì´í„° íƒ€ì… ë§¤í•‘)</li><li>ìµœì‹  ë°ì´í„° íƒ€ì…ì€ <a href="http://bit.ly/2EdflXW">ìŠ¤íŒŒí¬ ê³µì‹ ë¬¸ì„œ</a> ì°¸ê³ </li><li>ì˜ˆì‹œ) ì–¸ì–´ ë³„ ë°ì´í„° íƒ€ì… ì´ˆê¸°í™” ë° ì •ì˜ ë°©ë²•<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// scala</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.types._</span><br><span class="line"><span class="keyword">val</span> b = <span class="type">ByteType</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// java (Factory method)</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.types.DataTypes;</span><br><span class="line">ByteType x = DataTypes.ByteType;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python</span></span><br><span class="line"><span class="keyword">from</span> pyspark.sql.types <span class="keyword">import</span> *</span><br><span class="line">b = ByteType()</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="4-4-êµ¬ì¡°ì -APIì˜-ì‹¤í–‰-ê³¼ì •"><a href="#4-4-êµ¬ì¡°ì -APIì˜-ì‹¤í–‰-ê³¼ì •" class="headerlink" title="4.4 êµ¬ì¡°ì  APIì˜ ì‹¤í–‰ ê³¼ì •"></a>4.4 êµ¬ì¡°ì  APIì˜ ì‹¤í–‰ ê³¼ì •</h3><blockquote><p>êµ¬ì¡°ì  API ì¿¼ë¦¬ (ì‚¬ìš©ì ì½”ë“œ) â†’ ì‹¤ì œ ì‹¤í–‰ ì½”ë“œ ë³€í™˜ ê³¼ì •</p><ol><li>[ğŸ‘©ğŸ»â€ğŸ’»] DataFrame/Dataset/SQLì„ ì´ìš©í•´ ì½”ë“œ ì‘ì„±</li><li>[Spark âœ¨] ì½”ë“œ =&gt; <strong>ë…¼ë¦¬ì  ì‹¤í–‰ ê³„íš</strong> ìœ¼ë¡œ ë³€í™˜ (ì •ìƒì  ì½”ë“œì¼ ê²½ìš°)</li><li>[Spark âœ¨] ë…¼ë¦¬ì  ì‹¤í–‰ ê³„íš =&gt; <strong>ë¬¼ë¦¬ì  ì‹¤í–‰ ê³„íš</strong> ìœ¼ë¡œ ë³€í™˜. ì¶”ê°€ì ì¸ ìµœì í™” ê°€ëŠ¥í•œì§€ í™•ì¸</li><li>[Spark âœ¨] í´ëŸ¬ìŠ¤í„°ì—ì„œ <strong>ë¬¼ë¦¬ì  ì‹¤í–‰ ê³„íš (RDD ì²˜ë¦¬)</strong> ì‹¤í–‰</li></ol></blockquote><ul><li><p>ì¢€ ë” ê°€ê¹ê²Œ ì„¤ëª…í•˜ìë©´..</p><ul><li>[ë³¸ì¸] ì´ ìŠ¤íŒŒí¬ ì½”ë“œ ì‘ì„±í•˜ê³  console ì´ë‚˜ <code>spark-submit</code> ìœ¼ë¡œ ì‹¤í–‰</li><li>-&gt; [ì¹´íƒˆë¦¬ìŠ¤íŠ¸ ì˜µí‹°ë§ˆì´ì €] ê°€ ì½”ë“œë¥¼ ë°›ê³  ì‹¤ì œ ì‹¤í–‰ ê³„íš (ë¬¼ë¦¬ì ) ìƒì„±</li><li>-&gt; [ìŠ¤íŒŒí¬] ëŠ” ì½”ë“œ ì‹¤í–‰ &amp; ê²°ê³¼ ë°˜í™˜</li></ul></li><li><p>ë…¼ë¦¬ì  ì‹¤í–‰ ê³„íš</p>  <img width="700" alt="mermaid-1" src="https://user-images.githubusercontent.com/26691216/105745516-b494c280-5f81-11eb-972a-827a5936fe0f.png"/>  <details><summary style="color:lightgray"> theme (neutral) </summary>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A[&#x2F;ì½”ë“œ&#x2F;]-- 1_ --&gt;B[ê²€ì¦ ì „ ...]</span><br><span class="line">B-- 2_ Analzer --&gt;C[ê²€ì¦ëœ ...]</span><br><span class="line">C-- 3_ Optimizer --&gt;D[ìµœì í™”ëœ ë…¼ë¦¬ì  ì‹¤í–‰ ê³„íš]</span><br></pre></td></tr></table></figure>  </details><ol><li>ì‚¬ìš©ì ì½”ë“œ â†’ ê²€ì¦ ì „ ë…¼ë¦¬ì  ì‹¤í–‰ ê³„íš (unresolved logical plan)<ul><li>ì¶”ìƒì  íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ë§Œ í‘œí˜„ (ë“œë¼ì´ë²„, ìµìŠ¤íí„° ê³ ë ¤ X)</li><li>ì‚¬ìš©ìì˜ í‘œí˜„ì‹ì„ ìµœì í™”ëœ í‘œí˜„ìœ¼ë¡œ ë³€í™˜</li></ul></li><li>ë¶„ì„ê¸° (Analyzer) : <strong>ì¹´íƒˆë¡œê·¸</strong>, ëª¨ë“  í…Œì´ë¸” ì €ì¥ì†Œ, DataFrame ì •ë³´ =&gt; ì»¬ëŸ¼ê³¼ í…Œì´ë¸” ê²€ì¦</li><li>ë…¼ë¦¬ì  ìµœì í™” (Catalyst Optimizer) : ë…¼ë¦¬ì  ì‹¤í–‰ ê³„íšì„ ìµœì í™”í•˜ëŠ” ê·œì¹™ì˜ ëª¨ìŒ (predicate pushing down, ì„ íƒì ˆ êµ¬ë¬¸)</li></ol></li><li><p>ë¬¼ë¦¬ì  ì‹¤í–‰ ê³„íš</p>  <img width="700" alt="mermaid-2" src="https://user-images.githubusercontent.com/26691216/105745527-b8284980-5f81-11eb-8d36-554b97959946.png"/>  <details><summary style="color:lightgray"> theme (neutral) </summary>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A[ìµœì í™”ëœ ë…¼ë¦¬ì  ì‹¤í–‰ ê³„íš] --&gt; B[ë¬¼ë¦¬ì ]</span><br><span class="line">A --&gt; C[ì‹¤í–‰ê³„íšs]</span><br><span class="line">B --&gt; D&#123;ë¹„ìš© ëª¨ë¸ ë¹„êµ&#125;</span><br><span class="line">C --&gt; D</span><br><span class="line">D --&gt; E</span><br><span class="line">[ìµœì ì˜ ë¬¼ë¦¬ì  ì‹¤í–‰ ê³„íš]</span><br><span class="line">E --&gt; F&gt;í´ëŸ¬ìŠ¤í„°ì—ì„œ ì²˜ë¦¬]</span><br></pre></td></tr></table></figure>  </details><ul><li>(== ìŠ¤íŒŒí¬ì˜ ì‹¤í–‰ ê³„íš)</li><li>ë…¼ë¦¬ì  ì‹¤í–‰ ê³„íšì„ í´ëŸ¬ìŠ¤í„° í™˜ê²½ì—ì„œ ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì„ ì •ì˜</li><li>ë¹„ìš© ëª¨ë¸ ë¹„êµ í›„ ìµœì ì˜ ì „ëµ ì„ íƒ (ex. ì¡°ì¸ ì—°ì‚° ìˆ˜í–‰ ë¹„ìš© ê³„ì‚°)</li><li>=&gt; RDD, íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ìœ¼ë¡œ ë³€í™˜í•˜ê³  ì»´íŒŒì¼ (<em>ì´ë˜ì„œ ìŠ¤íŒŒí¬ë¥¼ â€˜ì»´íŒŒì¼ëŸ¬â€™ë¼ê³  ë¶€ë¥´ê¸°ë„</em>)</li></ul></li><li><p>ì‹¤í–‰</p><ul><li>ë¬¼ë¦¬ì  ì‹¤í–‰ ê³„íš ì„ ì • í›„ RDD (ì €ìˆ˜ì¤€ ì¸í„°í˜ì´ìŠ¤) ëŒ€ìƒìœ¼ë¡œ ëª¨ë“  ì½”ë“œ ì‹¤í–‰</li><li>ì¶”ê°€ ìµœì í™” ìˆ˜í–‰ : ëŸ°íƒ€ì„ì— ìë°” ë°”ì´íŠ¸ ì½”ë“œ ìƒì„± (=&gt; ì „ì²´ í…ŒìŠ¤í¬ë‚˜ ìŠ¤í…Œì´ì§€ ì œê±° ê°€ëŠ¥)</li><li>=&gt; ì²˜ë¦¬ ê²°ê³¼ ì‚¬ìš©ìì—ê²Œ ë°˜í™˜</li></ul></li></ul><h3 id="4-5-ì •ë¦¬"><a href="#4-5-ì •ë¦¬" class="headerlink" title="4.5 ì •ë¦¬"></a>4.5 ì •ë¦¬</h3><ul><li>Sparkì™€ êµ¬ì¡°ì  API</li><li>ì‚¬ìš©ì ì½”ë“œ -&gt; ë¬¼ë¦¬ì  ì‹¤í–‰ ì½”ë“œ ë³€í™˜ ê³¼ì •</li></ul><h3 id="ğŸ“’-ë‹¨ì–´ì¥"><a href="#ğŸ“’-ë‹¨ì–´ì¥" class="headerlink" title="ğŸ“’ ë‹¨ì–´ì¥"></a>ğŸ“’ ë‹¨ì–´ì¥</h3><ul><li>ì¹´íƒˆë¦¬ìŠ¤íŠ¸ ì—”ì§„ (Catalyst Optimizer) : DataFrame DSL, SQL ì„ í•˜ìœ„ ë ˆë²¨ì˜ RDD ì—°ì‚°ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” Optimizer<ul><li>ì±…ì—ì„œ ì–¸ê¸‰í•œ ì¹´íƒˆë¦¬ìŠ¤íŠ¸ ì—”ì§„ êµ¬í˜„ ì˜ìƒ - <a href="https://youtu.be/5ajs8EIPWGI">youtube1</a>, <a href="https://youtu.be/GDeePbbCz2g">youtube2</a></li><li>ref. <a href="https://thebook.io/006908/part02/ch05/05/">https://thebook.io/006908/part02/ch05/05/</a></li><li>ref. <a href="https://medium.com/@leeyh0216/spark-sql-6dc3d645cc31">https://medium.com/@leeyh0216/spark-sql-6dc3d645cc31</a></li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;br/&gt;

&lt;h4 id=&quot;ğŸ“Œ-Part-2-êµ¬ì¡°ì -API-DataFrame-SQL-Dataset&quot;&gt;&lt;a href=&quot;#ğŸ“Œ-Part-2-êµ¬ì¡°ì -API-DataFrame-SQL-Dataset&quot; class=&quot;headerlink&quot; title=&quot;ğŸ“Œ [Par</summary>
      
    
    
    
    <category term="spark" scheme="https://minsw.github.io/categories/spark/"/>
    
    
    <category term="study" scheme="https://minsw.github.io/tags/study/"/>
    
    <category term="book" scheme="https://minsw.github.io/tags/book/"/>
    
    <category term="spark" scheme="https://minsw.github.io/tags/spark/"/>
    
    <category term="apache" scheme="https://minsw.github.io/tags/apache/"/>
    
  </entry>
  
  <entry>
    <title>&amp;#039;Spark The Definitive Guide&amp;#039; 3ì¥ - ì¼ë‹¨ ì¢€ ë” ì¡ì†¨ë´ (PART 1 ë)</title>
    <link href="https://minsw.github.io/2021/01/24/Spark-The-Definitive-Guide-3%EC%9E%A5/"/>
    <id>https://minsw.github.io/2021/01/24/Spark-The-Definitive-Guide-3%EC%9E%A5/</id>
    <published>2021-01-24T14:13:51.000Z</published>
    <updated>2021-01-24T18:11:30.116Z</updated>
    
    <content type="html"><![CDATA[<br/><h4 id="Part-1-END"><a href="#Part-1-END" class="headerlink" title="[Part 1] END"></a>[Part 1] END</h4><p>íŒŒíŠ¸ 1 ê¹Œì§€ ëë‚´ê³  ë‚˜ë‹ˆ ì´ì œ ì¡°ê¸ˆì”© ìŠ¤íŒŒí¬ ë§›ì€ ë³¸ ê²ƒ ê°™ì€ë°,<br>ì´ë²ˆ ì¥ì€ <u>â€˜ì¼ë‹¨ ì¡ì†¨ë´â€™ ì‹ êµ¬ì„±</u> ì´ë¼ ì¢€ ë”°ë¼ê°€ê¸° í˜ë“¤ì—ˆë‹¤.</p><blockquote><p>ë‚˜ : ë­” ë§ì´ì—ìš”<br>?? : <em>â€˜XX ì¥ì—ì„œ ìì„¸íˆ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.â€™</em></p><p>?? : <em>ì´ë ‡ê²Œ A ì— Bë¥¼ ìˆ˜í–‰í•˜ë©´ Zê°€ ë‚˜ì˜µë‹ˆë‹¤</em><br>ë‚˜ : ì´ê±´ ë˜ ë­”ì†Œë¦¬ì—¬<br>?? : <em>â€˜ì´ì™€ ê´€ë ¨ëœ ë‚´ìš©ì€ XX ë¶€ì—ì„œ ìì„¸íˆ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.â€™</em></p></blockquote><p><img width="150" alt="angry" src="https://user-images.githubusercontent.com/26691216/105637781-85fbe680-5eb2-11eb-8956-b7de17f122de.png"></p><center><i style="color:lightgray">ì´toRLë“¤ì´..</i></center><p>ì˜ˆì œ ê¸°ì¤€ìœ¼ë¡œ ëª¨ë¥´ëŠ” ë¶€ë¶„ ì°¾ì•„ê°€ë©´ì„œ ì–´ì°Œ ì €ì°Œ ì´í•´ëŠ” í–ˆì§€ë§Œ<br>ê·¸ ë‹¤ìŒ íŒŒíŠ¸ê°€ ë‹¤ì‹œ ë˜ <code>êµ¬ì¡°ì  API</code>ë¼ì„œ ì˜¤ëŠ˜ ë³¸ ê±° ëŒ€ë¶€ë¶„ì€ í•œì°¸ ë’¤ì—ì•¼ ë‹¤ì‹œ ë³´ê²Œ ë í…ë°..<br>ì•„ ì´ê±° ë¬´ì¡°ê±´ì¸ë°.. ë°±í¼ ë‹¤ ê¹Œë¨¹ëŠ”ë°.. ğŸ¤¦ğŸ»â€â™€ï¸  </p><center><h2>_ _ _</h2></center><br/><hr><h1 id="CHAPTER-3-ìŠ¤íŒŒí¬-ê¸°ëŠ¥-ë‘˜ëŸ¬ë³´ê¸°"><a href="#CHAPTER-3-ìŠ¤íŒŒí¬-ê¸°ëŠ¥-ë‘˜ëŸ¬ë³´ê¸°" class="headerlink" title="CHAPTER 3 ìŠ¤íŒŒí¬ ê¸°ëŠ¥ ë‘˜ëŸ¬ë³´ê¸°"></a>CHAPTER 3 ìŠ¤íŒŒí¬ ê¸°ëŠ¥ ë‘˜ëŸ¬ë³´ê¸°</h1><blockquote><p>ìŠ¤íŒŒí¬ = ê¸°ë³¸ ìš”ì†Œ (ì €ìˆ˜ì¤€ API + êµ¬ì¡°ì  API) + ì¶”ê°€ ê¸°ëŠ¥ (ì¼ë ¨ì˜ í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬)</p><ul><li>êµ¬ì¡°ì  ìŠ¤íŠ¸ë¦¬ë°, ê³ ê¸‰ ë¶„ì„, ë¼ì´ë¸ŒëŸ¬ë¦¬ ë° ì—ì½”ì‹œìŠ¤í…œ</li><li>êµ¬ì¡°ì  API : Dataset, DataFrame, SQL</li><li>ì €ìˆ˜ì¤€ API : RDD, ë¶„ì‚°í˜• ë³€ìˆ˜</li></ul></blockquote><p>CHAPTER 2 ëŠ” êµ¬ì¡°ì  APIì˜ í•µì‹¬ê°œë…ì„ ì†Œê°œí–ˆë‹¤ë©´<br>CHAPTER 3 ì€ ë‚˜ë¨¸ì§€ API ì™€ ì£¼ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬, ìŠ¤íŒŒí¬ì˜ ë‹¤ì–‘í•œ ê¸°ëŠ¥ ì†Œê°œ</p><h3 id="3-1-ìš´ì˜ìš©-ì• í”Œë¦¬ì¼€ì´ì…˜-ì‹¤í–‰í•˜ê¸°"><a href="#3-1-ìš´ì˜ìš©-ì• í”Œë¦¬ì¼€ì´ì…˜-ì‹¤í–‰í•˜ê¸°" class="headerlink" title="3.1 ìš´ì˜ìš© ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰í•˜ê¸°"></a>3.1 ìš´ì˜ìš© ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰í•˜ê¸°</h3><details><summary class="point-color-can-hover">[3.1] ì˜ˆì œ í¼ì¹˜ê¸°</summary><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /spark-2.4.7-bin-hadoop2.7</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># scalar example</span></span><br><span class="line">$ ./bin/spark-submit --class org.apache.spark.examples.SparkPi --master <span class="built_in">local</span> ./examples/jars/spark-examples_2.11-2.4.7.jar 10</span><br><span class="line">...</span><br><span class="line">21/01/24 13:41:15 INFO DAGScheduler: Job 0 finished: reduce at SparkPi.scala:38, took 0.968079 s</span><br><span class="line">Pi is roughly 3.1414071414071416 <span class="comment"># ëŒë¦´ë•Œë§ˆë‹¤ ë‹¤ë¥´ê²Œ ë‚˜ì˜¨ë‹¤</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># python example</span></span><br><span class="line">$ ./bin/spark-submit --master <span class="built_in">local</span> ./examples/src/main/python/pi.py 10</span><br><span class="line">Pi is roughly 3.139084 <span class="comment"># ì´ëŸ´ê±°ë©´ args ëŠ” ëŒ€ì²´ ì™œ ë„£ìœ¼ë€ê±¸ê¹Œ</span></span><br></pre></td></tr></table></figure></details><ul><li><code>spark-submit</code> ëª…ë ¹<ul><li>ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œë¥¼ í´ëŸ¬ìŠ¤í„°ì— ì „ì†¡í•´ ì‹¤í–‰ì‹œí‚¤ëŠ” ì—­í• </li><li>ëŒ€í™”í˜• ì‰˜ì—ì„œ ê°œë°œí•œ í”„ë¡œê·¸ë¨ -&gt; ìš´ì˜ìš© ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì „í™˜ ê°€ëŠ¥</li><li>ìŠ¤íŒŒí¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ standalone, Mesos, YARN í´ëŸ¬ìŠ¤í„° ë§¤ë‹ˆì €ë¥¼ ì´ìš©í•´ ì‹¤í–‰ë¨ (<code>--master</code> ì˜µì…˜)</li></ul></li></ul><h3 id="3-2-Dataset-íƒ€ì…-ì•ˆì •ì„±ì„-ì œê³µí•˜ëŠ”-êµ¬ì¡°ì -API"><a href="#3-2-Dataset-íƒ€ì…-ì•ˆì •ì„±ì„-ì œê³µí•˜ëŠ”-êµ¬ì¡°ì -API" class="headerlink" title="3.2 Dataset : íƒ€ì… ì•ˆì •ì„±ì„ ì œê³µí•˜ëŠ” êµ¬ì¡°ì  API"></a>3.2 Dataset : íƒ€ì… ì•ˆì •ì„±ì„ ì œê³µí•˜ëŠ” êµ¬ì¡°ì  API</h3><details><summary class="point-color-can-hover">[3.2] ì˜ˆì œ í¼ì¹˜ê¸°</summary><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> spark.implicits._</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Flight</span>(<span class="params"><span class="type">DEST_COUNTRY_NAME</span>: <span class="type">String</span>,</span></span></span><br><span class="line"><span class="class"><span class="params">                  <span class="type">ORIGIN_COUNTRY_NAME</span>: <span class="type">String</span>,</span></span></span><br><span class="line"><span class="class"><span class="params">                  count: <span class="type">BigInt</span></span>)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">val</span> <span class="title">flightsDF</span> </span>= spark.read.parquet(<span class="string">&quot;/data/flight-data/parquet/2010-summary.parquet/&quot;</span>)</span><br><span class="line"><span class="keyword">val</span> flights = flightsDF.as[<span class="type">Flight</span>] <span class="comment">// DataFrame -&gt; Dataset[Flight]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(flights</span><br><span class="line">  .filter(flight_row =&gt; flight_row.<span class="type">ORIGIN_COUNTRY_NAME</span> != <span class="string">&quot;Canada&quot;</span>)</span><br><span class="line">  .map(flight_row =&gt; flight_row)</span><br><span class="line">  .take(<span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">(flights</span><br><span class="line">  .take(<span class="number">5</span>)</span><br><span class="line">  .filter(flight_row =&gt; flight_row.<span class="type">ORIGIN_COUNTRY_NAME</span> != <span class="string">&quot;Canada&quot;</span>)</span><br><span class="line">  .map(fr =&gt; <span class="type">Flight</span>(fr.<span class="type">DEST_COUNTRY_NAME</span>, fr.<span class="type">ORIGIN_COUNTRY_NAME</span>, fr.count + <span class="number">5</span>)))</span><br><span class="line"></span><br><span class="line"><span class="comment">// res45: Array[Flight] = Array(Flight(United States,Romania,1), Flight(United States,Ireland,264), Flight(United States,India,69), Flight(Egypt,United States,24), Flight(Equatorial Guinea,United States,1))</span></span><br><span class="line"><span class="comment">// res46: Array[Flight] = Array(Flight(United States,Romania,6), Flight(United States,Ireland,269), Flight(United States,India,74), Flight(Egypt,United States,29), Flight(Equatorial Guinea,United States,6))</span></span><br></pre></td></tr></table></figure></details><ul><li><strong>Dataset</strong> : Javaì™€ Scalaì˜ ì •ì  ë°ì´í„° íƒ€ì…ì— ë§ëŠ” ì½”ë“œ(statically typed code)ë¥¼ ì§€ì›í•˜ê¸° ìœ„í•œ ìŠ¤íŒŒí¬ì˜ êµ¬ì¡°ì  API<ul><li>Python, R ì‚¬ìš© X</li></ul></li><li>Dataset API ëŠ” <strong>DataFrame ë ˆì½”ë“œ =&gt; Javaë‚˜ Scalaë¡œ ì •ì˜í•œ í´ë˜ìŠ¤ì— í• ë‹¹</strong>, Collection ìœ¼ë¡œ ë‹¤ë£° ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ ë“±ì„ ì œê³µ<ul><li>DataFrame : ë‹¤ì–‘í•œ ë°ì´í„° íƒ€ì…ì˜ í…Œì´ë¸”í˜• ë°ì´í„°ë¥¼ ë³´ê´€í•  ìˆ˜ ìˆëŠ” Row íƒ€ì… ê°ì²´ë¡œ êµ¬ì„±ëœ ë¶„ì‚° ì»¬ë ‰ì…˜ (<a href="https://minsw.github.io/2021/01/24/Spark-The-Definitive-Guide-2%EC%9E%A5/#2-6-DataFrame">2ì¥ ì°¸ê³ </a>)</li><li><strong>íƒ€ì… ì•ˆì •ì„±ì„ ì§€ì›</strong> í•˜ë¯€ë¡œ ì´ˆê¸°í™”ì— ì‚¬ìš©í•œ í´ë˜ìŠ¤ ì™¸ ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•œ ì ‘ê·¼ì€ X</li><li>ì—¬ëŸ¬ ëª…ì´ ê°œë°œí•˜ê³  ì˜ ì •ì˜ëœ ì¸í„°í˜ì´ìŠ¤ë¡œ ìƒí˜¸ì‘ìš©í•˜ëŠ” ëŒ€ê·œëª¨ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì— ìœ ìš©<br><del>ì˜ ì •ì˜ëœ ì¸í„°í˜ì´ìŠ¤ ë¶€í„°ê°€ ì‹¤íŒ¨ë‹¤ ì´ë§ì´ì•¼</del></li></ul></li><li>Dataset í´ë˜ìŠ¤ (Java <code>Dataset&lt;T&gt;</code>, Scala <code>Dataset[T]</code>)<ul><li>ë‚´ë¶€ ê°ì²´ íƒ€ì…ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ì‚¬ìš© (T) =&gt; í•´ë‹¹ í´ë˜ìŠ¤ ê°ì²´ë§Œ ê°€ì§ˆ ìˆ˜ ìˆìŒ</li><li>ìŠ¤íŒŒí¬ 2.0 ì—ì„œëŠ” ìë°”ì˜ JavaBean íŒ¨í„´, ìŠ¤ì¹¼ë¼ì˜ ì¼€ì´ìŠ¤ í´ë˜ìŠ¤ ìœ í˜•ìœ¼ë¡œ ì •ì˜ëœ í´ë˜ìŠ¤ ì§€ì›</li><li>íƒ€ì… Të¥¼ ë¶„ì„í•´ì„œ Dataset ìŠ¤í‚¤ë§ˆë¥¼ ìƒì„±í•´ì•¼í•˜ë¯€ë¡œ íƒ€ì…ì„ ì œí•œí•  ìˆ˜ ë°–ì— ì—†ìŒ</li></ul></li><li>ì¥ì <ul><li>í•„ìš”í•œ ê²½ìš° ì„ íƒì ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥í•˜ê³ , map, filter ë“± í•¨ìˆ˜ ì‚¬ìš© ê°€ëŠ¥</li><li>ì½”ë“œ ë³€ê²½ ì—†ì´ íƒ€ì… ì•ˆì •ì„±ì„ ë³´ì¥í•  ìˆ˜ ìˆê³ , ì•ˆì „í•˜ê²Œ ë°ì´í„° ë‹¤ë£¨ê¸° ê°€ëŠ¥<ul><li><code>collect()</code> ë‚˜ <code>take()</code> í˜¸ì¶œ ì‹œ DataFrameì˜ row íƒ€ì… ê°ì²´ê°€ ì•„ë‹Œ Datasetì˜ ì§€ì •ëœ íƒ€ì…(T)ì˜ ê°ì²´ë¡œ ë°˜í™˜</li></ul></li></ul></li><li>Datasetì˜ ìì„¸í•œ ë‚´ìš©ì€ CHAPTER 11 ì—ì„œ ì´ì–´ì„œ</li></ul><h3 id="3-3-êµ¬ì¡°ì -ìŠ¤íŠ¸ë¦¬ë°"><a href="#3-3-êµ¬ì¡°ì -ìŠ¤íŠ¸ë¦¬ë°" class="headerlink" title="3.3 êµ¬ì¡°ì  ìŠ¤íŠ¸ë¦¬ë°"></a>3.3 êµ¬ì¡°ì  ìŠ¤íŠ¸ë¦¬ë°</h3><details><summary class="point-color-can-hover">[3.3] ì˜ˆì œ í¼ì¹˜ê¸° (ì •ì  DataFrame ë²„ì „) </summary><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ì •ì  DataFrame ë²„ì „</span></span><br><span class="line"><span class="keyword">val</span> staticDataFrame = (spark.read.format(<span class="string">&quot;csv&quot;</span>)</span><br><span class="line">  .option(<span class="string">&quot;header&quot;</span>, <span class="string">&quot;true&quot;</span>)</span><br><span class="line">  .option(<span class="string">&quot;inferSchema&quot;</span>, <span class="string">&quot;true&quot;</span>)</span><br><span class="line">  .load(<span class="string">&quot;/data/retail-data/by-day/*.csv&quot;</span>))</span><br><span class="line"></span><br><span class="line">staticDataFrame.createOrReplaceTempView(<span class="string">&quot;retail_data&quot;</span>)</span><br><span class="line"><span class="keyword">val</span> staticSchema = staticDataFrame.schema</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.functions.&#123;window, column, desc, col&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#x27;íŠ¹ì • ê³ ê°(CustomerId)ê°€ ëŒ€ëŸ‰ìœ¼ë¡œ êµ¬ë§¤í•˜ëŠ” ì˜ì—… ì‹œê°„&#x27; êµ¬í•˜ê¸°</span></span><br><span class="line">(staticDataFrame</span><br><span class="line">  .selectExpr(</span><br><span class="line">    <span class="string">&quot;CustomerId&quot;</span>,</span><br><span class="line">    <span class="string">&quot;(UnitPrice * Quantity) as total_cost&quot;</span>,</span><br><span class="line">    <span class="string">&quot;InvoiceDate&quot;</span>)</span><br><span class="line">  .groupBy(</span><br><span class="line">    col(<span class="string">&quot;CustomerId&quot;</span>), window(col(<span class="string">&quot;InvoiceDate&quot;</span>), <span class="string">&quot;1 day&quot;</span>)) <span class="comment">// ê´€ë ¨ ë‚ ì§œ ë°ì´í„° ê·¸ë£¹í™” &amp; ì§‘ê³„</span></span><br><span class="line">  .sum(<span class="string">&quot;total_cost&quot;</span>)</span><br><span class="line">  .show(<span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// +----------+--------------------+------------------+</span></span><br><span class="line"><span class="comment">// |CustomerId|              window|   sum(total_cost)|</span></span><br><span class="line"><span class="comment">// +----------+--------------------+------------------+</span></span><br><span class="line"><span class="comment">// |   14075.0|[2011-12-05 00:00...|316.78000000000003|</span></span><br><span class="line"><span class="comment">// |   18180.0|[2011-12-05 00:00...|            310.73|</span></span><br><span class="line"><span class="comment">// |   15358.0|[2011-12-05 00:00...| 830.0600000000003|</span></span><br><span class="line"><span class="comment">// |   15392.0|[2011-12-05 00:00...|304.40999999999997|</span></span><br><span class="line"><span class="comment">// |   15290.0|[2011-12-05 00:00...|263.02000000000004|</span></span><br><span class="line"><span class="comment">// +----------+--------------------+------------------+</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>ë¡œì»¬ ëª¨ë“œ ì‚¬ìš© ì‹œ ì…”í”Œ íŒŒí‹°ì…˜ ìˆ˜ (default 200) ì¤„ì´ê¸°ë¥¼ ê¶Œì¥. <code>spark.conf.set(&quot;spark.sql.shuffle.partitions&quot;, &quot;5&quot;)</code></p></blockquote></details><br/><details><summary class="point-color-can-hover">[3.3] ì˜ˆì œ í¼ì¹˜ê¸° (Streaming ë²„ì „) </summary><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Streaming ë²„ì „</span></span><br><span class="line"><span class="keyword">val</span> streamingDataFrame = (spark.readStream  <span class="comment">// read =&gt; readStream</span></span><br><span class="line">    .schema(staticSchema)</span><br><span class="line">    .option(<span class="string">&quot;maxFilesPerTrigger&quot;</span>, <span class="number">1</span>)  <span class="comment">// maxFilesPerTrigger (í•œë²ˆì— ì½ì„ íŒŒì¼ ìˆ˜ ì„¤ì •) =&gt; íŒŒì¼ë³„ë¡œ íŠ¸ë¦¬ê±° ìˆ˜í–‰</span></span><br><span class="line">    .format(<span class="string">&quot;csv&quot;</span>)</span><br><span class="line">    .option(<span class="string">&quot;header&quot;</span>, <span class="string">&quot;true&quot;</span>)</span><br><span class="line">    .load(<span class="string">&quot;/data/retail-data/by-day/*.csv&quot;</span>))</span><br><span class="line"></span><br><span class="line">streamingDataFrame.isStreaming <span class="comment">// returns true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> purchaseByCustomerPerHour = (streamingDataFrame</span><br><span class="line">  .selectExpr(</span><br><span class="line">    <span class="string">&quot;CustomerId&quot;</span>,</span><br><span class="line">    <span class="string">&quot;(UnitPrice * Quantity) as total_cost&quot;</span>,</span><br><span class="line">    <span class="string">&quot;InvoiceDate&quot;</span>)</span><br><span class="line">  .groupBy(</span><br><span class="line">    $<span class="string">&quot;CustomerId&quot;</span>, window($<span class="string">&quot;InvoiceDate&quot;</span>, <span class="string">&quot;1 day&quot;</span>))</span><br><span class="line">  .sum(<span class="string">&quot;total_cost&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1) ìŠ¤íŠ¸ë¦¼ ì‹œì‘ &amp; ì¸ë©”ëª¨ë¦¬ í…Œì´ë¸”ì— ì €ì¥</span></span><br><span class="line">(purchaseByCustomerPerHour.writeStream</span><br><span class="line">    .format(<span class="string">&quot;memory&quot;</span>) <span class="comment">// memory = ì¸ë©”ëª¨ë¦¬ í…Œì´ë¸”ì— ì €ì¥</span></span><br><span class="line">    .queryName(<span class="string">&quot;customer_purchases&quot;</span>) <span class="comment">// ì¸ë©”ëª¨ë¦¬ì— ì €ì¥ë  í…Œì´ë¸”ëª…</span></span><br><span class="line">    .outputMode(<span class="string">&quot;complete&quot;</span>) <span class="comment">// complete = ëª¨ë“  ì¹´ìš´íŠ¸ ìˆ˜í–‰ ê²°ê³¼ë¥¼ í…Œì´ë¸”ì— ì €ì¥</span></span><br><span class="line">    .start())</span><br><span class="line"></span><br><span class="line"><span class="comment">// ì¸ë©”ëª¨ë¦¬ í…Œì´ë¸” í™•ì¸ (ë°ì´í„°ë¥¼ ë§ì´ ì½ìœ¼ë©´ ì½ì„ìˆ˜ë¡ í…Œì´ë¸” êµ¬ì„±ì´ ë³€ê²½)</span></span><br><span class="line">(spark.sql(<span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">  SELECT *</span></span><br><span class="line"><span class="string">  FROM customer_purchases</span></span><br><span class="line"><span class="string">  ORDER BY `sum(total_cost)` DESC</span></span><br><span class="line"><span class="string">  &quot;</span><span class="string">&quot;&quot;</span>)</span><br><span class="line">  .show(<span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// +----------+--------------------+------------------+</span></span><br><span class="line"><span class="comment">// |CustomerId|              window|   sum(total_cost)|</span></span><br><span class="line"><span class="comment">// +----------+--------------------+------------------+</span></span><br><span class="line"><span class="comment">// |   17450.0|[2011-09-20 00:00...|          71601.44|</span></span><br><span class="line"><span class="comment">// |      null|[2011-11-14 00:00...|          55316.08|</span></span><br><span class="line"><span class="comment">// |      null|[2011-11-07 00:00...|          42939.17|</span></span><br><span class="line"><span class="comment">// |      null|[2011-03-29 00:00...| 33521.39999999998|</span></span><br><span class="line"><span class="comment">// |      null|[2011-12-08 00:00...|31975.590000000007|</span></span><br><span class="line"><span class="comment">// +----------+--------------------+------------------+</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2) ì²˜ë¦¬ê²°ê³¼ ì½˜ì†”ì— ì¶œë ¥</span></span><br><span class="line">(purchaseByCustomerPerHour.writeStream</span><br><span class="line">    .format(<span class="string">&quot;console&quot;</span>) <span class="comment">// console = ì½˜ì†”ì— ê²°ê³¼ ì¶œë ¥</span></span><br><span class="line">    .queryName(<span class="string">&quot;customer_purchases_2&quot;</span>)</span><br><span class="line">    .outputMode(<span class="string">&quot;complete&quot;</span>)</span><br><span class="line">    .start())</span><br><span class="line"></span><br></pre></td></tr></table></figure></details><ul><li><strong>êµ¬ì¡°ì  ìŠ¤íŠ¸ë¦¬ë°</strong> : ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ìš© ê³ ìˆ˜ì¤€ API<ul><li>êµ¬ì¡°ì  APIë¡œ ê°œë°œëœ ë°°ì¹˜ ëª¨ë“œ ì—°ì‚°ì„ <strong>ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ìœ¼ë¡œ</strong> ì‹¤í–‰ ê°€ëŠ¥í•˜ë©°, ì§€ì—° ì‹œê°„ì„ ì¤„ì´ê³  ì¦ë¶„ ì²˜ë¦¬ ê°€ëŠ¥</li><li>ì¦‰ ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬ë¡œ <u>ë¹ ë¥´ê²Œ ê°’ì„ ì–»ì„ ìˆ˜ ìˆê³ </u>, ëª¨ë“  ì‘ì—…ì—ì„œ ë°ì´í„°ë¥¼ <u>ì¦ë¶„ ì²˜ë¦¬</u>í•˜ë©´ì„œ ìˆ˜í–‰ëœë‹¤</li><li>ë°°ì¹˜ ì¡ìœ¼ë¡œ í”„ë¡œí† íƒ€ì… ê°œë°œ í›„ì— ìŠ¤íŠ¸ë¦¬ë° ì¡ìœ¼ë¡œ ë³€í™˜ë„ ê°€ëŠ¥</li><li>ìŠ¤íŒŒí¬ 2.2 ë²„ì „ë¶€í„° ì•ˆì •í™” (production-ready)</li></ul></li><li>ë°ì´í„°ë¥¼ ê·¸ë£¹í™”í•˜ê³  ì§‘ê³„í•˜ëŠ” ë°©ë²• (ì‹œê³„ì—´ time-series ë°ì´í„°  ì²˜ë¦¬)<ul><li><code>window()</code> : ì§‘ê³„ ì‹œì—, ì‹œê³„ì—´ ì»¬ëŸ¼ ê¸°ì¤€ìœ¼ë¡œ ê° ë‚ ì§œì— ëŒ€í•œ ì „ì²´ ë°ì´í„°ë¥¼ ê°€ì§€ëŠ” ìœˆë„ìš° êµ¬ì„± =&gt; ë‚ ì§œ, íƒ€ì„ìŠ¤íƒ¬í”„ ì²˜ë¦¬ì— ìœ ìš©</li></ul></li><li>ì •ì  DataFrame ì½”ë“œ vs ìŠ¤íŠ¸ë¦¬ë° ì½”ë“œ<ul><li><code>read</code> vs <code>readStream</code></li><li> ì¼ë°˜ì ì¸ ì •ì  ì•¡ì…˜ vs <strong>ìŠ¤íŠ¸ë¦¬ë° ì•¡ì…˜</strong></li><li>ìŠ¤íŠ¸ë¦¬ë° ì•¡ì…˜ì€ ì–´ë”˜ê°€ì— ë°ì´í„°ë¥¼ ì±„ì›Œë„£ì–´ì•¼í•¨. <strong>íŠ¸ë¦¬ê±°</strong>ê°€ ì‹¤í–‰ëœ í›„ ë°ì´í„°ë¥¼ ê°±ì‹ <ul><li>(ì¸ë©”ëª¨ë¦¬ í…Œì´ë¸”ì— ì €ì¥ ì‹œ - ìŠ¤íŒŒí¬ëŠ” ì´ì „ ì§‘ê³„ê°’ë³´ë‹¤ ë” í° ê°’ì´ ë°œìƒí•  ë•Œë§Œ ì¸ë©”ëª¨ë¦¬ í…Œì´ë¸” ê°±ì‹ )</li></ul></li></ul></li><li><a href="http://bit.ly/2PvOwCS">ì˜ˆì œ retail ë°ì´í„° ì…‹</a><ul><li>by-day í•˜ë£¨ ì¹˜ ë°ì´í„° ì‚¬ìš©</li><li>ì˜ˆì œëŠ” ì¸ë©”ëª¨ë¦¬ í…Œì´ë¸”ì— ì €ì¥ / íŒŒì¼ë§ˆë‹¤ íŠ¸ë¦¬ê±° ì‹¤í–‰</li><li>ì˜ˆì œì˜ ë‘ê°€ì§€ ë°©ì‹ (ë©”ëª¨ë¦¬/ì½˜ì†” ì¶œë ¥, íŒŒì¼ë³„ íŠ¸ë¦¬ê±° ìˆ˜í–‰)ì€ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ê¶Œì¥ X</li></ul></li><li>ë°ì´í„° ì²˜ë¦¬ ì‹œì ì´ ì•„ë‹Œ ì´ë²¤íŠ¸ ì‹œê°„ì— ë”°ë¼ ìœˆë„ìš°ë¥¼ êµ¬ì„±í•˜ëŠ” ë°©ì‹ì— ì£¼ëª©<ul><li>ê¸°ì¡´ ìŠ¤íŒŒí¬ ìŠ¤íŠ¸ë¦¬ë°ì˜ ë‹¨ì  =&gt; <strong>êµ¬ì¡°ì  ìŠ¤íŠ¸ë¦¬ë°ìœ¼ë¡œ ë³´ì™„</strong> ê°€ëŠ¥</li><li>ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ê³¼ì •ì˜ ìŠ¤í‚¤ë§ˆ ì¶”ë¡ ë°©ë²• ë° êµ¬ì¡°ì  ìŠ¤íŠ¸ë¦¬ë°ì€ CHAPTER 5 ì—ì„œ ìì„¸íˆ</li></ul></li></ul><h3 id="3-4-ë¨¸ì‹ ëŸ¬ë‹ê³¼-ê³ ê¸‰-ë¶„ì„"><a href="#3-4-ë¨¸ì‹ ëŸ¬ë‹ê³¼-ê³ ê¸‰-ë¶„ì„" class="headerlink" title="3.4 ë¨¸ì‹ ëŸ¬ë‹ê³¼ ê³ ê¸‰ ë¶„ì„"></a>3.4 ë¨¸ì‹ ëŸ¬ë‹ê³¼ ê³ ê¸‰ ë¶„ì„</h3><details><summary class="point-color-can-hover">[3.4] ì˜ˆì œ í¼ì¹˜ê¸° </summary><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># MLlib ë¨¸ì‹ ëŸ¬ë‹ ì•Œê³ ë¦¬ì¦˜ : ìˆ˜ì¹˜í˜• ë°ì´í„° í•„ìš”</span></span><br><span class="line"><span class="comment"># ì˜ˆì œì˜ (ì •ì ) ë°ì´í„° =&gt; ìˆ˜ì¹˜í˜•ìœ¼ë¡œ ë³€í™˜</span></span><br><span class="line"></span><br><span class="line">staticDataFrame.printSchema()</span><br><span class="line"></span><br><span class="line">root</span><br><span class="line"> |-- InvoiceNo: string (nullable = <span class="literal">true</span>)</span><br><span class="line"> |-- StockCode: string (nullable = <span class="literal">true</span>)</span><br><span class="line"> |-- Description: string (nullable = <span class="literal">true</span>)</span><br><span class="line"> |-- Quantity: <span class="built_in">integer</span> (nullable = <span class="literal">true</span>)</span><br><span class="line"> |-- InvoiceDate: timestamp (nullable = <span class="literal">true</span>)</span><br><span class="line"> |-- UnitPrice: double (nullable = <span class="literal">true</span>)</span><br><span class="line"> |-- CustomerID: double (nullable = <span class="literal">true</span>)</span><br><span class="line"> |-- Country: string (nullable = <span class="literal">true</span>)</span><br></pre></td></tr></table></figure><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.spark.sql.functions.date_format</span><br><span class="line"><span class="keyword">val</span> preppedDataFrame = (staticDataFrame</span><br><span class="line">  .na.fill(<span class="number">0</span>) <span class="comment">// 0ì¸ ê²½ìš° nullë¡œ ì±„ì›€</span></span><br><span class="line">  .withColumn(<span class="string">&quot;day_of_week&quot;</span>, date_format($<span class="string">&quot;InvoiceDate&quot;</span>, <span class="string">&quot;EEEE&quot;</span>)) <span class="comment">// Sunday, Monday, ..</span></span><br><span class="line">  .coalesce(<span class="number">5</span>)) <span class="comment">// íŒŒí‹°ì…˜ ê°œìˆ˜ ì¤„ì„ (default, shuffle = false)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// (1) ë°ì´í„° =&gt; í•™ìŠµ ë°ì´í„°ì…‹, í…ŒìŠ¤íŠ¸ ë°ì´í„°ì…‹ìœ¼ë¡œ ë¶„ë¦¬ (2011-07-01 ê¸°ì¤€)</span></span><br><span class="line"><span class="keyword">val</span> trainDataFrame = (preppedDataFrame</span><br><span class="line">  .where(<span class="string">&quot;InvoiceDate &lt; &#x27;2011-07-01&#x27;&quot;</span>))</span><br><span class="line"><span class="keyword">val</span> testDataFrame = (preppedDataFrame</span><br><span class="line">  .where(<span class="string">&quot;InvoiceDate &gt;= &#x27;2011-07-01&#x27;&quot;</span>))</span><br><span class="line"></span><br><span class="line">trainDataFrame.count()</span><br><span class="line"><span class="comment">// res110: Long = 245903</span></span><br><span class="line">testDataFrame.count()   </span><br><span class="line"><span class="comment">// res111: Long = 296006</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// (2-1) ìš”ì¼(Sunday, Monday,..)ì„ ìˆ˜ì¹˜í˜•(0,1, ..)ìœ¼ë¡œ ë°˜í™˜</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.ml.feature.<span class="type">StringIndexer</span></span><br><span class="line"><span class="keyword">val</span> indexer = (<span class="keyword">new</span> <span class="type">StringIndexer</span>()</span><br><span class="line">  .setInputCol(<span class="string">&quot;day_of_week&quot;</span>)</span><br><span class="line">  .setOutputCol(<span class="string">&quot;day_of_week_index&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// (2-2) ìˆ«ìë¡œ í‘œí˜„ëœ ë²”ì£¼í˜• ë°ì´í„° ì¸ì½”ë”© (í•´ë‹¹ ìš”ì¼ì¸ì§€ Boolean íƒ€ì…ìœ¼ë¡œ í™•ì¸ ê°€ëŠ¥)</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.ml.feature.<span class="type">OneHotEncoder</span></span><br><span class="line"><span class="keyword">val</span> encoder = (<span class="keyword">new</span> <span class="type">OneHotEncoder</span>()</span><br><span class="line">  .setInputCol(<span class="string">&quot;day_of_week_index&quot;</span>)</span><br><span class="line">  .setOutputCol(<span class="string">&quot;day_of_week_encoded&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// (2-3) ìˆ˜ì¹˜í˜• ë²¡í„° íƒ€ì…ì„ ì…ë ¥ìœ¼ë¡œ ì‚¬ìš© (ê°€ê²©, ìˆ˜ëŸ‰, íŠ¹ì • ë‚ ì§œì˜ ìš”ì¼)</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.ml.feature.<span class="type">VectorAssembler</span></span><br><span class="line"><span class="keyword">val</span> vectorAssembler = (<span class="keyword">new</span> <span class="type">VectorAssembler</span>()</span><br><span class="line">  .setInputCols(<span class="type">Array</span>(<span class="string">&quot;UnitPrice&quot;</span>, <span class="string">&quot;Quantity&quot;</span>, <span class="string">&quot;day_of_week_encoded&quot;</span>))</span><br><span class="line">  .setOutputCol(<span class="string">&quot;features&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// (3) íŒŒì´í”„ë¼ì¸ ì„¤ì •</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.ml.<span class="type">Pipeline</span></span><br><span class="line"><span class="keyword">val</span> transformationPipeline = (<span class="keyword">new</span> <span class="type">Pipeline</span>()</span><br><span class="line">  .setStages(<span class="type">Array</span>(indexer, encoder, vectorAssembler)))</span><br><span class="line"></span><br><span class="line"><span class="comment">// (4) ë³€í™˜ì(transformer) ë¥¼ ë°ì´í„°ì…‹ì— ì í•©(fit) =&gt; &#x27;fitted pipeline&#x27;</span></span><br><span class="line"><span class="comment">// ì¼ê´€ë˜ê³  ë°˜ë³µëœ ë°©ì‹ìœ¼ë¡œ ë°ì´í„° ë³€í™˜ ê°€ëŠ¥. í•™ìŠµ ë°ì´í„°ì…‹ ìƒì„± ì™„ë£Œ</span></span><br><span class="line"><span class="keyword">val</span> fittedPipeline = transformationPipeline.fit(trainDataFrame)</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> transformedTraining = fittedPipeline.transform(trainDataFrame)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ìºì‹± ì‚¬ìš©ì‹œ ì¤‘ê°„ ë³€í™”ëœ ë°ì´í„°ì…‹ì˜ ë³µì‚¬ë³¸ì„ ë©”ëª¨ë¦¬ì— ì €ì¥. ì „ì²´ íŒŒì´í”„ë¼ì¸ ì¬ì‹¤í–‰ë³´ë‹¤ í›¨ì”¬ ë¹ ë¥´ë‹¤</span></span><br><span class="line"><span class="comment">// ê·¼ë° ì™œë•Œë¬¸ì— ë‚˜ëŠ” ë” ëŠë¦° ê²ƒ..? ã….. CHAPTER 4 ì—ì„œ ë‹¤ì‹œ í™•ì¸í•˜ì</span></span><br><span class="line">transformedTraining.cache()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// (5) ëª¨ë¸ í•™ìŠµ (kmeans ëª¨ë¸ ì„¤ì • ê³¼ì •ì€ ìƒëµ..)</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.ml.clustering.<span class="type">KMeans</span></span><br><span class="line"><span class="keyword">val</span> kmeans = (<span class="keyword">new</span> <span class="type">KMeans</span>()</span><br><span class="line">  .setK(<span class="number">20</span>)</span><br><span class="line">  .setSeed(<span class="number">1</span>L))</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> kmModel = kmeans.fit(transformedTraining)</span><br><span class="line"></span><br><span class="line"><span class="comment">// (6) í•™ìŠµ ë°ì´í„°ì…‹ì— ëŒ€í•œ ë¹„ìš© (êµ°ì§‘ ë¹„ìš©) ê³„ì‚°</span></span><br><span class="line">kmModel.computeCost(transformedTraining)</span><br><span class="line"><span class="comment">// res146: Double = 8.455373996537486E7</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// í…ŒìŠ¤íŠ¸ ë°ì´í„°ì…‹ê³¼ ë¹„êµ</span></span><br><span class="line"><span class="comment">// ëª¨ë¸ ê°œì„  ë°©ë²•ì€ CHAPTER 6 ì—ì„œ</span></span><br><span class="line"><span class="keyword">val</span> transformedTest = fittedPipeline.transform(testDataFrame)</span><br><span class="line">kmModel.computeCost(transformedTest)</span><br><span class="line"><span class="comment">// res150: Double = 5.175070947222117E8</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></details><ul><li><p>ë‚´ì¥ëœ ë¨¸ì‹ ëŸ¬ë‹ ì•Œê³ ë¦¬ì¦˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ MLlib ì‚¬ìš©í•œ ëŒ€ê·œëª¨ ë¨¸ì‹ ëŸ¬ë‹ ê°€ëŠ¥</p><ul><li>ëŒ€ìš©ëŸ‰ ë°ì´í„° ëŒ€ìƒì˜ ì „ì²˜ë¦¬(proprocessing), ë©ì‰(munging), ëª¨ë¸ í•™ìŠµ(model training), ì˜ˆì¸¡(prediction)</li><li>êµ¬ì¡°ì  ìŠ¤íŠ¸ë¦¬ë°ì—ì„œ ì˜ˆì¸¡í•˜ê³ ì í• ë•Œë„ ì˜ˆì¸¡ ëª¨ë¸ ì‚¬ìš© ê°€ëŠ¥</li></ul></li><li><p>ìŠ¤íŒŒí¬ëŠ” ë¶„ë¥˜(classification), íšŒê·€(regression), êµ°ì§‘í™”(clustering), ë”¥ëŸ¬ë‹(deep learning) ê°™ì€ ë¨¸ì‹ ëŸ¬ë‹ ê´€ë ¨ ì •êµí•œ API ì œê³µ</p><ul><li>ë‘ìœ  ë…¸- <code>k-í‰ê· </code> ? : êµ°ì§‘í™” í‘œì¤€ ì•Œê³ ë¦¬ì¦˜. ì„¼íŠ¸ë¡œì´ë“œ(centroid)ë¼ëŠ” ì¤‘ì‹¬ì ì„ ì‚¬ìš©í•´ì„œ.. <code>p.99 ì°¸ê³ </code></li></ul></li><li><p>k-í‰ê· ì„ ì‚¬ìš©í•œ ì˜ˆì œ</p><ul><li>ì›ë³¸ ë°ì´í„°ë¥¼ ì˜¬ë°”ë¥¸ í¬ë§·ìœ¼ë¡œ ë§Œë“œëŠ” íŠ¸ë ŒìŠ¤í¬ë©”ì´ì…˜ ì •ì˜. ì‹¤ì œ ëª¨ë¸ í•™ìŠµ í›„ ë‹¤ìŒ ì˜ˆì¸¡ ìˆ˜í–‰</li></ul></li><li><p>ìŠ¤íŒŒí¬ (MLlib DataFrame API) ì—ì„œ ë¨¸ì‹ ëŸ¬ë‹ ëª¨ë¸ í•™ìŠµ ê³¼ì • 2ë‹¨ê³„</p><ol><li>ì•„ì§ í•™ìŠµë˜ì§€ ì•Šì€ ëª¨ë¸ ì´ˆê¸°í™”</li><li>í•´ë‹¹ ëª¨ë¸ì„ í•™ìŠµ</li></ol></li></ul><blockquote><p>ì•Œê³ ë¦¬ì¦˜ ëª…ëª… ê·œì¹™ </p><ul><li>í•™ìŠµ ì „ ì•Œê³ ë¦¬ì¦˜ ëª…ì¹­ : {Algorithm_name}</li><li>í•™ìŠµ í›„ ì•Œê³ ë¦¬ì¦˜ ëª…ì¹­ : {Algorithm_name} + â€˜Modelâ€™</li></ul></blockquote><h3 id="3-5-ì €ìˆ˜ì¤€-API"><a href="#3-5-ì €ìˆ˜ì¤€-API" class="headerlink" title="3.5 ì €ìˆ˜ì¤€ API"></a>3.5 ì €ìˆ˜ì¤€ API</h3><ul><li>ìŠ¤íŒŒí¬ëŠ” <strong>RDD</strong> ë¥¼ í†µí•´ ìë°”ì™€ íŒŒì´ì¬ ê°ì²´ë¥¼ ë‹¤ë£¨ëŠ”ë° í•„ìš”í•œ ë‹¤ì–‘í•œ ê¸°ë³¸ ê¸°ëŠ¥ (ì €ìˆ˜ì¤€ API) ì œê³µ<ul><li>DataFrameì„ í¬í•¨í•´ì„œ ìŠ¤íŒŒí¬ì˜ ê±°ì˜ ëª¨ë“  ê¸°ëŠ¥ì´ RDD ê¸°ë°˜</li><li>ì €ìˆ˜ì¤€ ëª…ë ¹ìœ¼ë¡œ ì»´íŒŒì¼ =&gt; í¸ë¦¬í•˜ê³  ë§¤ìš° íš¨ìœ¨ì ì¸ ë¶„ì‚°ì²˜ë¦¬</li></ul></li><li>ì›ì‹œ ë°ì´í„°ë¥¼ ë‹¤ë£¨ëŠ” ìš©ë„ë¡œë„ ì“¸ ìˆ˜ëŠ” ìˆì§€ë§Œ, ëŒ€ë¶€ë¶„ êµ¬ì¡°ì  API ì‚¬ìš©ì´ ë” ë‚«ë‹¤<ul><li>ëŒ€ì‹  íŒŒí‹°ì…˜ê³¼ ê°™ì€ <strong>ë¬¼ë¦¬ì  ì‹¤í–‰ íŠ¹ì„±ì„ ê²°ì •</strong> í•  ìˆ˜ ìˆì–´, ì„¸ë°€í•œ ì œì–´ê°€ ê°€ëŠ¥</li><li>ë¹„ì •í˜• ë°ì´í„°, ì •ì œë˜ì§€ ì•Šì€ ì›ì‹œ ë°ì´í„° ì²˜ë¦¬ì— ì‚¬ìš©</li></ul></li><li>ì–¸ì–´ì— ë”°ë¼ RDD ì„¸ë¶€ êµ¬í˜„ì— ì°¨ì´ê°€ ìˆìŒ<ul><li>Scala, Python ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥í•˜ì§€ë§Œ RDDê°€ ë™ì¼í•˜ì§€ X</li><li>(&lt;-&gt; ì–¸ì–´ì— ê´€ê³„ì—†ì´ ë™ì¼í•œ ì‹¤í–‰ íŠ¹ì„±ì˜ DataFrame API)</li></ul></li></ul><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ë©”ëª¨ë¦¬ì— ì €ì¥ëœ ì›ì‹œ ë°ì´í„°ë¥¼ ë³‘ë ¬ ì²˜ë¦¬ (parallize) í•˜ì—¬ RDD[Int] ìƒì„± í›„ DataFrameìœ¼ë¡œ ë³€í™˜</span></span><br><span class="line">spark.sparkContext.parallelize(<span class="type">Seq</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)).toDF()</span><br></pre></td></tr></table></figure><h3 id="3-6-SparkR"><a href="#3-6-SparkR" class="headerlink" title="3.6 SparkR"></a>3.6 SparkR</h3><ul><li>SparkR : ìŠ¤íŒŒí¬ë¥¼ Rì–¸ì–´ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ê¸°ëŠ¥<ul><li>íŒŒì´ì¬ API ì™€ ìœ ì‚¬í•˜ê³ , íŒŒì´ì¬ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì€ ëŒ€ë¶€ë¶„ ì‚¬ìš© ê°€ëŠ¥</li><li>R ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©í•˜ì—¬ ìŠ¤íŒŒí¬ íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ ê³¼ì •ì„ Rê³¼ ìœ ì‚¬í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŒ</li><li>CHAPTER 7ì—ì„œ ìì„¸íˆ ì•Œì•„ë³´ì</li></ul></li></ul><h3 id="3-7-ìŠ¤íŒŒí¬ì˜-ì—ì½”ì‹œìŠ¤í…œê³¼-íŒ¨í‚¤ì§€"><a href="#3-7-ìŠ¤íŒŒí¬ì˜-ì—ì½”ì‹œìŠ¤í…œê³¼-íŒ¨í‚¤ì§€" class="headerlink" title="3.7 ìŠ¤íŒŒí¬ì˜ ì—ì½”ì‹œìŠ¤í…œê³¼ íŒ¨í‚¤ì§€"></a>3.7 ìŠ¤íŒŒí¬ì˜ ì—ì½”ì‹œìŠ¤í…œê³¼ íŒ¨í‚¤ì§€</h3><ul><li>ìŠ¤íŒŒí¬ì˜ ìµœê³  ìë‘ = ì»¤ë®¤ë‹ˆí‹°ê°€ ë§Œë“¤ì–´ë‚¸ íŒ¨í‚¤ì§€ ì—ì½”ì‹œìŠ¤í…œ &amp; ë‹¤ì–‘í•œ ê¸°ëŠ¥<ul><li>ìŠ¤íŒŒí¬ íŒ¨í‚¤ì§€ ì €ì¥ì†Œ : <a href="https://spark-packages.org/">https://spark-packages.org/</a></li><li>ê·¸ ì™¸ ê¹ƒí—™, ê¸°íƒ€ ì›¹ì‚¬ì´íŠ¸ â€¦</li></ul></li></ul><h3 id="3-8-ì •ë¦¬"><a href="#3-8-ì •ë¦¬" class="headerlink" title="3.8 ì •ë¦¬"></a>3.8 ì •ë¦¬</h3><ul><li>ìŠ¤íŒŒí¬ë¥¼ ë¹„ì¦ˆë‹ˆìŠ¤ì™€ ê¸°ìˆ ì  ë¬¸ì œ í•´ê²°ì— ì ìš©í•  ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ ë°©ë²•<ul><li>ë‹¨ìˆœí•˜ê³  ê°•ë ¥í•œ í”„ë¡œê·¸ë˜ë° ëª¨ë¸, ì†ì‰¬ìš´ ì ìš©</li><li>ë‹¤ì–‘í•œ íŒ¨í‚¤ì§€ëŠ” ì—¬ëŸ¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¬¸ì œë¥¼ ì„±ê³µì ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆëŠ” ìŠ¤íŒŒí¬ì˜ ëŠ¥ë ¥ì— ëŒ€í•œ ì¦ê±°</li><li>ë” ì„±ì¥í•˜ë„ë¡ ë” ë§ì€ íŒ¨í‚¤ì§€ê°€ ë§Œë“¤ì–´ì§ˆê±°ë‹¤~</li></ul></li></ul><h3 id="ğŸ“’-ë‹¨ì–´ì¥"><a href="#ğŸ“’-ë‹¨ì–´ì¥" class="headerlink" title="ğŸ“’ ë‹¨ì–´ì¥"></a>ğŸ“’ ë‹¨ì–´ì¥</h3><ul><li>ì •ì  íƒ€ì… ì½”ë“œ/ì–¸ì–´ (Statically typed) : ìë£Œí˜•ì´ ê³ ì •ëœ ì–¸ì–´. ì»´íŒŒì¼ ë•Œ ë³€ìˆ˜ íƒ€ì…ì´ ê²°ì • (ex. Java, Scala, C, C++ ë“±)<ul><li>&lt;-&gt; ë™ì  íƒ€ì… ì–¸ì–´ (Dynamically typed) : ëŸ°íƒ€ì„ì— ë³€ìˆ˜ íƒ€ì…ì´ ê²°ì • (ex. Python, JavaScript ë“±)</li></ul></li><li>ë©ì‰ (munging) : =data wrangling. ì›ë³¸ ë°ì´í„°ë¥¼ ë‹¤ë¥¸ í˜•íƒœë¡œ ë³€í™˜í•˜ê±°ë‚˜ ë§¤í•‘í•˜ëŠ” ê³¼ì •</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;br/&gt;

&lt;h4 id=&quot;Part-1-END&quot;&gt;&lt;a href=&quot;#Part-1-END&quot; class=&quot;headerlink&quot; title=&quot;[Part 1] END&quot;&gt;&lt;/a&gt;[Part 1] END&lt;/h4&gt;&lt;p&gt;íŒŒíŠ¸ 1 ê¹Œì§€ ëë‚´ê³  ë‚˜ë‹ˆ ì´ì œ ì¡°ê¸ˆì”© ìŠ¤íŒŒí¬ ë§›</summary>
      
    
    
    
    <category term="spark" scheme="https://minsw.github.io/categories/spark/"/>
    
    
    <category term="study" scheme="https://minsw.github.io/tags/study/"/>
    
    <category term="book" scheme="https://minsw.github.io/tags/book/"/>
    
    <category term="spark" scheme="https://minsw.github.io/tags/spark/"/>
    
    <category term="apache" scheme="https://minsw.github.io/tags/apache/"/>
    
  </entry>
  
  <entry>
    <title>&amp;#039;Spark The Definitive Guide&amp;#039; 2ì¥ - ìŠ¤íŒŒí¬ ì°ì–´ë¨¹ê¸°</title>
    <link href="https://minsw.github.io/2021/01/24/Spark-The-Definitive-Guide-2%EC%9E%A5/"/>
    <id>https://minsw.github.io/2021/01/24/Spark-The-Definitive-Guide-2%EC%9E%A5/</id>
    <published>2021-01-24T09:42:51.000Z</published>
    <updated>2021-01-24T18:11:30.114Z</updated>
    
    <content type="html"><![CDATA[<img src="https://user-images.githubusercontent.com/26691216/105627228-e66e3200-5e78-11eb-9ea6-2e3662267b7a.jpg" width=200 /><center> ë„ì»¤ ì´ë¯¸ì§€ ì‚¬ìš©ì‹œ Zeppelinì— ì˜ˆì œ ì½”ë“œê°€ ìˆë‹¤ <br/>ë‚˜ì²˜ëŸ¼ ì‹œë ¥ ê²€ì‚¬&íƒ€ì ì—°ìŠµ í•˜ëŠë¼ ì§„ë¹¼ì§€ë§ê³  Chapter2ëŠ” ê·¸ëƒ¥ ì˜ˆì œ ì½”ë“œë¥¼ ì“°ë„ë¡ í•˜ì... </center><center><h2>_ _ _</h2></center><br/><hr><h1 id="CHAPTER-2-ìŠ¤íŒŒí¬-ê°„ë‹¨íˆ-ì‚´í´ë³´ê¸°"><a href="#CHAPTER-2-ìŠ¤íŒŒí¬-ê°„ë‹¨íˆ-ì‚´í´ë³´ê¸°" class="headerlink" title="CHAPTER 2 ìŠ¤íŒŒí¬ ê°„ë‹¨íˆ ì‚´í´ë³´ê¸°"></a>CHAPTER 2 ìŠ¤íŒŒí¬ ê°„ë‹¨íˆ ì‚´í´ë³´ê¸°</h1><p>DataFrame, SQL ì„ ì‚¬ìš©í•´ í´ëŸ¬ìŠ¤í„°, ìŠ¤íŒŒí¬ ì• í”Œë¦¬ì¼€ì´ì…˜, êµ¬ì¡°ì  API ë¥¼ ì‚´í´ë³´ê³ <br>ìŠ¤íŒŒí¬ì˜ í•µì‹¬ìš©ì–´ì™€ ê°œë…, ì‚¬ìš©ë²•ì„ ìµíŒë‹¤.</p><h3 id="2-1-ìŠ¤íŒŒí¬ì˜-ê¸°ë³¸-ì•„í‚¤í…ì²˜"><a href="#2-1-ìŠ¤íŒŒí¬ì˜-ê¸°ë³¸-ì•„í‚¤í…ì²˜" class="headerlink" title="2.1 ìŠ¤íŒŒí¬ì˜ ê¸°ë³¸ ì•„í‚¤í…ì²˜"></a>2.1 ìŠ¤íŒŒí¬ì˜ ê¸°ë³¸ ì•„í‚¤í…ì²˜</h3><blockquote><p>ìŠ¤íŒŒí¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì´í•´í•˜ê¸° ìœ„í•œ í•µì‹¬ì‚¬í•­</p><ul><li>ìŠ¤íŒŒí¬ëŠ” ì‚¬ìš©ê°€ëŠ¥í•œ ìì›ì„ íŒŒì•…í•˜ê¸° ìœ„í•´ <strong>í´ëŸ¬ìŠ¤í„° ë§¤ë‹ˆì €</strong> ì‚¬ìš©</li><li><strong>ë“œë¼ì´ë²„</strong> í”„ë¡œì„¸ìŠ¤ëŠ” ì£¼ì–´ì§ ì‘ì—…ì„ ì™„ë£Œí•˜ê¸°ìœ„í•´, ë“œë¼ì´ë²„ í”„ë¡œê·¸ë¨ì˜ ëª…ë ¹ì„ <strong>ìµìŠ¤íí„°</strong>ì—ì„œ ì‹¤í–‰í•  ì±…ì„ì´ ìˆìŒ</li></ul></blockquote><ul><li>ìŠ¤íŒŒí¬ëŠ” í´ëŸ¬ìŠ¤í„°ì˜ ë°ì´í„° ì²˜ë¦¬ ì‘ì—…ì„ ê´€ë¦¬ / ì¡°ìœ¨<ul><li>ì»´í“¨í„° í´ëŸ¬ìŠ¤í„°ëŠ” ì—¬ëŸ¬ ì»´í“¨í„°ì˜ ìì›ì„ ëª¨ì•„ í•˜ë‚˜ì˜ ì»´í“¨í„° ì²˜ëŸ¼ ì‚¬ìš©</li><li>í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‘ì—…ì„ ì¡°ìœ¨í•  ìˆ˜ ìˆëŠ” í”„ë ˆì„ì›Œí¬ =&gt; <strong>ìŠ¤íŒŒí¬</strong></li></ul></li><li>ìŠ¤íŒŒí¬ê°€ ì—°ì‚°ì— ì‚¬ìš©í•  í´ëŸ¬ìŠ¤í„°ë¥¼ ê´€ë¦¬í•˜ëŠ” <strong>í´ëŸ¬ìŠ¤í„° ë§¤ë‹ˆì €</strong><ul><li>ìŠ¤íŒŒí¬ standalone í´ëŸ¬ìŠ¤í„° ë§¤ë‹ˆì €, í•˜ë‘¡ YARN, Mesos</li><li>ì—­í• <ul><li>ì‚¬ìš©ì : ìŠ¤íŒŒí¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì œì¶œ (submit)</li><li>-&gt; í´ëŸ¬ìŠ¤í„° ë§¤ë‹ˆì € : ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ì— í•„ìš”í•œ ìì› í• ë‹¹ </li><li>-&gt; í• ë‹¹ë°›ì€ ìì›ìœ¼ë¡œ ì‘ì—… ì²˜ë¦¬</li></ul></li></ul></li><li>ìŠ¤íŒŒí¬ ì• í”Œë¦¬ì¼€ì´ì…˜ = <code>driver</code> í”„ë¡œì„¸ìŠ¤ + ë‹¤ìˆ˜ì˜ <code>executor</code> í”„ë¡œì„¸ìŠ¤<ul><li><code>driver</code> í”„ë¡œì„¸ìŠ¤<ul><li>í´ëŸ¬ìŠ¤í„° ë…¸ë“œ ì¤‘ í•˜ë‚˜ì—ì„œ ì‹¤í–‰. main() í•¨ìˆ˜ ì‹¤í–‰</li><li>ì‹¬ì¥ê³¼ ê°™ì€ ì¡´ì¬ë¡œ, ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒëª… ì£¼ê¸° ë™ì•ˆ ê´€ë ¨ ì •ë³´ ëª¨ë‘ ìœ ì§€</li></ul></li><li><code>executor</code> í”„ë¡œì„¸ìŠ¤<ul><li>driver ê°€ í• ë‹¹í•œ ì‘ì—… ìˆ˜í–‰ &amp; ì§„í–‰ ìƒí™©ì„ driverì—ê²Œ ë³´ê³ </li><li>ëŒ€ë¶€ë¶„ ìŠ¤íŒŒí¬ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ì—­í• ë¡œ, ìŠ¤íŒŒí¬ ì–¸ì–´ APIë¥¼ í†µí•´ ë‹¤ì–‘í•œ ì–¸ì–´ë¡œ ì‹¤í–‰ ê°€ëŠ¥</li></ul></li></ul></li></ul><h3 id="2-2-ìŠ¤íŒŒí¬ì˜-ë‹¤ì–‘í•œ-ì–¸ì–´-API"><a href="#2-2-ìŠ¤íŒŒí¬ì˜-ë‹¤ì–‘í•œ-ì–¸ì–´-API" class="headerlink" title="2.2 ìŠ¤íŒŒí¬ì˜ ë‹¤ì–‘í•œ ì–¸ì–´ API"></a>2.2 ìŠ¤íŒŒí¬ì˜ ë‹¤ì–‘í•œ ì–¸ì–´ API</h3><ul><li>ìŠ¤íŒŒí¬ëŠ” ëª¨ë“  ì–¸ì–´ì— ë§ëŠ” ëª‡ëª‡ â€˜í•µì‹¬ ê°œë…â€™ ì œê³µ<ul><li>í•µì‹¬ê°œë… -&gt; (í´ëŸ¬ìŠ¤í„° ë¨¸ì‹ ì—ì„œ ì‹¤í–‰ë˜ëŠ”) ìŠ¤íŒŒí¬ ì½”ë“œ ë¡œ ë³€í™˜</li><li>êµ¬ì¡°ì  APIë§Œìœ¼ë¡œ ì‘ì„±ëœ ì½”ë“œëŠ” ì–¸ì–´ì— ë¬´ê´€í•˜ê²Œ ìœ ì‚¬ ì„±ëŠ¥</li></ul></li><li>ì–¸ì–´ë³„ ìš”ì•½ ì •ë³´<ul><li>Scala : ìŠ¤íŒŒí¬ê°€ ìŠ¤ì¹¼ë¼ ê¸°ë°˜. <strong>ìŠ¤íŒŒí¬ì˜ ê¸°ë³¸ ì–¸ì–´</strong></li><li>Java : <del>ìë°” ì§€ì›ì•ˆí•´ì£¼ë©´ ë‚œë¦¬ì¹ ê±°ë‹ˆê¹Œ</del> ì§€ì›ì€ í•¨</li><li>Python : ìŠ¤ì¹¼ë¼ê°€ ì§€ì›í•˜ëŠ” ê±°ì˜ ëª¨ë“  êµ¬ì¡° ì§€ì›</li><li>SQL : ANSI SQL:2003 í‘œì¤€ ì¤‘ ì¼ë¶€ ì§€ì›</li><li>R : ìŠ¤íŒŒí¬ ì½”ì–´ì˜ sparkR, R ì»¤ë®¤ë‹ˆí‹° ê¸°ë°˜ì˜ sparklyr</li></ul></li><li>SparkSession ê°ì²´<ul><li>ì‚¬ìš©ìê°€ ìŠ¤íŒŒí¬ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê¸°ìœ„í•´ ì§„ì…ì ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥</li><li>Python, R ì‚¬ìš© ì‹œì—ë„ ì‚¬ìš©ì ëŒ€ì‹  ìµìŠ¤íí„°ì˜ JVMì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ì½”ë“œë¡œ ë³€í™˜</li></ul></li></ul><h3 id="2-3-ìŠ¤íŒŒí¬-API"><a href="#2-3-ìŠ¤íŒŒí¬-API" class="headerlink" title="2.3 ìŠ¤íŒŒí¬ API"></a>2.3 ìŠ¤íŒŒí¬ API</h3><ul><li>ë‹¤ì–‘í•œ ì–¸ì–´ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì´ìœ ?<ul><li>ìŠ¤íŒŒí¬ê°€ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” 2ê°€ì§€ API ë•Œë¬¸<ul><li>ì €ìˆ˜ì¤€ì˜ ë¹„êµ¬ì¡°ì (unstructured) API</li><li>ê³ ìˆ˜ì¤€ì˜ êµ¬ì¡°ì (structured) API</li></ul></li></ul></li></ul><h3 id="2-4-ìŠ¤íŒŒí¬-ì‹œì‘í•˜ê¸°"><a href="#2-4-ìŠ¤íŒŒí¬-ì‹œì‘í•˜ê¸°" class="headerlink" title="2.4 ìŠ¤íŒŒí¬ ì‹œì‘í•˜ê¸°"></a>2.4 ìŠ¤íŒŒí¬ ì‹œì‘í•˜ê¸°</h3><ul><li>Q. ìŠ¤íŒŒí¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•˜ë ¤ë©´<ul><li>A. ì‚¬ìš©ì ëª…ë ¹ê³¼ ë°ì´í„°ë¥¼ ìŠ¤íŒŒí¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì „ì†¡í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ì•¼</li></ul></li><li>SparkSession ìƒì„± ì‹¤ìŠµ. ì ë“œê°€ì~</li></ul><h3 id="2-5-SparkSession"><a href="#2-5-SparkSession" class="headerlink" title="2.5 SparkSession"></a>2.5 SparkSession</h3><ul><li><strong>SparkSession</strong> : ìŠ¤íŒŒí¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì œì–´í•˜ëŠ” ë“œë¼ì´ë²„ í”„ë¡œì„¸ìŠ¤<ul><li>ì‚¬ìš©ìê°€ ì •ì˜í•œ ì²˜ë¦¬ëª…ë ¹ -&gt; í´ëŸ¬ìŠ¤í„°ì— ì‹¤í–‰</li><li>ìŠ¤íŒŒí¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì— 1:1 ëŒ€ì‘</li></ul></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> scala console</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ./spark-2.4.7-bin-hadoop2.7/bin/spark-shell</span></span><br><span class="line"></span><br><span class="line"><span class="meta">scala&gt;</span><span class="bash"> spark</span></span><br><span class="line">res0: org.apache.spark.sql.SparkSession = org.apache.spark.sql.SparkSession@5b58f639</span><br><span class="line"><span class="meta">scala&gt;</span><span class="bash"> val myRange = spark.range(1000).toDF(<span class="string">&quot;number&quot;</span>)</span></span><br><span class="line">myRange: org.apache.spark.sql.DataFrame = [number: bigint]</span><br></pre></td></tr></table></figure><h3 id="2-6-DataFrame"><a href="#2-6-DataFrame" class="headerlink" title="2.6 DataFrame"></a>2.6 DataFrame</h3><ul><li><strong>DataFrame</strong> : ê°€ì¥ ëŒ€í‘œì ì¸ <strong>êµ¬ì¡°ì  API</strong><ul><li>í…Œì´ë¸” ë°ì´í„°ë¥¼ row, column ìœ¼ë¡œ ë‹¨ìˆœí•˜ê²Œ í‘œí˜„<ul><li>scheme : column ê³¼ column type ì„ ì •ì˜í•œ ëª©ë¡</li></ul></li><li>DataFrame ì€ ìˆ˜ì²œ ëŒ€ì˜ ì»´í“¨í„°ì— ë¶„ì‚° ê°€ëŠ¥</li><li>vs ìŠ¤í”„ë ˆë“œ ì‹œíŠ¸<ul><li>ë¹„ìŠ·í•˜ë‹¤ê³  ë³¼ ìˆ˜ ìˆì§€ë§Œ ìŠ¤í”„ë ˆë“œ ì‹œíŠ¸ëŠ” ë‹¨ì¼ ì»´í“¨í„° ì €ì¥</li></ul></li><li>vs Python (Pandas)ì˜ DataFrame, Rì˜ DataFrame<ul><li>ë§ˆì°¬ê°€ì§€ë¡œ ëŒ€ë¶€ë¶„ ë‹¨ì¼ ì»´í“¨í„°ì— ì¡´ì¬</li><li>=&gt; ìŠ¤íŒŒí¬ DataFrameìœ¼ë¡œ ì‰½ê²Œ ë³€í™˜ ê°€ëŠ¥</li></ul></li></ul></li><li>ìŠ¤íŒŒí¬ì˜ í•µì‹¬ ì¶”ìƒí™” ê°œë… (ë¶„ì‚° ë°ì´í„° ëª¨ìŒ)<ul><li>Dataset, DataFrame, SQL í…Œì´ë¸”, RDD</li></ul></li><li>DataFrameì˜ íŒŒí‹°ì…˜<ul><li>ìµìŠ¤íí„°ê°€ ë³‘ë ¬ë¡œ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ë°ì´í„°ë¥¼ ë¶„í• í•˜ëŠ” ì²­í¬ ë‹¨ìœ„</li><li>ì‹¤í–‰ ì¤‘ ë°ì´í„°ê°€ í´ëŸ¬ìŠ¤í„°ì—ì„œ ë¬¼ë¦¬ì ìœ¼ë¡œ ë¶„ì‚°ë˜ëŠ” ë°©ì‹ì„ ë‚˜íƒ€ëƒ„<ul><li>íŒŒí‹°ì…˜ 1 ìµìŠ¤íí„° 1000 =&gt; ë³‘ë ¬ì„± 1</li><li>íŒŒí‹°ì…˜ 1000 ìµìŠ¤íí„° 1 =&gt; ë³‘ë ¬ì„± 1</li></ul></li><li>ë¬¼ë¦¬ì  íŒŒí‹°ì…˜ì— ë°ì´í„° ë³€í™˜ìš© í•¨ìˆ˜ ì§€ì • ì‹œ ìŠ¤íŒŒí¬ê°€ ì‹¤ì œ ì²˜ë¦¬ ë°©ë²• ê²°ì • (íŒŒí‹°ì…˜ ìˆ˜ë™ ì²˜ë¦¬ í•„ìš” X)</li></ul></li></ul><h3 id="2-7-íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜"><a href="#2-7-íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜" class="headerlink" title="2.7 íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜"></a>2.7 íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜</h3><ul><li>ìŠ¤íŒŒí¬ì˜ í•µì‹¬ ë°ì´í„° êµ¬ì¡° =&gt; <strong>ë¶ˆë³€ì„± (immutable)</strong><ul><li>DataFrameì„ ë³€ê²½í•˜ë ¤ë©´?</li><li>ì›í•˜ëŠ” ë³€ê²½ ë°©ë²•ì„ ìŠ¤íŒŒí¬ì—ê²Œ ì•Œë ¤ì¤˜ì•¼í•¨ =&gt; <strong>íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜</strong></li></ul></li><li>íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ : ìŠ¤íŒŒí¬ì—ì„œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ í‘œí˜„í•˜ëŠ” í•µì‹¬ ê°œë…<ul><li>ìœ í˜•<ul><li>ì¢ì€ ì˜ì¡´ì„± (narrow dependency)<ul><li>ì…ë ¥ íŒŒí‹°ì…˜ : ì¶œë ¥ íŒŒí‹°ì…˜ = 1 : 1</li></ul></li><li>ë„“ì€ ì˜ì¡´ì„± (wide dependency)<ul><li>ì…ë ¥ íŒŒí‹°ì…˜ : ì¶œë ¥ íŒŒí‹°ì…˜ = 1 : N</li></ul></li></ul></li></ul></li><li>ì§€ì—° ì—°ì‚° (lazy evaluation) : ì—°ì‚° ê·¸ë˜í”„ë¥¼ ì²˜ë¦¬í•˜ê¸° ì§ì „ê¹Œì§€ ê¸°ë‹¤ë¦¬ëŠ” ë™ì‘ ë°©ì‹<ul><li>ìŠ¤íŒŒí¬ëŠ” ì—°ì‚° ëª…ë ¹ ì¦‰ì‹œ ë°ì´í„°ë¥¼ ìˆ˜ì • X. ì›ì‹œ ë°ì´í„°ì— ì ìš©í•  íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ì˜ <strong>ì‹¤í–‰ ê³„íš</strong>ì„ ìƒì„±</li><li>ë§ˆì§€ë§‰ê¹Œì§€ ëŒ€ê¸°í•˜ë‹¤ DataFrame íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ì„ ê°„ê²°í•œ ë¬¼ë¦¬ì  ì‹¤í–‰ ê³„íšìœ¼ë¡œ ì»´íŒŒì¼ =&gt; ì „ì²´ ë°ì´í„° íë¦„ ìµœì í™”</li><li>ex. DataFrame ì˜ predicate pushdown</li></ul></li></ul><h3 id="2-8-ì•¡ì…˜"><a href="#2-8-ì•¡ì…˜" class="headerlink" title="2.8 ì•¡ì…˜"></a>2.8 ì•¡ì…˜</h3><ul><li>íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ì€ ë…¼ë¦¬ì  ì‹¤í–‰ ê³„íš<ul><li>íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ì„ ì„ ì–¸í•´ë„ ì•¡ì…˜ì„ í˜¸ì¶œí•˜ì§€ ì•Šìœ¼ë©´ ìˆ˜í–‰ X</li></ul></li><li>ì•¡ì…˜ (action) : ì‹¤ì œ ì—°ì‚°ì„ ìˆ˜í–‰<ul><li>ìœ í˜•<ul><li>ì½˜ì†”ì—ì„œ ë°ì´í„°ë¥¼ ë³´ëŠ” ì•¡ì…˜</li><li>ê° ì–¸ì–´ë¡œ ëœ ë„¤ì´í‹°ë¸Œ ê°ì²´ì— ë°ì´í„°ë¥¼ ëª¨ìœ¼ëŠ” ì•¡ì…˜</li><li>ì¶œë ¥ ë°ì´í„°ì†ŒìŠ¤ì— ì €ì¥í•˜ëŠ” ì•¡ì…˜</li></ul></li></ul></li><li>ì•¡ì…˜ ì§€ì • ì‹œ ìŠ¤íŒŒí¬ ì¡ ì‹œì‘<ul><li><strong>ìŠ¤íŒŒí¬ ì¡ (job)</strong><ul><li>í•„í„° (ì¢ì€ íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜) ìˆ˜í–‰</li><li>-&gt; íŒŒí‹°ì…˜ ë³„ë¡œ ë ˆì½”ë“œ ìˆ˜ë¥¼ ì¹´ìš´íŠ¸ (ë„“ì€ íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜)</li><li>-&gt; ê° ì–¸ì–´ì— ì í•©í•œ ë„¤ì´í‹°ë¸Œ ê°ì²´ì— ê²°ê³¼ ëª¨ìŒ</li></ul></li><li>ìŠ¤íŒŒí¬ UIë¡œ ì¡ ëª¨ë‹ˆí„°ë§ ê°€ëŠ¥</li><li><em>ìŠ¤íŒŒí¬ ì¡ì€ ê°œë³„ ì•¡ì…˜ì— ì˜í•´ íŠ¸ë¦¬ê±°ë˜ëŠ” ë‹¤ìˆ˜ì˜ íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆë‹¤</em></li></ul></li></ul><h3 id="2-9-ìŠ¤íŒŒí¬-UI"><a href="#2-9-ìŠ¤íŒŒí¬-UI" class="headerlink" title="2.9 ìŠ¤íŒŒí¬ UI"></a>2.9 ìŠ¤íŒŒí¬ UI</h3><ul><li>ë“œë¼ì´ë²„ ë…¸ë“œì˜ 4040 í¬íŠ¸</li><li>ìŠ¤íŒŒí¬ ì¡ì˜ ìƒíƒœ, í™˜ê²½ ì„¤ì •, í´ëŸ¬ìŠ¤í„° ìƒíƒœ ë“±ì˜ ì •ë³´ í™•ì¸ ê°€ëŠ¥</li></ul><h3 id="2-10-ì¢…í•©-ì˜ˆì œ"><a href="#2-10-ì¢…í•©-ì˜ˆì œ" class="headerlink" title="2.10 ì¢…í•© ì˜ˆì œ"></a>2.10 ì¢…í•© ì˜ˆì œ</h3><ul><li>ë¯¸êµ­ êµí†µí†µê³„êµ­ì˜ í•­ê³µìš´í•­ ë°ì´í„° ì¤‘ ì¼ë¶€ë¡œ ì‹¤ìŠµ<ul><li><a href="https://bit.ly/2yw2fCx">ìƒ˜í”Œ ë°ì´í„°</a> : ë°˜ì •í˜•(semi-structured), csv í¬ë§·</li><li>(=&gt; ë¶€ë¡ Aì˜ ë„ì»¤ ì´ë¯¸ì§€ ì‚¬ìš© ì‹œ ì´ë¯¸ í¬í•¨)</li></ul></li><li>ìŠ¤íŒŒí¬ëŠ” ë‹¤ì–‘í•œ ë°ì´í„°ì†ŒìŠ¤ ì§€ì›<ul><li>SparkSessionì˜ DataFrameReader í´ë˜ìŠ¤ ì‚¬ìš©í•´ì„œ ì½ìŒ</li><li>ì˜ˆì œëŠ” <strong>ìŠ¤í‚¤ë§ˆ ì¶”ë¡  (Schema inference)</strong> ê¸°ëŠ¥ ì¶”ê°€<ul><li>ìŠ¤íŒŒí¬ëŠ” ê° ì»¬ëŸ¼ì˜ ë°ì´í„° íƒ€ì… ì¶”ë¡ ì„ ìœ„í•´ ì ì€ ì–‘ì˜ ë°ì´í„°ë¥¼ ì½ìŒ </li></ul></li><li>DataFrame ì€ ë¶ˆíŠ¹ì  ë‹¤ìˆ˜ì˜ ë¡œìš°ì™€ ì»¬ëŸ¼<ul><li>ì§€ì—° ì—°ì‚° í˜•íƒœì˜ íŠ¸ë ŒìŠ¤í¬ë©”ì´ì…˜ì´ë¯€ë¡œ row ìˆ˜ ì•Œ ìˆ˜ X</li></ul></li></ul></li></ul><h4 id="ì˜ˆì œ-1"><a href="#ì˜ˆì œ-1" class="headerlink" title="ì˜ˆì œ 1"></a>ì˜ˆì œ 1</h4><details><summary class="point-color-can-hover">ì˜ˆì œ 1 í¼ì¹˜ê¸°</summary><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$ head /data/flight-data/csv/2015-summary.csv</span><br><span class="line">DEST_COUNTRY_NAME,ORIGIN_COUNTRY_NAME,count</span><br><span class="line">United States,Romania,15</span><br><span class="line">United States,Croatia,1</span><br><span class="line">..</span><br><span class="line"></span><br><span class="line"><span class="comment"># spark-shell (scala)</span></span><br><span class="line">scala&gt; val flightData2015 = spark.read.option(<span class="string">&quot;inferSchema&quot;</span>, <span class="string">&quot;true&quot;</span>).option(<span class="string">&quot;header&quot;</span>, <span class="string">&quot;true&quot;</span>).csv(<span class="string">&quot;/data/flight-data/csv/2015-summary.csv&quot;</span>)</span><br><span class="line">flightData2015: org.apache.spark.sql.DataFrame = [DEST_COUNTRY_NAME: string, ORIGIN_COUNTRY_NAME: string ... 1 more field]</span><br><span class="line"></span><br><span class="line">scala&gt; flightData2015.take(3)</span><br><span class="line">res0: Array[org.apache.spark.sql.Row] = Array([United States,Romania,15], [United States,Croatia,1], [United States,Ireland,344])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">scala&gt; flightData2015.sort(<span class="string">&quot;count&quot;</span>).explain()</span><br><span class="line">== Physical Plan ==</span><br><span class="line">*(2) Sort [count<span class="comment">#12 ASC NULLS FIRST], true, 0</span></span><br><span class="line">+- Exchange rangepartitioning(count<span class="comment">#12 ASC NULLS FIRST, 200)</span></span><br><span class="line">   +- *(1) FileScan csv [DEST_COUNTRY_NAME<span class="comment">#10,ORIGIN_COUNTRY_NAME#11,count#12] Batched: false, Format: CSV, Location: InMemoryFileIndex[file:/data/flight-data/csv/2015-summary.csv], PartitionFilters: [], PushedFilters: [], ReadSchema: struct&lt;DEST_COUNTRY_NAME:string,ORIGIN_COUNTRY_NAME:string,count:int&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ì…”í”Œ íŒŒí‹°ì…˜ default 200ê°œ =&gt; 5ê°œ</span></span><br><span class="line">scala&gt; spark.conf.set(<span class="string">&quot;spark.sql.shuffle.partitions&quot;</span>, <span class="string">&quot;5&quot;</span>)</span><br><span class="line"></span><br><span class="line">scala&gt; flightData2015.sort(<span class="string">&quot;count&quot;</span>).explain()</span><br><span class="line">== Physical Plan ==</span><br><span class="line">*(2) Sort [count<span class="comment">#12 ASC NULLS FIRST], true, 0</span></span><br><span class="line">+- Exchange rangepartitioning(count<span class="comment">#12 ASC NULLS FIRST, 5)</span></span><br><span class="line">   +- *(1) FileScan csv [DEST_COUNTRY_NAME<span class="comment">#10,ORIGIN_COUNTRY_NAME#11,count#12] Batched: false, Format: CSV, Location: InMemoryFileIndex[file:/data/flight-data/csv/2015-summary.csv], PartitionFilters: [], PushedFilters: [], ReadSchema: struct&lt;DEST_COUNTRY_NAME:string,ORIGIN_COUNTRY_NAME:string,count:int&gt;</span></span><br><span class="line"></span><br><span class="line">scala&gt; flightData2015.sort(<span class="string">&quot;count&quot;</span>).take(2)</span><br><span class="line">res3: Array[org.apache.spark.sql.Row] = Array([United States,Singapore,1], [Moldova,United States,1])</span><br><span class="line"></span><br></pre></td></tr></table></figure></details><blockquote><ul><li><code>take(n)</code> : Action</li><li><code>sort()</code> :  Transformation (ë„“ì€) <ul><li>DataFrame ì„ ë³€ê²½í•˜ì§€ ì•Šê³  ìƒˆë¡œìš´ DataFrameì„ ìƒì„±í•´ ë°˜í™˜</li></ul></li><li><code>explain()</code> <ul><li>DataFrameì˜ ê³„ë³´(lineage) ë‚˜ ìŠ¤íŒŒí¬ ì¿¼ë¦¬ ì‹¤í–‰ ê³„íš ì¶œë ¥</li></ul></li></ul></blockquote><ul><li>ì‹¤í–‰ ê³„íš? : ë””ë²„ê¹…ê³¼ ìŠ¤íŒŒí¬ì˜ ì‹¤í–‰ê³¼ì •ì„ ì´í•´í•˜ëŠ”ë° ë„ì›€ì„ ì£¼ëŠ” ë„êµ¬<ul><li>ìœ„ì—ì„œ ì•„ë˜ë°©í–¥ìœ¼ë¡œ ì½ëŠ”ë‹¤</li><li>ìµœì¢… ê²°ê³¼ëŠ” ê°€ì¥ ìœ„, ë°ì´í„°ì†ŒìŠ¤ëŠ” ê°€ì¥ ì•„ë˜</li></ul></li><li>DataFrameì˜ ê³„ë³´<ul><li>íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ì˜ ë…¼ë¦¬ì  ì‹¤í–‰ ê³„íš -&gt; DataFrameì˜ ê³„ë³´ ì •ì˜</li><li>-&gt; ê³„ë³´ë¥¼ í†µí•´ ìŠ¤íŒŒí¬ê°€ ì…ë ¥ë°ì´í„°ì— ìˆ˜í–‰í•œ ì—°ì‚°ì„ ì „ì²´ íŒŒí‹°ì…˜ì—ì„œ ì–´ë–»ê²Œ ì¬ì—°ì‚°í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŒ</li><li><em>í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì˜ í•µì‹¬</em> (Pure Function, ê°™ì€ ì…ë ¥ -&gt; ê°™ì€ ì¶œë ¥)</li></ul></li><li>ì‚¬ìš©ìëŠ” ë¬¼ë¦¬ì  ë°ì´í„°ë¥¼ ì§ì ‘ ë‹¤ë£¨ì§€ ì•Šê³ , ë¬¼ë¦¬ì  ì‹¤í–‰ íŠ¹ì„±ì„ ì œì–´<ul><li>ì˜ˆì‹œ =&gt; íŒŒí‹°ì…˜ ìˆ˜ ë³€ê²½ <code>spark.conf.set(&quot;spark.sql.shuffle.partitions&quot;, &quot;5&quot;)</code></li><li>ìŠ¤íŒŒí¬ UI (4040 í¬íŠ¸) ì—ì„œ ìŠ¤íŒŒí¬ ì¡ ë¬¼ë¦¬ì , ë…¼ë¦¬ì  ì‹¤í–‰ íŠ¹ì„± í™•ì¸ ê°€ëŠ¥ <img width="500" alt="sparkui" src="https://user-images.githubusercontent.com/26691216/105624926-cfbfdf00-5e68-11eb-9407-e58a5f4688a9.png"></li></ul></li></ul><h4 id="ì˜ˆì œ-2-SQL"><a href="#ì˜ˆì œ-2-SQL" class="headerlink" title="ì˜ˆì œ 2 (SQL)"></a>ì˜ˆì œ 2 (SQL)</h4><details><summary class="point-color-can-hover">ì˜ˆì œ 2-1 í¼ì¹˜ê¸°</summary><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1) SQL ì‚¬ìš©</span></span><br><span class="line">scala&gt; flightData2015.createOrReplaceTempView(<span class="string">&quot;flight_data_2015&quot;</span>)</span><br><span class="line">scala&gt; val sqlWay = spark.sql(<span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">     | SELECT DEST_COUNTRY_NAME, count(1)</span></span><br><span class="line"><span class="string">     | FROM flight_data_2015</span></span><br><span class="line"><span class="string">     | GROUP BY DEST_COUNTRY_NAME</span></span><br><span class="line"><span class="string">     | &quot;</span><span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line">scala&gt; sqlWay.explain</span><br><span class="line">== Physical Plan ==</span><br><span class="line">*(2) HashAggregate(keys=[DEST_COUNTRY_NAME<span class="comment">#10], functions=[count(1)])</span></span><br><span class="line">+- Exchange hashpartitioning(DEST_COUNTRY_NAME<span class="comment">#10, 5)</span></span><br><span class="line">   +- *(1) HashAggregate(keys=[DEST_COUNTRY_NAME<span class="comment">#10], functions=[partial_count(1)])</span></span><br><span class="line">      +- *(1) FileScan csv [DEST_COUNTRY_NAME<span class="comment">#10] Batched: false, Format: CSV, Location: InMemoryFileIndex[file:/data/flight-data/csv/2015-summary.csv], PartitionFilters: [], PushedFilters: [], ReadSchema: struct&lt;DEST_COUNTRY_NAME:string&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2) DataFrame ì‚¬ìš©</span></span><br><span class="line">scala&gt; val dataFrameWay = flightData2015.groupBy(<span class="string">&quot;DEST_COUNTRY_NAME&quot;</span>).count()</span><br><span class="line">dataFrameWay: org.apache.spark.sql.DataFrame = [DEST_COUNTRY_NAME: string, count: bigint]</span><br><span class="line"></span><br><span class="line">scala&gt; dataFrameWay.explain</span><br><span class="line">== Physical Plan ==</span><br><span class="line">*(2) HashAggregate(keys=[DEST_COUNTRY_NAME<span class="comment">#10], functions=[count(1)])</span></span><br><span class="line">+- Exchange hashpartitioning(DEST_COUNTRY_NAME<span class="comment">#10, 5)</span></span><br><span class="line">   +- *(1) HashAggregate(keys=[DEST_COUNTRY_NAME<span class="comment">#10], functions=[partial_count(1)])</span></span><br><span class="line">      +- *(1) FileScan csv [DEST_COUNTRY_NAME<span class="comment">#10] Batched: false, Format: CSV, Location: InMemoryFileIndex[file:/data/flight-data/csv/2015-summary.csv], PartitionFilters: [], PushedFilters: [], ReadSchema: struct&lt;DEST_COUNTRY_NAME:string&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></details><ul><li>ìŠ¤íŒŒí¬ëŠ” ì–¸ì–´ì— ë¬´ê´€í•˜ê²Œ ê°™ì€ ë°©ì‹ìœ¼ë¡œ íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ ì‹¤í–‰<ul><li>SQL, DataFrame(R, Python, Scalar, Java) ì—ì„œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í‘œí˜„</li><li>ìŠ¤íŒŒí¬ì—ì„œ ì½”ë“œ ì‹¤í–‰ ì „ì— ë¡œì§ì„ ê¸°ë³¸ ì‹¤í–‰ê³„íš(<code>explain</code>) ìœ¼ë¡œ ì»´íŒŒì¼</li></ul></li><li>ìŠ¤íŒŒí¬ SQL ì‚¬ìš©ì‹œ ëª¨ë“  DataFrame =&gt; í…Œì´ë¸”, ë·° (ì„ì‹œ í…Œì´ë¸”) ë¡œ ë“±ë¡<ul><li>ìœ„ì—ì„œ ì„¤ëª…í–ˆë“¯ <strong>ê°™ì€ ì‹¤í–‰ ê³„íš</strong>ìœ¼ë¡œ ì»´íŒŒì¼í•˜ë¯€ë¡œ ì„±ëŠ¥ì°¨ì´ X</li></ul></li></ul><details><summary class="point-color-can-hover">ì˜ˆì œ 2-2 í¼ì¹˜ê¸°</summary><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x27;ìµœëŒ€ ë¹„í–‰ íšŸìˆ˜&#x27; êµ¬í•˜ê¸°</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># SQL ì¿¼ë¦¬</span></span><br><span class="line">scala&gt; spark.sql(<span class="string">&quot;SELECT max(count) from flight_data_2015&quot;</span>).take(1)</span><br><span class="line">res9: Array[org.apache.spark.sql.Row] = Array([370002])</span><br><span class="line"></span><br><span class="line"><span class="comment"># DataFrame êµ¬ë¬¸ _ max í•¨ìˆ˜ (íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜) ì‚¬ìš©</span></span><br><span class="line">scala&gt; import org.apache.spark.sql.functions.max</span><br><span class="line"></span><br><span class="line">scala&gt; flightData2015.select(max(<span class="string">&quot;count&quot;</span>)).take(1)</span><br><span class="line">res10: Array[org.apache.spark.sql.Row] = Array([370002])</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x27;ìƒìœ„ 5ê°œì˜ ë„ì°© êµ­ê°€&#x27; êµ¬í•˜ê¸°</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># SQL ì¿¼ë¦¬</span></span><br><span class="line">scala&gt; val maxSql = spark.sql(<span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">     | SELECT DEST_COUNTRY_NAME, sum(count) as destination_total</span></span><br><span class="line"><span class="string">     | FROM flight_data_2015</span></span><br><span class="line"><span class="string">     | GROUP BY DEST_COUNTRY_NAME</span></span><br><span class="line"><span class="string">     | ORDER BY sum(count) DESC</span></span><br><span class="line"><span class="string">     | LIMIT 5</span></span><br><span class="line"><span class="string">     | &quot;</span><span class="string">&quot;&quot;</span>)</span><br><span class="line">maxSql: org.apache.spark.sql.DataFrame = [DEST_COUNTRY_NAME: string, destination_total: bigint]</span><br><span class="line"></span><br><span class="line">scala&gt; maxSql.show()</span><br><span class="line">+-----------------+-----------------+</span><br><span class="line">|DEST_COUNTRY_NAME|destination_total|</span><br><span class="line">+-----------------+-----------------+</span><br><span class="line">|    United States|           411352|</span><br><span class="line">|           Canada|             8399|</span><br><span class="line">|           Mexico|             7140|</span><br><span class="line">|   United Kingdom|             2025|</span><br><span class="line">|            Japan|             1548|</span><br><span class="line">+-----------------+-----------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># DataFrame êµ¬ë¬¸</span></span><br><span class="line">scala&gt; import org.apache.spark.sql.functions.desc</span><br><span class="line"></span><br><span class="line">scala&gt; flightData2015.groupBy(<span class="string">&quot;DEST_COUNTRY_NAME&quot;</span>).sum(<span class="string">&quot;count&quot;</span>).withColumnRenamed(<span class="string">&quot;sum(count)&quot;</span>, <span class="string">&quot;destination_total&quot;</span>).sort(desc(<span class="string">&quot;destination_total&quot;</span>)).<span class="built_in">limit</span>(5).show()</span><br><span class="line">+-----------------+-----------------+</span><br><span class="line">|DEST_COUNTRY_NAME|destination_total|</span><br><span class="line">+-----------------+-----------------+</span><br><span class="line">|    United States|           411352|</span><br><span class="line">|           Canada|             8399|</span><br><span class="line">|           Mexico|             7140|</span><br><span class="line">|   United Kingdom|             2025|</span><br><span class="line">|            Japan|             1548|</span><br><span class="line">+-----------------+-----------------+</span><br><span class="line"></span><br><span class="line"><span class="comment"># ì½”ë“œ ìˆ˜í–‰ ë‹¨ê³„ : CSV íŒŒì¼ =&gt; (1) read -&gt; (2) groupBy -&gt; (3) sum -&gt; (4) withColumnRenamed -&gt; (5) sort -&gt; (6) limit -&gt; (7) collect =&gt; Array(..)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># scala&gt; ~.explain</span></span><br><span class="line">== Physical Plan ==</span><br><span class="line">TakeOrderedAndProject(<span class="built_in">limit</span>=5, orderBy=[destination_total<span class="comment">#108L DESC NULLS LAST], output=[DEST_COUNTRY_NAME#10,destination_total#108L])</span></span><br><span class="line">+- *(2) HashAggregate(keys=[DEST_COUNTRY_NAME<span class="comment">#10], functions=[sum(cast(count#12 as bigint))])</span></span><br><span class="line">   +- Exchange hashpartitioning(DEST_COUNTRY_NAME<span class="comment">#10, 5)</span></span><br><span class="line">      +- *(1) HashAggregate(keys=[DEST_COUNTRY_NAME<span class="comment">#10], functions=[partial_sum(cast(count#12 as bigint))])</span></span><br><span class="line">         +- *(1) FileScan csv [DEST_COUNTRY_NAME<span class="comment">#10,count#12] Batched: false, Format: CSV, Location: InMemoryFileIndex[file:/data/flight-data/csv/2015-summary.csv], PartitionFilters: [], PushedFilters: [], ReadSchema: struct&lt;DEST_COUNTRY_NAME:string,count:int&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></details><ul><li>ì‹¤í–‰ê³„íšì€ íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ì˜ <strong>ì§€í–¥ì„± ë¹„ìˆœí™˜ ê·¸ë˜í”„ (Directed Acyclic Graph, DAG)</strong><ul><li>ì•¡ì…˜ì´ í˜¸ì¶œë˜ë©´ ê²°ê³¼ë¥¼ ë§Œë“¤ì–´ë‚¸ë‹¤</li><li>DAGì˜ ê° ë‹¨ê³„ëŠ” ë¶ˆë³€ì„±ì„ ê°€ì§„ ì‹ ê·œ DataFrameì„ ìƒì„±</li></ul></li><li>ì˜ˆì œì˜ ì „ì²´ ì½”ë“œ ìˆ˜í–‰ ë‹¨ê³„ (7ë‹¨ê³„) ëŠ” p.86 [ê·¸ë¦¼ 2-10] ì°¸ì¡°<ul><li>ì‹¤ì œ ì‹¤í–‰ ê³„íš (<code>explain</code> ì´ ì¶œë ¥í•˜ëŠ”) ì€ ë¬¼ë¦¬ì ì¸ ì‹¤í–‰ ì‹œì ì—ì„œ ìˆ˜í–‰í•˜ëŠ” ìµœì í™”ë¡œ ì¸í•´ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ</li><li>ì§ì ‘ explain í•´ë³´ë©´ ì±…ì˜ explain ê³¼ë„ ë‹¤ë¥´ê²Œ ì¶œë ¥ë¨ </li></ul></li></ul><h3 id="2-11-ì •ë¦¬"><a href="#2-11-ì •ë¦¬" class="headerlink" title="2.11 ì •ë¦¬"></a>2.11 ì •ë¦¬</h3><ul><li>íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜, ì•¡ì…˜, DataFrame ì‹¤í–‰ ê³„íš ìµœì í™” ë°©ë²•<ul><li>íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ì˜ ì§€í–¥ì„± ë¹„ìˆœí™˜ ê·¸ë˜í”„(DAG) ë¥¼ ì§€ì—° ì‹¤í–‰í•˜ì—¬ ìµœì í™”</li></ul></li><li>ì˜ˆì œë¥¼ í†µí•œ ë°ì´í„°ê°€ íŒŒí‹°ì…˜ìœ¼ë¡œ êµ¬ì„±ë˜ëŠ” ë°©ë²•, ë³µì¡í•œ íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ ì‘ì—… ì‹¤í–‰ ë‹¨ê³„ í™•ì¸</li></ul><br/><h3 id="ğŸ“’-ë‹¨ì–´ì¥"><a href="#ğŸ“’-ë‹¨ì–´ì¥" class="headerlink" title="ğŸ“’ ë‹¨ì–´ì¥"></a>ğŸ“’ ë‹¨ì–´ì¥</h3><ul><li>ì…”í”Œ (Shuffle) : ìŠ¤íŒŒí¬ì¹´ í´ëŸ¬ìŠ¤í„°ì—ì„œ íŒŒí‹°ì…˜ì„ êµí™˜<ul><li>ìŠ¤íŒŒí¬ëŠ” ì…”í”Œì˜ ê²°ê³¼ë¥¼ ë””ìŠ¤í¬ì— ì €ì¥</li></ul></li><li>ê°€í™˜ì„± (Commutative) : ë‘ ëŒ€ìƒì˜ ì—°ì‚° ê²°ê³¼ê°€ ìˆœì„œì™€ ê´€ê³„ì—†ì´ ë™ì¼ (-&gt; êµí™˜ ë²•ì¹™)</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;img src=&quot;https://user-images.githubusercontent.com/26691216/105627228-e66e3200-5e78-11eb-9ea6-2e3662267b7a.jpg&quot; width=200 /&gt;
&lt;center&gt; ë„ì»¤ ì´ë¯¸</summary>
      
    
    
    
    <category term="spark" scheme="https://minsw.github.io/categories/spark/"/>
    
    
    <category term="study" scheme="https://minsw.github.io/tags/study/"/>
    
    <category term="book" scheme="https://minsw.github.io/tags/book/"/>
    
    <category term="spark" scheme="https://minsw.github.io/tags/spark/"/>
    
    <category term="apache" scheme="https://minsw.github.io/tags/apache/"/>
    
  </entry>
  
  <entry>
    <title>&amp;#039;Spark The Definitive Guide&amp;#039; 1ì¥ - Apache Spark (ìŠ¤íŒŒí¬) ëŠ” ë­˜ê¹Œ</title>
    <link href="https://minsw.github.io/2021/01/20/Spark-The-Definitive-Guide-1%EC%9E%A5/"/>
    <id>https://minsw.github.io/2021/01/20/Spark-The-Definitive-Guide-1%EC%9E%A5/</id>
    <published>2021-01-20T00:20:29.000Z</published>
    <updated>2021-01-24T18:11:30.113Z</updated>
    
    <content type="html"><![CDATA[<br/><h4 id="â€˜Spark-The-Definitive-Guideâ€™"><a href="#â€˜Spark-The-Definitive-Guideâ€™" class="headerlink" title="â€˜Spark The Definitive Guideâ€™"></a>â€˜Spark The Definitive Guideâ€™</h4><p><i>ìŠ¤íŒŒí¬ ì™„ë²½ ê°€ì´ë“œ (&amp; í•˜ë‘¡ ì™„ë²½ ê°€ì´ë“œ), Oâ€™REILLY</i></p><p>ì „í˜•ì ìœ¼ë¡œ ë¬¶ì–´ë†”ì•¼ ê³µë¶€í•˜ëŠ” íƒ€ì…ì´ë¼..<br>ì–´ë–»ê²Œë“  ë§ˆìŒì˜ ë¶€ì±„ë¥¼ ìŒ“ê¸° ìœ„í•´ ì¼ë‹¨ ì±…ë¶€í„° ì‚¬ê³  ì¼ë„ ìµœëŒ€í•œ í¬ê²Œ ë²Œë¦¬ê³  ì‹œì‘í•˜ê¸°ë¡œ í–ˆë‹¤.</p><p>ì±… ì½ê³  ê°„ë‹¨í•˜ê²Œë§Œ ì •ë¦¬í•˜ëŠ”ê±°ë¼ ë‚´ìš©ì´ ë³„ê±° ì—†ê¸´ í•´ë„<br>ë˜ ëŒ€ì¶© ì“°ë‹¤ ì–´ë”” ì‘¤ì…” ë°•ì•„ë†“ê³ ì„œ ëª» ì°¾ì§€ ë§ê³  <i style="color:lightgray">(â€œì—„ë§ˆ~ ë‚´ ê¸€ ì–´ë”¨ì–´?â€)</i> ìŠµê´€ë„ ë“¤ì¼ ê²¸ ë¸”ë¡œê·¸ì— ë‚¨ê²¨ë‘ëŠ”ê²Œ ì¢‹ê² ë‹¤.</p><p><strong>ì™„ë²½</strong> ê°€ì´ë“œë¼ë‹ˆê¹Œ ì¼ë‹¨ íŒŒíŠ¸ 3ê¹Œì§€ëŠ” ì•„ë¬»ë”° ë”°ë¼ê°€ë³´ì. ì ë“œê°€ì~!</p><blockquote><p><strong>Apache Sparkâ„¢</strong> is a unified analytics engine for large-scale data processing.</p><p>Apache Saprk ê³µì‹ í˜ì´ì§€ <a href="https://spark.apache.org/">https://spark.apache.org/</a><br>Latest Release Spark 3.0.1</p></blockquote><br/><img src="https://user-images.githubusercontent.com/26691216/105111053-699f2900-5b03-11eb-87c1-05d1c704f2d3.jpg" width=240 /><center><h2>_ _ _</h2></center><br/><hr><h1 id="CHAPTER-1-ì•„íŒŒì¹˜-ìŠ¤íŒŒí¬ë€"><a href="#CHAPTER-1-ì•„íŒŒì¹˜-ìŠ¤íŒŒí¬ë€" class="headerlink" title="CHAPTER 1 ì•„íŒŒì¹˜ ìŠ¤íŒŒí¬ë€"></a>CHAPTER 1 ì•„íŒŒì¹˜ ìŠ¤íŒŒí¬ë€</h1><h3 id="ì•„íŒŒì¹˜-ìŠ¤íŒŒí¬-Apache-Spark-ë€"><a href="#ì•„íŒŒì¹˜-ìŠ¤íŒŒí¬-Apache-Spark-ë€" class="headerlink" title="ì•„íŒŒì¹˜ ìŠ¤íŒŒí¬ (Apache Spark) ë€"></a>ì•„íŒŒì¹˜ ìŠ¤íŒŒí¬ (Apache Spark) ë€</h3><p>í†µí•© ì»´í“¨íŒ… ì—”ì§„ì´ë©° í´ëŸ¬ìŠ¤í„° í™˜ê²½ì—ì„œ ë°ì´í„°ë¥¼ ë³‘ë ¬ë¡œ ì²˜ë¦¬í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì§‘í•©.</p><ul><li>Spark ì–¸ì–´ 4ëŒ€ ì²œì™• - Python, Java, Scala, R</li><li>SQL, Library, ML ë“± ë¼ì´ë¸ŒëŸ¬ë¦¬ ì œê³µ</li></ul><h3 id="1-1-ì•„íŒŒì¹˜-ìŠ¤íŒŒí¬ì˜-ì² í•™"><a href="#1-1-ì•„íŒŒì¹˜-ìŠ¤íŒŒí¬ì˜-ì² í•™" class="headerlink" title="1.1 ì•„íŒŒì¹˜ ìŠ¤íŒŒí¬ì˜ ì² í•™"></a>1.1 ì•„íŒŒì¹˜ ìŠ¤íŒŒí¬ì˜ ì² í•™</h3><blockquote><p><strong>ë¹…ë°ì´í„°ë¥¼ ìœ„í•œ í†µí•© ì»´í“¨íŒ… ì—”ì§„ê³¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì§‘í•©.</strong></p></blockquote><ul><li>í†µí•© (unified)<ul><li>ë‹¤ì–‘í•œ ì²˜ë¦¬ ìœ í˜•ì„ ì§€ì›í•˜ê¸° ìœ„í•œ ìì²´ API</li></ul></li><li>ì»´í“¨íŒ… ì—”ì§„<ul><li>ìŠ¤íŒŒí¬ëŠ” ë°ì´í„° ì €ì¥ ìœ„ì¹˜ì— ìƒê´€ì—†ì´ ì²˜ë¦¬ì— ì§‘ì¤‘</li><li>vs í•˜ë‘¡<ul><li>í•˜ë‘¡ì€ ì €ë¹„ìš© ì €ì¥ì¥ì¹˜ë¥¼ ì‚¬ìš©í•˜ëŠ” í•˜ë‘¡ íŒŒì¼ ì‹œìŠ¤í…œê³¼ ì»´í“¨íŒ… ì‹œìŠ¤í…œ(MR) ì´ ë°€ì ‘í•˜ê²Œ ì—°ê´€</li><li>ìŠ¤íŒŒí¬ëŠ” í•˜ë‘¡ ì €ì¥ì†Œ ë¿ë§Œ ì•„ë‹ˆë¼ í•˜ë‘¡ ì•„í‚¤í…ì²˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” í™˜ê²½ì—ì„œë„ í˜¸í™˜ ê°€ëŠ¥</li></ul></li></ul></li><li>ë¼ì´ë¸ŒëŸ¬ë¦¬<ul><li>ê¶ê·¹ì ìœ¼ë¡  ë°ì´í„° ë¶„ì„ ì‘ì—…ì— í•„ìš”í•œ í†µí•© APIë¥¼ ì œê³µí•˜ëŠ” í†µí•© ì—”ì§„ ê¸°ë°˜ì˜ ìì²´ ë¼ì´ë¸ŒëŸ¬ë¦¬</li><li>ìˆ˜ë§ì€ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë„.. (<a href="https://spark-packages.org/">https://spark-packages.org/</a>)</li></ul></li></ul><h3 id="1-2-ìŠ¤íŒŒí¬ì˜-ë“±ì¥-ë°°ê²½"><a href="#1-2-ìŠ¤íŒŒí¬ì˜-ë“±ì¥-ë°°ê²½" class="headerlink" title="1.2 ìŠ¤íŒŒí¬ì˜ ë“±ì¥ ë°°ê²½"></a>1.2 ìŠ¤íŒŒí¬ì˜ ë“±ì¥ ë°°ê²½</h3><ul><li>ë” ë§ì€ ì—°ì‚°ê³¼ ëŒ€ê·œëª¨ ë°ì´í„° ì²˜ë¦¬ë¥¼ í”„ë¡œì„¸ì„œì˜ ì„±ëŠ¥ í–¥ìƒì— ë§¡ê²¼ìœ¼ë‚˜, H/W ì„±ëŠ¥ í–¥ìƒì€ 2005ë…„ê¹Œì§€</li><li>ê¸°ìˆ ì˜ ë°œì „ìœ¼ë¡œ ë°ì´í„° ìˆ˜ì§‘ ë¹„ìš©ì€ ì €ë ´í•´ì¡Œì§€ë§Œ ë°ì´í„°ëŠ” í´ëŸ¬ìŠ¤í„°ì—ì„œ ì²˜ë¦¬í•´ì•¼í•  ë§Œí¼ ê±°ëŒ€í•´ì§</li><li>ìƒˆë¡œìš´ í”„ë¡œê·¸ë˜ë° ëª¨ë¸ì´ í•„ìš” =&gt; <strong>ì•„íŒŒì¹˜ ìŠ¤íŒŒí¬</strong></li></ul><h3 id="1-3-ìŠ¤íŒŒí¬ì˜-ì—­ì‚¬"><a href="#1-3-ìŠ¤íŒŒí¬ì˜-ì—­ì‚¬" class="headerlink" title="1.3 ìŠ¤íŒŒí¬ì˜ ì—­ì‚¬"></a>1.3 ìŠ¤íŒŒí¬ì˜ ì—­ì‚¬</h3><ul><li>UCë²„í´ë¦¬ ëŒ€í•™ì—ì„œ 2009ë…„ í”„ë¡œì íŠ¸ë¡œ ì‹œì‘<ul><li>ë‹¹ì‹œ í•˜ë‘¡ ë§µë¦¬ë“€ìŠ¤ê°€ í´ëŸ¬ìŠ¤í„° í™˜ê²½ìš© ë³‘ë ¬ í”„ë¡œê·¸ë˜ë° ì—”ì§„ì˜ ëŒ€í‘œì£¼ì</li></ul></li><li>â€˜í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬â€™ í˜•íƒœì˜ êµ¬í˜„ ë°©ì‹<ul><li>ì¡°í•©í˜• APIì˜ í•µì‹¬ ì•„ì´ë””ì–´ ì§„í™”</li><li>~ 1.0 : í•¨ìˆ˜í˜• ì—°ì‚°</li><li>1.0 : êµ¬ì¡°í™”ëœ ë°ì´í„° ê¸°ë°˜ì˜ ìŠ¤íŒŒí¬ SQL</li><li>ì´ í›„ì—ëŠ” ë” ê°•ë ¥í•œ êµ¬ì¡°ì²´ ê¸°ë°˜ì˜ ì‹ ê·œ API ë“¤ (ex. DataFrame, ë¨¸ì‹ ëŸ¬ë‹ íŒŒì´í”„ë¼ì¸, êµ¬ì¡°ì  ìŠ¤íŠ¸ë¦¬ë°)</li></ul></li></ul><h3 id="1-4-ìŠ¤íŒŒí¬ì˜-í˜„ì¬ì™€-ë¯¸ë˜"><a href="#1-4-ìŠ¤íŒŒí¬ì˜-í˜„ì¬ì™€-ë¯¸ë˜" class="headerlink" title="1.4 ìŠ¤íŒŒí¬ì˜ í˜„ì¬ì™€ ë¯¸ë˜"></a>1.4 ìŠ¤íŒŒí¬ì˜ í˜„ì¬ì™€ ë¯¸ë˜</h3><ul><li>ê±°ëŒ€ ê·œëª¨ ë°ì´í„°ì…‹ì´ë‚˜ ê³¼í•™ì  ë°ì´í„° ë¶„ì„ì— ì‚¬ìš© ì¤‘</li><li>ì¸ê¸° ë§ë‹¤ëŠ” ì´ì•¼ê¸°</li></ul><h3 id="1-5-ìŠ¤íŒŒí¬-ì‹¤í–‰í•˜ê¸°-gt-ë¶€ë¡-A"><a href="#1-5-ìŠ¤íŒŒí¬-ì‹¤í–‰í•˜ê¸°-gt-ë¶€ë¡-A" class="headerlink" title="1.5 ìŠ¤íŒŒí¬ ì‹¤í–‰í•˜ê¸° -&gt; ë¶€ë¡ A"></a>1.5 ìŠ¤íŒŒí¬ ì‹¤í–‰í•˜ê¸° -&gt; ë¶€ë¡ A</h3><blockquote><p><em>â€¦ íŠ¹íˆ ë„ì»¤ í™˜ê²½ì—ì„œ ì˜ˆì œë¥¼ ì‹¤í–‰í•´ë³´ê³  ì‹¶ë‹¤ë©´ ë¶€ë¡ Aë¥¼ ì°¸ê³ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</em></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker pull docker.io/rheor108/spark_the_definitive_guide_practice</span><br><span class="line">$ docker run -p 8080:8080 -p 4040:4040 --name spark_ex rheor108/spark_the_definitive_guide_practice</span><br><span class="line"><span class="comment"># Zeppelin UI : http://localhost:8080 </span></span><br></pre></td></tr></table></figure><blockquote><p>[ë¶€ë¡ A] Spark The Definitive Guide ì˜ˆì œ ì‹¤í–‰ í™˜ê²½ Docker image</p><ul><li><p><a href="https://hub.docker.com/r/rheor108/spark_the_definitive_guide_practice">https://hub.docker.com/r/rheor108/spark_the_definitive_guide_practice</a></p></li><li><p>Spark version: 2.3.2 Python version: 2.7 Zeppelin version: 0.8.0 (21.01 ê¸°ì¤€)</p></li></ul><p>Spark The Definitive Guide ì €ì¥ì†Œ</p><ul><li>ì›ì„œ : <a href="https://github.com/databricks/Spark-The-Definitive-Guide">https://github.com/databricks/Spark-The-Definitive-Guide</a></li><li>ë²ˆì—­ ì˜ˆì œ : <a href="https://github.com/FVBros/Spark-The-Definitive-Guide">https://github.com/FVBros/Spark-The-Definitive-Guide</a></li></ul></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Docker image ì‹¤í–‰í•˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ /spark-2.3.2-bin-hadoop2.7/bin ì— ëŒ€í™”í˜• ì½˜ì†” ì¡´ì¬</span></span><br><span class="line"><span class="comment"># + 2.4.7 ë‹¤ìš´ë¡œë“œ ë°›ê¸°</span></span><br><span class="line">wget https://downloads.apache.org/spark/spark-2.4.7/spark-2.4.7-bin-hadoop2.7.tgz</span><br><span class="line">tar -xf spark-2.4.7-bin-hadoop2.7.tgz</span><br></pre></td></tr></table></figure><h3 id="1-6-ì •ë¦¬"><a href="#1-6-ì •ë¦¬" class="headerlink" title="1.6 ì •ë¦¬"></a>1.6 ì •ë¦¬</h3><ul><li>ìŠ¤íŒŒí¬ì˜ ê°œìš” / íƒ„ìƒ ë°°ê²½ / í™˜ê²½ êµ¬ì„± ë°©ë²•</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;br/&gt;

&lt;h4 id=&quot;â€˜Spark-The-Definitive-Guideâ€™&quot;&gt;&lt;a href=&quot;#â€˜Spark-The-Definitive-Guideâ€™&quot; class=&quot;headerlink&quot; title=&quot;â€˜Spark The Definitive Guideâ€™&quot;</summary>
      
    
    
    
    <category term="spark" scheme="https://minsw.github.io/categories/spark/"/>
    
    
    <category term="mwolkka" scheme="https://minsw.github.io/tags/mwolkka/"/>
    
    <category term="study" scheme="https://minsw.github.io/tags/study/"/>
    
    <category term="book" scheme="https://minsw.github.io/tags/book/"/>
    
    <category term="summarization" scheme="https://minsw.github.io/tags/summarization/"/>
    
    <category term="spark" scheme="https://minsw.github.io/tags/spark/"/>
    
    <category term="apache" scheme="https://minsw.github.io/tags/apache/"/>
    
  </entry>
  
  <entry>
    <title>Hexo ë¸”ë¡œê·¸ ì‹¬íì†Œìƒìˆ í•˜ê¸°</title>
    <link href="https://minsw.github.io/2021/01/18/Hexo-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EC%8B%AC%ED%8F%90%EC%86%8C%EC%83%9D%EC%88%A0%ED%95%98%EA%B8%B0/"/>
    <id>https://minsw.github.io/2021/01/18/Hexo-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EC%8B%AC%ED%8F%90%EC%86%8C%EC%83%9D%EC%88%A0%ED%95%98%EA%B8%B0/</id>
    <published>2021-01-17T16:33:39.000Z</published>
    <updated>2021-01-24T18:11:30.110Z</updated>
    
    <content type="html"><![CDATA[<p>2019ë…„ì—ì„œ ë©ˆì¶°ë²„ë¦° ë¸”ë¡œê·¸ í•œë²ˆ ì‚´ë ¤ ë³´ë ¤ë‹¤ê°€<br>ë¸”ë¡œê·¸ë¥¼ í†µì§¸ë¡œ ë‚ ë ¤ë²„ë¦´ ë»”í•˜ê³  (..) ê·¸ëƒ¥ ë‚ ë ¤ë²„ë¦¬ë ¤ë‹¤ ë³µêµ¬í–ˆë‹¤.</p><p>í˜¹ì‹œë¼ë„ ë‚˜ì²˜ëŸ¼ Në…„ ì „ì— ë§Œë“  hexo ë¸”ë¡œê·¸ë¥¼ ë˜ì‚´ë ¤ë³´ê² ë‹¤ëŠ” ì‚¬ëŒì„ ìœ„í•´ì„œ<br> + ì‚¬ì‹¤ì€ Në…„ ë’¤ì— ë˜‘ê°™ì´ ì‚½ì§ˆí•  ë‚˜ë¥¼ ìœ„í•´ì„œ ì •ë¦¬í•´ë³¸ë‹¤.</p><img width="287" alt="cpr" src="https://user-images.githubusercontent.com/26691216/104849937-d5c93380-592f-11eb-965a-261b6fe48519.png"><br/><h1 id="ë°©ì¹˜ëœ-Hexo-Blog-ì‚´ë¦¬ê¸°"><a href="#ë°©ì¹˜ëœ-Hexo-Blog-ì‚´ë¦¬ê¸°" class="headerlink" title="ë°©ì¹˜ëœ Hexo Blog ì‚´ë¦¬ê¸°"></a>ë°©ì¹˜ëœ Hexo Blog ì‚´ë¦¬ê¸°</h1><h2 id="Hexo-3-8-0-gt-5-3-0-ì—…ê·¸ë ˆì´ë“œ"><a href="#Hexo-3-8-0-gt-5-3-0-ì—…ê·¸ë ˆì´ë“œ" class="headerlink" title="Hexo 3.8.0 -&gt; 5.3.0 ì—…ê·¸ë ˆì´ë“œ"></a>Hexo 3.8.0 -&gt; 5.3.0 ì—…ê·¸ë ˆì´ë“œ</h2><p>2019.03 ê¸°ì¤€ <code>3.8.0</code> =&gt; 2021.01 ê¸°ì¤€ ìµœì‹  ë²„ì „ <code>5.3.0</code></p><h4 id="0-npm-upgrade"><a href="#0-npm-upgrade" class="headerlink" title="0. npm upgrade"></a>0. npm upgrade</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g npm</span><br></pre></td></tr></table></figure><h4 id="1-Hexo-ì¬ì„¤ì¹˜"><a href="#1-Hexo-ì¬ì„¤ì¹˜" class="headerlink" title="1. Hexo ì¬ì„¤ì¹˜"></a>1. Hexo ì¬ì„¤ì¹˜</h4><blockquote><p><a href="https://github.com/hexojs/hexo">hexojs/hexo</a> ì°¸ê³ </p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexp-cli -g</span><br></pre></td></tr></table></figure><h4 id="2-ì´ë¯¸-ë¸”ë¡œê·¸ê°€-ìˆìœ¼ë‹ˆê¹Œ-hexo-init-ì€-ìŠ¤í‚µ"><a href="#2-ì´ë¯¸-ë¸”ë¡œê·¸ê°€-ìˆìœ¼ë‹ˆê¹Œ-hexo-init-ì€-ìŠ¤í‚µ" class="headerlink" title="2. ì´ë¯¸ ë¸”ë¡œê·¸ê°€ ìˆìœ¼ë‹ˆê¹Œ hexo init ì€ ìŠ¤í‚µ?"></a>2. ì´ë¯¸ ë¸”ë¡œê·¸ê°€ ìˆìœ¼ë‹ˆê¹Œ <code>hexo init</code> ì€ ìŠ¤í‚µ?</h4><p>ë‚´ ë ˆí¬ì— ìˆëŠ” package.json ìì²´ê°€ ì˜›ë‚  ë²„ì „ì´ë¼ ê·¸ëŒ€ë¡œ npm install í•˜ë ¤ë©´ ì‹¤íŒ¨í•˜ê¸°ë„<br>â‡’ <strong>ìµœì‹  ë²„ì „ package.json</strong> ìœ¼ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ í•„ìš”</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init blog</span><br><span class="line">$ cp blog/package.json <span class="variable">$&#123;MY_GIT_BLOG_PATH&#125;</span> <span class="comment"># ìµœì‹  package.json ìœ¼ë¡œ ë®ì–´ì“°ê¸°</span></span><br><span class="line">$ <span class="built_in">cd</span> <span class="variable">$&#123;MY_GIT_BLOG_PATH&#125;</span> &amp;&amp; npm install</span><br></pre></td></tr></table></figure><ul><li>ê¸°ì¡´ package.json, package-lock.json, node_modules/ ë“± ì œê±°</li><li>ìµœì‹  â€˜package.jsonâ€™ copy í›„ <code>npm install</code> (í•„ìš”í•œ ì˜ì¡´ì„±ì€ <code>npm install &#123;&#125; --save</code> ë¡œ ë³„ë„ ì¶”ê°€)</li><li><code>_config.yml</code> ë„ ë¹„êµ í›„ ë³€ê²½ ì‚¬í•­ ìˆì„ ì‹œ ì ìš© (Option)</li></ul><br/><h2 id="ë„ˆë¬´-ì‰¬ìš´ë°-ë­ê°€-ë¬¸ì œì§€"><a href="#ë„ˆë¬´-ì‰¬ìš´ë°-ë­ê°€-ë¬¸ì œì§€" class="headerlink" title="ë„ˆë¬´ ì‰¬ìš´ë° ë­ê°€ ë¬¸ì œì§€?"></a>ë„ˆë¬´ ì‰¬ìš´ë° ë­ê°€ ë¬¸ì œì§€?</h2><blockquote><h4 id="ìµœì‹ -ë²„ì „-Hexo-2ë…„ì „ì—-ì ìš©í•œ-í…Œë§ˆ-ğŸ’©"><a href="#ìµœì‹ -ë²„ì „-Hexo-2ë…„ì „ì—-ì ìš©í•œ-í…Œë§ˆ-ğŸ’©" class="headerlink" title="ìµœì‹  ë²„ì „ Hexo + 2ë…„ì „ì— ì ìš©í•œ í…Œë§ˆ = ğŸ’©"></a>ìµœì‹  ë²„ì „ Hexo + 2ë…„ì „ì— ì ìš©í•œ í…Œë§ˆ = ğŸ’©</h4><p>2ë…„ì „ì— ì˜ˆì˜ë‹¤ê³  ì ìš©í•´ë†“ì€ í…Œë§ˆê°€ ì§€ê¸ˆë„ ìœ ì§€ë³´ìˆ˜ë˜ê³  ìˆì„ ê°€ëŠ¥ì„±ì€ 0ì— ê°€ê¹ë‹¤.<br>í¬ê¸°í•˜ê³  ìƒˆ í…Œë§ˆë¥¼ ì°¾ê±°ë‚˜, <strong>ì–´ê±°ì§€ë¡œ ì ìš©í•˜ê±°ë‚˜ â˜ ï¸</strong><br>ë‘˜ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ë„ë¡ í•˜ì.</p></blockquote><h4 id="ë¬¸ì œ-1-ì„œë²„ë¥¼-ì˜¬ë ¸ë”ë‹ˆ-í°-í™”ë©´ë§Œ-ë‚˜ì˜¨ë‹¤"><a href="#ë¬¸ì œ-1-ì„œë²„ë¥¼-ì˜¬ë ¸ë”ë‹ˆ-í°-í™”ë©´ë§Œ-ë‚˜ì˜¨ë‹¤" class="headerlink" title="ë¬¸ì œ 1. ì„œë²„ë¥¼ ì˜¬ë ¸ë”ë‹ˆ í° í™”ë©´ë§Œ ë‚˜ì˜¨ë‹¤"></a>ë¬¸ì œ 1. ì„œë²„ë¥¼ ì˜¬ë ¸ë”ë‹ˆ í° í™”ë©´ë§Œ ë‚˜ì˜¨ë‹¤</h4><p>â‡’ themes/ ì— ë³¸ì¸ì´ ì§€ì •í•œ í…Œë§ˆê°€ ì œëŒ€ë¡œ ìˆëŠ”ì§€ ì¬í™•ì¸ (.gitignore ë¡œ ë¹¼ë†“ê¸°ë„ í•¨)</p><h4 id="ë¬¸ì œ-2-ë­ê°€-ë‚˜ì˜¤ê¸´-í•˜ëŠ”ë°-í…ìŠ¤íŠ¸ê°€-ë‚˜ì˜¨ë‹¤"><a href="#ë¬¸ì œ-2-ë­ê°€-ë‚˜ì˜¤ê¸´-í•˜ëŠ”ë°-í…ìŠ¤íŠ¸ê°€-ë‚˜ì˜¨ë‹¤" class="headerlink" title="ë¬¸ì œ 2. ë­ê°€ ë‚˜ì˜¤ê¸´ í•˜ëŠ”ë°.. í…ìŠ¤íŠ¸ê°€ ë‚˜ì˜¨ë‹¤"></a>ë¬¸ì œ 2. ë­ê°€ ë‚˜ì˜¤ê¸´ í•˜ëŠ”ë°.. í…ìŠ¤íŠ¸ê°€ ë‚˜ì˜¨ë‹¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># index.html</span></span><br><span class="line">extends partial/layout</span><br><span class="line"></span><br><span class="line">block container</span><br><span class="line">    include mixins/post</span><br><span class="line">    +posts()</span><br><span class="line">...</span><br></pre></td></tr></table></figure><img width="636" alt="error" src="https://user-images.githubusercontent.com/26691216/104851421-407e6d00-5938-11eb-97f5-4d041b5abdf6.png"><p>jade ë˜ëŠ” pug í…œí”Œë¦¿ì„ ì‚¬ìš© ì¤‘ì¸ë° í•´ë‹¹í•˜ëŠ” renderer ê°€ ì—†ì–´ì„œ ë°œìƒ.</p><p>â‡’ ê¸°ì¡´ì—ëŠ” <del><a href="https://www.npmjs.com/package/hexo-renderer-jade">hexo-renderer-jade</a></del> ë¥¼ ì¼ìœ¼ë‚˜ deprecated ë˜ì—ˆìœ¼ë¯€ë¡œ,<br>themes/layout í•˜ìœ„ì˜ ëª¨ë“  <code>*.jade</code> íŒŒì¼ì„ <code>*.pug</code> ë¡œ ë³€ê²½ + <a href="https://www.npmjs.com/package/hexo-renderer-pug">hexo-renderer-pug</a> ì‚¬ìš©</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-renderer-pug --save</span><br></pre></td></tr></table></figure><h4 id="ë¬¸ì œ-3-ë°°í¬ê°€-ì•ˆëœë‹¤-amp-ì´ìƒí•˜ê²Œ-ì˜¬ë¼ê°„ë‹¤"><a href="#ë¬¸ì œ-3-ë°°í¬ê°€-ì•ˆëœë‹¤-amp-ì´ìƒí•˜ê²Œ-ì˜¬ë¼ê°„ë‹¤" class="headerlink" title="ë¬¸ì œ 3. ë°°í¬ê°€ ì•ˆëœë‹¤ &amp; ì´ìƒí•˜ê²Œ ì˜¬ë¼ê°„ë‹¤"></a>ë¬¸ì œ 3. ë°°í¬ê°€ ì•ˆëœë‹¤ &amp; ì´ìƒí•˜ê²Œ ì˜¬ë¼ê°„ë‹¤</h4><p><a href="https://www.npmjs.com/package/hexo-deployer-git">hexo-deployer-git</a> ì´ ì˜ ì„¤ì¹˜ë˜ì–´ìˆëŠ”ì§€ í™•ì¸.</p><p>ì˜ ì„¤ì¹˜ë˜ì–´ìˆê³  <code>hexo deploy</code>ê°€ ë˜ê¸´í•˜ëŠ”ë°<br>ì •ì  íŒŒì¼ë§ê³  ì†ŒìŠ¤ì½”ë“œê°€ ì˜¬ë¼ê°„ë‹¤ë˜ì§€ ë­”ê°€ ì—‰ì¼°ë‹¤ë©´ <strong>.deploy_git</strong> ì‚­ì œ í›„ ì¬ì‹œë„ ì¶”ì²œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ rm -rf .deploy_git <span class="comment"># reset</span></span><br></pre></td></tr></table></figure><br/><h2 id="í•´ì¹˜ì› ë‚˜"><a href="#í•´ì¹˜ì› ë‚˜" class="headerlink" title="í•´ì¹˜ì› ë‚˜.."></a>í•´ì¹˜ì› ë‚˜..</h2><p>ì´ í¬ìŠ¤íŠ¸ê°€ ì˜ ì˜¬ë¼ê°„ë‹¤ë©´ ì˜ ì‚´ì•„ë‚œê±°ë¼ ë³¼ ìˆ˜ ìˆê² ë‹¤.<br>ì‚¬ì‹¤ ì–´ì°Œì €ì°Œ ëŒì•„ê°€ê²Œë§Œ ë§Œë“¤ì–´ ë†“ì€ì§€ë¼ ì–¸ì œ ë‹¤ì‹œ ë»—ì„ì§€ëŠ” ëª¨ë¥´ê² ì§€ë§Œ<br>ìì£¼ ì“°ê²Œ ëœë‹¤ë©´ ì“°ë©´ì„œ ì¡°ê¸ˆì”© ê³ ì³ê°€ë©´ ë˜ì§€ ì•Šì„ê¹Œ í•œë‹¤.</p><p>ì˜¬í•´ëŠ” ê³µë¶€í•œ ê²ƒë„ ì¢€ ì˜ ì •ë¦¬í•´ì„œ ê¸°ë¡ í•´ë³´ë„ë¡ ë…¸ë ¥í•˜ì.</p><blockquote><p>í•˜ë‚˜ ë‘˜ ì…‹ í™”ì´íŒ…! Ù©( á› )Ùˆ</p></blockquote><br/><h2 id="ì°¸ê³ ìš©-âœğŸ»-ëŒì•„ì„œë©´-ê¹Œë¨¹ëŠ”-Hexo-ì‚¬ìš©ë²•"><a href="#ì°¸ê³ ìš©-âœğŸ»-ëŒì•„ì„œë©´-ê¹Œë¨¹ëŠ”-Hexo-ì‚¬ìš©ë²•" class="headerlink" title="[ì°¸ê³ ìš©] âœğŸ» ëŒì•„ì„œë©´ ê¹Œë¨¹ëŠ” Hexo ì‚¬ìš©ë²•"></a>[ì°¸ê³ ìš©] âœğŸ» ëŒì•„ì„œë©´ ê¹Œë¨¹ëŠ” Hexo ì‚¬ìš©ë²•</h2><blockquote><p><a href="https://hexo.io/ko/docs/commands.html">Hexo docs - commands</a></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;NEW_POST_NAME&quot;</span> <span class="comment"># new post ì‘ì„±</span></span><br><span class="line"></span><br><span class="line">$ hexo generate <span class="comment"># ì •ì  íŒŒì¼ (public) ìƒì„±</span></span><br><span class="line">$ hexo clean <span class="comment"># ìºì‹œ ë° ì •ì  íŒŒì¼ ì‚­ì œ</span></span><br><span class="line"></span><br><span class="line">$ hexo server <span class="comment"># ë¡œì»¬ ì„œë²„ (localhost:4000) êµ¬ë™ _ í…ŒìŠ¤íŠ¸</span></span><br><span class="line">$ hexo deploy <span class="comment"># ì›¹ ì‚¬ì´íŠ¸ deploy</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># hexo d -g ë„ ê°€ëŠ¥í•˜ì§€ë§Œ ë‚´ ë¸”ë¡œê·¸ëŠ” ê°€ë” ì´ìƒí•˜ê²Œ ë Œë”ë§ë˜ê¸°ë„í•˜ë‹ˆ ì•„ë˜ ì»¤ë§¨ë“œë¡œ ë°°í¬í•  ê²ƒ</span></span><br><span class="line">$ hexo clean &amp;&amp; hexo generate &amp;&amp; hexo deploy</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;2019ë…„ì—ì„œ ë©ˆì¶°ë²„ë¦° ë¸”ë¡œê·¸ í•œë²ˆ ì‚´ë ¤ ë³´ë ¤ë‹¤ê°€&lt;br&gt;ë¸”ë¡œê·¸ë¥¼ í†µì§¸ë¡œ ë‚ ë ¤ë²„ë¦´ ë»”í•˜ê³  (..) ê·¸ëƒ¥ ë‚ ë ¤ë²„ë¦¬ë ¤ë‹¤ ë³µêµ¬í–ˆë‹¤.&lt;/p&gt;
&lt;p&gt;í˜¹ì‹œë¼ë„ ë‚˜ì²˜ëŸ¼ Në…„ ì „ì— ë§Œë“  hexo ë¸”ë¡œê·¸ë¥¼ ë˜ì‚´ë ¤ë³´ê² ë‹¤ëŠ” ì‚¬ëŒì„ ìœ„í•´ì„œ&lt;br&gt; + ì‚¬ì‹¤ì€ Në…„ ë’¤ì— </summary>
      
    
    
    
    <category term="blog" scheme="https://minsw.github.io/categories/blog/"/>
    
    
    <category term="blog" scheme="https://minsw.github.io/tags/blog/"/>
    
    <category term="hexo" scheme="https://minsw.github.io/tags/hexo/"/>
    
    <category term="CPR" scheme="https://minsw.github.io/tags/CPR/"/>
    
    <category term="guide" scheme="https://minsw.github.io/tags/guide/"/>
    
  </entry>
  
  <entry>
    <title>&amp;#039;Kotlin in Action&amp;#039; 1ì¥ - Kotlin (ì½”í‹€ë¦°) ì€ ë­˜ê¹Œ</title>
    <link href="https://minsw.github.io/2019/07/02/Kotlin-in-Action-1%EC%9E%A5/"/>
    <id>https://minsw.github.io/2019/07/02/Kotlin-in-Action-1%EC%9E%A5/</id>
    <published>2019-07-02T14:07:55.000Z</published>
    <updated>2021-01-24T18:11:30.111Z</updated>
    
    <content type="html"><![CDATA[<br/><h4 id="â€˜Kotlin-in-Actionâ€™"><a href="#â€˜Kotlin-in-Actionâ€™" class="headerlink" title="â€˜Kotlin in Actionâ€™"></a>â€˜Kotlin in Actionâ€™</h4><p>ê³µë¶€ ê²¸ í”„ë¡œì íŠ¸ ì¤€ë¹„ ê²¸ Kotlin ì±…ì„ í•˜ë‚˜ ìƒ€ë‹¤.<br><strong><em>â€˜Kotlin in Actionâ€™</em></strong> ì€ Kotlin ì–¸ì–´ë¥¼ ê°œë°œí•œ JetBrains ê°œë°œìë“¤ì´ ì§ì ‘ ì“´ ì±…ìœ¼ë¡œ, <u>Kotlin ë‹¤ìš´ Kotlin ê°œë°œ</u>ì„ í•˜ê¸° ìœ„í•´ ì²« ë‹¨ì¶”ë¡œ íƒí–ˆë‹¤.<br>ë‚´ê°€ ì±… ì½ëŠ” ì†ë„ëŠ” ë¹ ë¥¸ë° ë¨¸ë¦¬ì—ì„œ íœ˜ë°œë˜ëŠ” ì†ë„ë„ ë¹ ë¥¸ í¸ì´ë¼(â€¦) ì‹œê°„ ë‚  ë•Œ ë§ˆë‹¤ ì½ì€ ë¶€ë¶„ì€ ì°¨ê·¼ì°¨ê·¼ ì •ë¦¬ í•´ë‘ë ¤ê³  í•œë‹¤. </p><blockquote><p><strong>Kotlin</strong>ì€ <em>ìµœì‹  ë©€í‹°í”Œë«í¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ ì •ì  íƒ€ì… ì–¸ì–´</em> ë¡œ,<br>2017 Google I/Oì—ì„œ ì•ˆë“œë¡œì´ë“œ ê³µì‹ì–¸ì–´ë¡œ ì„ ì •ë˜ì—ˆê³  í˜„ì¬ 1.3 ë²„ì „ê¹Œì§€ ë¦´ë¦¬ì¦ˆ ë˜ì–´ìˆë‹¤.</p><p>Kotlin ê³µì‹ í˜ì´ì§€ <a href="https://kotlinlang.org/">https://kotlinlang.org/</a></p></blockquote><center><h2>_ _ _</h2></center><br/><hr><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><h4 id="Java-ë¥¼-ëŒ€ì‹ í• -ì–¸ì–´ì—-ëŒ€í•œ-Requirement-3ê°€ì§€"><a href="#Java-ë¥¼-ëŒ€ì‹ í• -ì–¸ì–´ì—-ëŒ€í•œ-Requirement-3ê°€ì§€" class="headerlink" title="Java ë¥¼ ëŒ€ì‹ í•  ì–¸ì–´ì— ëŒ€í•œ Requirement 3ê°€ì§€"></a>Java ë¥¼ ëŒ€ì‹ í•  ì–¸ì–´ì— ëŒ€í•œ Requirement 3ê°€ì§€</h4><ol><li>ì •ì  íƒ€ì… ì§€ì • (static typing)</li><li>ê¸°ì¡´ ìë°” ì½”ë“œì™€ì˜ ì™„ì „í•œ í˜¸í™˜ì„±</li><li>í•´ë‹¹ ì–¸ì–´ë¥¼ ìœ„í•œ ë„êµ¬ ê°œë°œ ë³µì¡ì„± x</li></ol><p>â‡’ ë°°ìš°ê³  ì´í•´í•˜ê¸° ì‰¬ìš°ë©° ëŒ€ê·œëª¨ ê°œë°œ/ìœ ì§€ë³´ìˆ˜ì„±/ê¸°ì¡´ ìë°”ì™€ì˜ í˜¸í™˜ì„±ì— ì í•©í•œ ê°•ë ¥í•œ ì–¸ì–´, <u><strong>â€˜Kotlinâ€™</strong></u></p><br/><h1 id="1ì¥-ì½”í‹€ë¦°ì´ë€-ë¬´ì—‡ì´ë©°-ì™œ-í•„ìš”í•œê°€"><a href="#1ì¥-ì½”í‹€ë¦°ì´ë€-ë¬´ì—‡ì´ë©°-ì™œ-í•„ìš”í•œê°€" class="headerlink" title="1ì¥. ì½”í‹€ë¦°ì´ë€, ë¬´ì—‡ì´ë©° ì™œ í•„ìš”í•œê°€?"></a>1ì¥. ì½”í‹€ë¦°ì´ë€, ë¬´ì—‡ì´ë©° ì™œ í•„ìš”í•œê°€?</h1><p>Kotlinì€ ìë°” í”Œë«í¼ì—ì„œ ëŒì•„ê°€ëŠ” ìƒˆë¡œìš´ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë‹¤.<br><strong>ê°„ê²°í•˜ê³  ì‹¤ìš©ì </strong>ì´ë©° <strong>Java ì½”ë“œì™€ì˜ ìƒí˜¸ìš´ìš©ì„±</strong> (interoperability)ì„ ì¤‘ì‹œí•œë‹¤.</p><h2 id="íŠ¹ì„±"><a href="#íŠ¹ì„±" class="headerlink" title="íŠ¹ì„±"></a>íŠ¹ì„±</h2><h4 id="1-ëŒ€ìƒ-í”Œë«í¼-ìë°”ê°€-ì‹¤í–‰ë˜ëŠ”-Everywhere"><a href="#1-ëŒ€ìƒ-í”Œë«í¼-ìë°”ê°€-ì‹¤í–‰ë˜ëŠ”-Everywhere" class="headerlink" title="1. ëŒ€ìƒ í”Œë«í¼ : ìë°”ê°€ ì‹¤í–‰ë˜ëŠ” Everywhere"></a>1. ëŒ€ìƒ í”Œë«í¼ : ìë°”ê°€ ì‹¤í–‰ë˜ëŠ” Everywhere</h4><p>ì¼ë¶€ê°€ ì•„ë‹Œ ê°œë°œ ê³¼ì •ì—ì„œ ìˆ˜í–‰í•´ì•¼í•˜ëŠ” ëª¨ë“  ê³¼ì—…ì— ìˆì–´ í­ë„“ê²Œ ìƒì‚°ì„±ì„ í–¥ìƒ ì‹œí‚¨ë‹¤.<br>êµ¬ì²´ì ì¸ ì˜ì—­ or íŠ¹ì • í”„ë¡œê·¸ë¨ íŒ¨ëŸ¬ë‹¤ì„ì„ ì§€ì›í•˜ëŠ” ì—¬ëŸ¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ì˜ ìœµí•©ì„± â†‘</p><br/><h4 id="2-ì •ì -íƒ€ì…-ì§€ì •-ì–¸ì–´"><a href="#2-ì •ì -íƒ€ì…-ì§€ì •-ì–¸ì–´" class="headerlink" title="2. ì •ì  íƒ€ì… ì§€ì • ì–¸ì–´"></a>2. ì •ì  íƒ€ì… ì§€ì • ì–¸ì–´</h4><p>Kotlinì€ <strong>ì •ì  íƒ€ì… ì§€ì • ì–¸ì–´</strong> ì´ë©´ì„œ, <u>type inference</u> (íƒ€ì…ì¶”ë¡ ) ê³¼ <u>nullable type</u>ì„ ì§€ì›í•œë‹¤.<br>â‡’ í”„ë¡œê·¸ë˜ë¨¸ì˜ ë¶ˆí¸í•¨ í•´ì†Œ &amp; ì»´íŒŒì¼ ì‹œì ì— NPE ì—¬ë¶€ ê²€ì‚¬ ê°€ëŠ¥</p><ul><li><p><strong>ì •ì  íƒ€ì…</strong> (statically typed) ì§€ì • ì–¸ì–´ : Java, Kotlin ..</p><blockquote><p>ëª¨ë“  í”„ë¡œê·¸ë¨ êµ¬ì„± ìš”ì†Œ íƒ€ì…ì„ ì»´íŒŒì¼ ì‹œì ì— ì•Œ ìˆ˜ ìˆê³ , ê°ì²´ì˜ í•„ë“œë‚˜ ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•  ë•Œë§ˆë‹¤ ì»´íŒŒì¼ëŸ¬ê°€ íƒ€ì…ì„ ê²€ì¦í•œë‹¤.</p></blockquote><p>  ì¥ì  : ì„±ëŠ¥ / ì‹ ë¢°ì„± / ìœ ì§€ ë³´ìˆ˜ì„± / ë„êµ¬ ì§€ì› _ <code>p.36</code></p>  <br/></li><li><p><strong>ë™ì  íƒ€ì…</strong> (dynamically typed) ì§€ì • ì–¸ì–´ : Groovy, JRuby â€¦</p><blockquote><p>íƒ€ì…ê³¼ ê´€ê³„ì—†ì´ ëª¨ë“  ê°’ì„ ë³€ìˆ˜ì— ë„£ì„ ìˆ˜ ìˆê³ , í•„ë“œë‚˜ ë©”ì†Œë“œ ì ‘ê·¼ì— ëŒ€í•œ ê²€ì¦ì´ ì‹¤í–‰ ì‹œì ì— ì¼ì–´ë‚œë‹¤. </p></blockquote><p>  ë™ì ì´ ë” ìœ ì—°í•˜ê³  ì½”ë“œë„ ì§§ì•„ì§€ì§€ë§Œ, ì˜¤ë¥˜ë¥¼ ì‚¬ì „ì— ê±°ë¥´ì§€ ëª»í•˜ê³  Runtime Error ë°œìƒ ê°€ëŠ¥ì„± ì¡´ì¬</p></li></ul><br/><h4 id="3-í•¨ìˆ˜í˜•-ê°ì²´ì§€í–¥-í”„ë¡œê·¸ë˜ë°"><a href="#3-í•¨ìˆ˜í˜•-ê°ì²´ì§€í–¥-í”„ë¡œê·¸ë˜ë°" class="headerlink" title="3. í•¨ìˆ˜í˜• / ê°ì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë°"></a>3. í•¨ìˆ˜í˜• / ê°ì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë°</h4><p>Kotlinìœ¼ë¡œ ì½”ë“œë¥¼ ì‘ì„± í•  ë•, Javaì™€ ê°™ì€ <u>ê°ì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë° (OOP)</u> ê³¼ <u>í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°</u> ì ‘ê·¼ ë°©ë²•ì„ ì¡°í•©í•´ì„œ ë¬¸ì œì— ê°€ì¥ ì í•©í•œ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.</p><blockquote><p><strong>í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°</strong> ì˜ í•µì‹¬ ê°œë…</p><ul><li>first-class function (ì¼ê¸‰ í•¨ìˆ˜)</li><li>immutability</li><li>no side effect _ pure function</li></ul></blockquote><br/><h4 id="4-ë¬´ë£Œ-ì˜¤í”ˆì†ŒìŠ¤"><a href="#4-ë¬´ë£Œ-ì˜¤í”ˆì†ŒìŠ¤" class="headerlink" title="4. ë¬´ë£Œ ì˜¤í”ˆì†ŒìŠ¤"></a>4. ë¬´ë£Œ ì˜¤í”ˆì†ŒìŠ¤</h4><p>Kotlin ì–¸ì–´ì™€ ì´ì™€ ê´€ë ¨ëœ ëª¨ë“  ë„êµ¬ëŠ” ì˜¤í”ˆì†ŒìŠ¤ì´ë‹¤.<br>(<a href="https://github.com/jetbrains/kotlin">https://github.com/jetbrains/kotlin</a> - Apache2 License.)</p><br/><h2 id="ì‘ìš©"><a href="#ì‘ìš©" class="headerlink" title="ì‘ìš©"></a>ì‘ìš©</h2><h4 id="ì½”í‹€ë¦°-ì„œë²„-í”„ë¡œê·¸ë˜ë°"><a href="#ì½”í‹€ë¦°-ì„œë²„-í”„ë¡œê·¸ë˜ë°" class="headerlink" title="ì½”í‹€ë¦° ì„œë²„ í”„ë¡œê·¸ë˜ë°"></a>ì½”í‹€ë¦° ì„œë²„ í”„ë¡œê·¸ë˜ë°</h4><blockquote><p><strong>ì„œë²„ í”„ë¡œê·¸ë˜ë°</strong> ì˜ ë²”ìœ„</p><ul><li>ë¸Œë¼ìš°ì €ì— HTML í˜ì´ì§€ë¥¼ ë°˜í™˜í•˜ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜</li><li>ëª¨ë°”ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ê²Œ HTTPë¥¼ í†µí•´ JSON APIë¥¼  </li><li>RPC (Remote Procedure Call) í”„ë¡œí† ì½œì„ í†µí•´ ì„œë¡œ í†µì‹ í•˜ëŠ” ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤</li></ul></blockquote><p>Kotlinì€ ì´ëŸ¬í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì— ë„ì›€ì„ ì£¼ëŠ” ê¸°ì¡´ì˜ ìë°” í”„ë ˆì„ì›Œí¬ë‚˜ ê¸°ìˆ ê³¼ ë§¤ë„ëŸ½ê²Œ ìƒí˜¸ìš´ìš© ê°€ëŠ¥í•˜ë‹¤.</p><p>+ ìƒˆë¡œìš´ ê¸°ìˆ ë„ ì ìš© ê°€ëŠ¥ (ex. Kotlinì˜ Builder Pattern, Persistence Framework â€¦)<br>  â‡’ <code>7.5ì ˆ</code> &amp; <code>11ì¥</code> ì—ì„œ ì¢€ ë” ìì„¸íˆ</p><br/><h4 id="ì½”í‹€ë¦°-ì•ˆë“œë¡œì´ë“œ-í”„ë¡œê·¸ë˜ë°"><a href="#ì½”í‹€ë¦°-ì•ˆë“œë¡œì´ë“œ-í”„ë¡œê·¸ë˜ë°" class="headerlink" title="ì½”í‹€ë¦° ì•ˆë“œë¡œì´ë“œ í”„ë¡œê·¸ë˜ë°"></a>ì½”í‹€ë¦° ì•ˆë“œë¡œì´ë“œ í”„ë¡œê·¸ë˜ë°</h4><p>ëª¨ë°”ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì „í˜•ì ì¸ ì—”í„°í”„ë¼ì´ì¦ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ë³´ë‹¤ ë” ì‘ê³  ê¸°ì¡´ê³¼ ì‹ ê·œ ì½”ë“œ í†µí•© í•„ìš”ì„±ë„ ë” ì ê³ , ë‹¤ì–‘í•œ ë””ë°”ì´ìŠ¤ì— ëŒ€í•œ ì„œë¹„ìŠ¤ ì‹ ë¢°ì„± ë³´ì¥ê³¼ ë¹ ë¥¸ ê°œë°œ&amp;ë°°í¬ê°€ í•„ìš”í•˜ë‹¤.</p><p>Kotlin ì–¸ì–´ì˜ íŠ¹ì„±ê³¼ íŠ¹ë³„í•œ ì»´íŒŒì¼ëŸ¬ í”ŒëŸ¬ê·¸ì¸ ì§€ì›ì„ ì¡°í•©í•˜ë©´ ê°œë°œ ìƒì‚°ì„±ì„ ë” ë†’ì¼ ìˆ˜ ìˆë‹¤.<br>ë¿ë§Œ ì•„ë‹ˆë¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹ ë¢°ì„± í–¥ìƒ, ìë°”6ì™€ ì™„ì „í•œ í˜¸í™˜, ì„±ëŠ¥ ì†ì‹¤ x ê³¼ ê°™ì€ ì¥ì ë„ ì·¨í•  ìˆ˜ ìˆë‹¤.</p><p>+ ì°¸ì¡° _ ì•ˆë“œë¡œì´ë“œ APIì— ëŒ€í•œ Kotlin Adaptorë¥¼ ì œê³µí•˜ê³  ìˆëŠ” <strong>Anko Library</strong> <a href="https://github.com/kotlin/anko">https://github.com/kotlin/anko</a></p><br/><h2 id="ì² í•™"><a href="#ì² í•™" class="headerlink" title="ì² í•™"></a>ì² í•™</h2><blockquote><p>ëŒ€ê°œ Kotlinì€ Javaì™€ì˜ <strong><em>ìƒí˜¸ìš´ìš©ì„±</em></strong> ì— ì´ˆì ì„ ë§ì¶˜ <strong><em>ì‹¤ìš©ì </em></strong> ì´ê³  <strong><em>ê°„ê²°</em></strong> í•˜ë©° <strong><em>ì•ˆì „í•œ</em></strong> ì–¸ì–´ë¡œ í‘œí˜„ëœë‹¤.</p></blockquote><h4 id="ì‹¤ìš©ì„±"><a href="#ì‹¤ìš©ì„±" class="headerlink" title="ì‹¤ìš©ì„±"></a>ì‹¤ìš©ì„±</h4><ul><li>ì—°êµ¬ë¥¼ ìœ„í•œ ì–¸ì–´ê°€ ì•„ë‹Œ, ì‹¤ì œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ì‹¤ìš©ì ì¸ ì–¸ì–´ì´ë‹¤.</li><li>íŠ¹ì • í”„ë¡œê·¸ë˜ë° ìŠ¤íƒ€ì¼ì´ë‚˜ íŒ¨ëŸ¬ë‹¤ì„ ì‚¬ìš©ì„ ê°•ì œí•˜ì§€ ì•ŠëŠ”ë‹¤.</li><li>ë„êµ¬ë¥¼ ê°•ì¡°í•œë‹¤. (IDE ì§€ì›)</li></ul><br/><h4 id="ê°„ê²°ì„±"><a href="#ê°„ê²°ì„±" class="headerlink" title="ê°„ê²°ì„±"></a>ê°„ê²°ì„±</h4><ul><li>ê¸°ì¡´ ì½”ë“œ ì´í•´ê°€ ë” ì‰¬ì›Œì§„ë‹¤. (â†’ ìƒì‚°ì„±ê³¼ ê°œë°œ ì†ë„ í–¥ìƒ)</li><li>ë¶€ìˆ˜ì ì¸ ìš”ì†Œë“±ì„ ë¬µì‹œì ìœ¼ë¡œ ì œê³µí•˜ì—¬ ì½”ë“œê°€ ê¹”ë”í•˜ë‹¤.</li><li>ëŒë‹¤ë¥¼ ì§€ì›í•œë‹¤.</li><li>ê·¸ëŸ¬ë‚˜ ì†ŒìŠ¤ì½”ë“œë¥¼ ê°€ëŠ¥í•œ ì§§ê²Œ ë§Œë“œëŠ” ê²ƒì´ ì½”í‹€ë¦°ì˜ ì„¤ê³„ ëª©í‘œëŠ” ì•„ë‹ˆë‹¤.</li></ul><br/><h4 id="ì•ˆì „ì„±"><a href="#ì•ˆì „ì„±" class="headerlink" title="ì•ˆì „ì„±"></a>ì•ˆì „ì„±</h4><p>  í”„ë¡œê·¸ë¨ì˜ ì•ˆì „ì„±ê³¼ ìƒì‚°ì„± ì‚¬ì´ì—ëŠ” trade-off ì¡´ì¬</p><ul><li>JVMì—ì„œ ì‹¤í–‰í•œë‹¤. (ë©”ëª¨ë¦¬ ì•ˆì „ì„±ê³¼ ë²„í¼ í”Œë¡œìš° ë°©ì§€ë“± ê¸°ë³¸ì ìœ¼ë¡œ ë†’ì€ ì•ˆì „ì„± í™•ë³´)</li><li>ì •ì  íƒ€ì… ì§€ì • ì–¸ì–´ìœ¼ë¡œ, ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ íƒ€ì… ì•ˆì „ì„±ì„ ë³´ì¥í•œë‹¤.</li><li>ì‹¤í–‰ ì‹œì ì´ ì•„ë‹Œ ì»´íŒŒì¼ ì‹œì ì— ê²€ì‚¬ë¥¼ í†µí•´ ë” ë§ì€ ì˜¤ë¥˜ë¥¼ ë°©ì§€í•´ì¤€ë‹¤. (ex. <code>NullPointerException</code>, <code>ClassCastException</code>)</li></ul><br/><h4 id="ìƒí˜¸ìš´ìš©ì„±"><a href="#ìƒí˜¸ìš´ìš©ì„±" class="headerlink" title="ìƒí˜¸ìš´ìš©ì„±"></a>ìƒí˜¸ìš´ìš©ì„±</h4><ul><li>Javaì˜ ê¸°ì¡´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš© ê°€ëŠ¥í•˜ê³ , ìµœëŒ€í•œ í™œìš©í•˜ê³  ìˆë‹¤.</li><li>Java â†â†’ Kotlin í˜¸ì¶œì— ë”°ë¡œ ë…¸ë ¥ì´ í•„ìš”í•˜ì§€ ì•Šë‹¤.</li><li>ë‹¤ì¤‘ ì–¸ì–´ í”„ë¡œì íŠ¸ë¥¼ ì™„ì „íˆ ì§€ì›í•œë‹¤.</li></ul><br/><h2 id="ì½”í‹€ë¦°-ë„êµ¬-ì‚¬ìš©"><a href="#ì½”í‹€ë¦°-ë„êµ¬-ì‚¬ìš©" class="headerlink" title="ì½”í‹€ë¦° ë„êµ¬ ì‚¬ìš©"></a>ì½”í‹€ë¦° ë„êµ¬ ì‚¬ìš©</h2><p>Kotlinë„ Javaì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì»´íŒŒì¼ ì–¸ì–´ì´ë‹¤.<br><img src="https://user-images.githubusercontent.com/26691216/60521297-f6b43e80-9d21-11e9-956b-4f827ed75f1b.jpg" alt="kotlin-runtime-diagram"></p><center><i>Kotlin Build Process</i></center><br/><h4 id="ìë°”-ì½”í‹€ë¦°-ë³€í™˜"><a href="#ìë°”-ì½”í‹€ë¦°-ë³€í™˜" class="headerlink" title="ìë°”-ì½”í‹€ë¦° ë³€í™˜"></a>ìë°”-ì½”í‹€ë¦° ë³€í™˜</h4><p>Intellij IDEAì—ì„œëŠ” ìë°” ì½”ë“œ ì¡°ê°ì„ ì½”í‹€ë¦° íŒŒì¼(.kt)ì— ë¶™ì—¬ë„£ê¸°<br>ìë°” íŒŒì¼ ìì²´ë¥¼ ë³€í™˜í•˜ë ¤ë©´ <code>Code &gt; Convert Java File to Kotlin File</code> </p><p>ë„êµ¬ì— ëŒ€í•´ì„œëŠ” í•„ìš”ì— ë”°ë¼ ì“°ë©´ ë˜ëŠ”ê±°ë¼ ë‚˜ë¨¸ì§€ ë‚´ìš© ìƒëµ.</p><br/><h3 id="1ì¥-ìš”ì•½-p-57"><a href="#1ì¥-ìš”ì•½-p-57" class="headerlink" title="1ì¥ ìš”ì•½ p.57"></a>1ì¥ ìš”ì•½ <code>p.57</code></h3>]]></content>
    
    
      
      
    <summary type="html">&lt;br/&gt;

&lt;h4 id=&quot;â€˜Kotlin-in-Actionâ€™&quot;&gt;&lt;a href=&quot;#â€˜Kotlin-in-Actionâ€™&quot; class=&quot;headerlink&quot; title=&quot;â€˜Kotlin in Actionâ€™&quot;&gt;&lt;/a&gt;â€˜Kotlin in Actionâ€™&lt;/h4&gt;&lt;p</summary>
      
    
    
    
    <category term="kotlin" scheme="https://minsw.github.io/categories/kotlin/"/>
    
    
    <category term="mwolkka" scheme="https://minsw.github.io/tags/mwolkka/"/>
    
    <category term="kotlin" scheme="https://minsw.github.io/tags/kotlin/"/>
    
    <category term="study" scheme="https://minsw.github.io/tags/study/"/>
    
    <category term="book" scheme="https://minsw.github.io/tags/book/"/>
    
    <category term="summarization" scheme="https://minsw.github.io/tags/summarization/"/>
    
  </entry>
  
  <entry>
    <title>2019 NAVER CAMPUS HACKDAY SUMMER í›„ê¸°</title>
    <link href="https://minsw.github.io/2019/06/30/2019-NAVER-HACKDAY-SUMMER-%ED%9B%84%EA%B8%B0/"/>
    <id>https://minsw.github.io/2019/06/30/2019-NAVER-HACKDAY-SUMMER-%ED%9B%84%EA%B8%B0/</id>
    <published>2019-06-30T07:13:28.000Z</published>
    <updated>2021-01-24T18:11:30.109Z</updated>
    
    <content type="html"><![CDATA[<p>ì–¸ì  ê°€ë¶€í„° ì£¼ìœ„ ë™ê¸°ë“¤ì´ <em>í•´ì»¤í†¤ (Hackaton)</em> ì—ì„œ ì¢‹ì€ ê²½í—˜ì„ í•˜ê³  ì˜¤ëŠ” ê±¸ ë³´ë©´ì„œ,<br>í•­ìƒ ë‚˜ë„ í•´ë³´ê³  ì‹¶ë‹¤ëŠ” ë§ˆìŒì€ ìˆì—ˆì§€ë§Œ í˜„ìƒì´ ë°”ì˜ë‹¤ëŠ” ì´ìœ ë¡œ ë‹¨ í•œë²ˆë„ ë„ì „í•´ë³´ì§€ ì•Šì•˜ì—ˆë‹¤.</p><center><img src="https://user-images.githubusercontent.com/26691216/60393712-742a5400-9b54-11e9-9771-03862d5b94df.jpg" width=30%><i>í•‘ê³„ëŠ”...</i></center><p>ê¸¸ê³  ê¸¸ì—ˆë˜ ì§€ì˜¥ì˜ ì‚¬ë§ë…„ì„ ë²—ì–´ë‚œ ê¸°ë…ìœ¼ë¡œ, ì§€ë‚œ 4ì›” <U>ì„¸ ê°œì˜ í•´ì»¤í†¤</U>ì„ ì§€ì›í–ˆê³  ìš´ ì¢‹ê²Œ <strong><U>ë‘ ê°œ</U>ë¥¼ í•©ê²©í•˜ì˜€ë‹¤</strong>.<br>ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” ê·¸ ì¤‘ <strong>NAVER CAMPUS HACKDAY</strong> í›„ê¸°ë¥¼ ì‘ì„±í•˜ê³ ì í•œë‹¤.</p><blockquote><p>ë‚˜ë¨¸ì§€ í•˜ë‚˜ëŠ” ì¶”í›„ì— ì—…ë¡œë“œ ì˜ˆì •ì´ë‹¤. <del>ì•„ë§ˆë„â€¦</del></p></blockquote><br/><hr><br/><h1 id="2019-NAVER-CAMPUS-HACKDAY-SUMMER"><a href="#2019-NAVER-CAMPUS-HACKDAY-SUMMER" class="headerlink" title="2019 NAVER CAMPUS HACKDAY SUMMER"></a>2019 NAVER CAMPUS HACKDAY SUMMER</h1><center><img src="https://d2.naver.com/content/images/2019/03/19CHACK_S.png" width=60%></center><blockquote><p>NAVER D2 - CAMPUS HACKDAY í–‰ì‚¬ ì•ˆë‚´ <a href="https://d2.naver.com/news/5009947">https://d2.naver.com/news/5009947</a></p><p>GITHUB Page <a href="https://github.com/NAVER-CAMPUS-HACKDAY/common">https://github.com/NAVER-CAMPUS-HACKDAY/common</a></p></blockquote><p>ê¹ƒí—™ ë ˆí¬ì˜ ì´ìŠˆì— ìˆëŠ” 37ê°œì˜ ì£¼ì œ ì¤‘ í¬ë§í•˜ëŠ” 1~2ê°œì˜ ì£¼ì œë¥¼ ê³¨ë¼ ì§€ì›ì„œë¥¼ ì‘ì„±í•˜ê³ , 4ì›” 13ì¼ì— ì˜¨ë¼ì¸ ì½”ë”© í…ŒìŠ¤íŠ¸ë¥¼ ë³´ì•˜ë‹¤.</p><p>ì½”ë”© í…ŒìŠ¤íŠ¸ëŠ” ì›í•˜ëŠ” ì‹œê°„ì— ì ‘ì†í•˜ì—¬ ì œí•œì‹œê°„ ë‘ ì‹œê°„ë™ì•ˆ 3ë¬¸ì œë¥¼ í’€ì–´ì•¼ í–ˆê³ , ë¬¸ì œ ë‚œì´ë„ëŠ” ê·¸ë¦¬ ë†’ì€ í¸ì€ ì•„ë‹ˆì—ˆë˜ ê²ƒ ê°™ë‹¤. ì œì¶œí•˜ëŠ” ì‹œê°„ë„ ê¸°ë¡ë˜ì—ˆê¸° ë•Œë¬¸ì— í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì ë‹¹íˆ í™•ì¸í•˜ê³  í•œ ì‹œê°„ ì¡°ê¸ˆ ë„˜ì€ ì‹œì ì— ì œì¶œí–ˆë‹¤.</p><p>í›„ë‹´ì´ì§€ë§Œ <a href="https://codingcompetitions.withgoogle.com/codejam">Google code jam</a>ì˜ â€˜Round 1A 2019â€™ ë„ ê°™ì€ ë‚ ì— ì§„í–‰ë˜ì–´ì„œ ìŠ¤íƒ€ë²…ìŠ¤ì— ì•‰ì•„ì„œ í•˜ë£¨ì£™ì¼ ì •ì‹ ì—†ì´ ë¬¸ì œë§Œ í’€ì—ˆë‹¤. ğŸ¤¦ğŸ»â€â™€ï¸</p><br/><h3 id="ğŸ‰-í–…ê²©-ğŸ‰"><a href="#ğŸ‰-í–…ê²©-ğŸ‰" class="headerlink" title="ğŸ‰ í–…ê²©~ ğŸ‰"></a>ğŸ‰ í–…ê²©~ ğŸ‰</h3><img src="https://user-images.githubusercontent.com/26691216/60394163-02093d80-9b5b-11e9-8129-2444f06d0741.png" width="905"><p>ê¸°ëŒ€ ì•ˆí•˜ê³  ìˆì—ˆì§€ë§Œ ì‚¬ì‹¤ ê¸°ëŒ€í•˜ê¸´ í–ˆë‹¤. (ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹)</p><p>í•´ì»¤í†¤ ì¤‘ì—ì„œë„ Naver hackdayëŠ” ê¼­ í•œë²ˆì¯¤ ê°€ë³´ê³  ì‹¶ì—ˆë˜ í–‰ì‚¬ì˜€ê¸° ë•Œë¬¸ì— íŠ¹íˆ ì¢‹ì•˜ë‹¤. ê¸°ìœ ì™€ì¤‘ì— ë”± ë‚ ì§œê°€ ì¢…ì„¤ í”„ë¡œì íŠ¸ ì¤‘ê°„ ë°œí‘œ ë‚ ì´ë¼ì„œ íŒ€ì›ë“¤ì—ê²Œ ë¯¸ë¦¬ ì–‘í•´ë¥¼ êµ¬í–ˆëŠ”ë°, ë‹¤í–‰íˆ ë§ˆìŒì”¨ ì¢‹ì€ ìš°ë¦¬ íŒ€ì›ë¶„ë“¤ì€ ë„ˆê·¸ëŸ½ê²Œ ì´í•´í•´ì£¼ì…¨ë‹¤.</p><center><img src="https://user-images.githubusercontent.com/26691216/60394226-0124db80-9b5c-11e9-80ed-221836478984.png" width=40%></center><br/><hr><br/><h2 id="Before-Hack-day"><a href="#Before-Hack-day" class="headerlink" title="Before Hack-day"></a>Before Hack-day</h2><p>ë‚´ê°€ ìˆ˜í–‰í•˜ê²Œ ëœ ì£¼ì œëŠ” <strong>â€œì»¨í…Œì´ë„ˆ ê¸°ë°˜ ì‡¼í•‘ ìƒí’ˆ ì •ë³´ ìˆ˜ì‹ â€</strong> ìœ¼ë¡œ, ì„¸ ëª…ì´ í•œ íŒ€ì„ ì´ë£¨ê³  ë©˜í† ë‹˜ í•œ ë¶„ì´ í•¨ê»˜ í•´ì£¼ì…¨ë‹¤. </p><blockquote><p><strong>[ì»¨í…Œì´ë„ˆ ê¸°ë°˜ ì‡¼í•‘ ìƒí’ˆ ì •ë³´ ìˆ˜ì‹ ]</strong></p><p><em><a href="https://github.com/NAVER-CAMPUS-HACKDAY/common/issues/7">https://github.com/NAVER-CAMPUS-HACKDAY/common/issues/7</a></em></p><p>ìƒí’ˆì •ë³´ ìˆ˜ì§‘ì„ ìœ„í•˜ì—¬ ê° ì‡¼í•‘ëª°ì—ì„œ ì œê³µí•˜ëŠ” ìƒí’ˆì •ë³´ <strong>EP</strong>(Engine Page)ë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ ìˆ˜ì§‘í•˜ì—¬ ë³€ê²½ëœ ì •ë³´ë¥¼ ì²´í¬í•˜ê³  ì„œë¹„ìŠ¤ì— ë°˜ì˜í•˜ê³  ìˆë‹¤. í•´ë‹¹ ì‘ì—…ì˜ <strong>í™•ì¥ì„± ë° ê³ ê°€ìš©ì„±</strong>ì„ ìœ„í•˜ì—¬ Kubernetes ë“±ì˜ ì»¨í…Œì´ë„ˆ í™˜ê²½ì—ì„œ Task Agent ë“¤ì´ ìš´ìš©ë  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ ë° êµ¬í˜„ì´ í•„ìš”í•˜ë‹¤.</p></blockquote><p>í•´ì»¤í†¤ í–‰ì‚¬ ë‹¹ì¼ì— ì£¼ì œ ì„ ì •ê³¼ ê°œë°œì´ ëª¨ë‘ ì´ë£¨ì–´ì§€ëŠ” ë‹¤ë¥¸ í•´ì»¤í†¤ë“¤ê³¼ëŠ” ë‹¤ë¥´ê²Œ Naver Campus HackdayëŠ” ë³¸ì¸ì´ ì§€ì›í•œ ì£¼ì œì— ë”°ë¼ íŒ€ì´ ê¾¸ë ¤ì§€ê³ , ì‚¬ì „ì— ë©˜í† ë‹˜ì˜ ê°€ì´ë“œì— ë”°ë¼ íŒ€ë¼ë¦¬ ê°œë°œì„ ì–´ëŠì •ë„ ì§„í–‰í•˜ê¸°ë„ í•œë‹¤. ( â†’ í•´ë‹¹ ë¶€ë¶„ì€ íŒ€byíŒ€ ì¸ ë“¯)</p><p>í”„ë¡œì íŠ¸ì— ëŒ€í•´ì„œëŠ” ë©˜í† ë‹˜ê»˜ ì‚¬ì „ì— ì—¬ì­¤ë´¤ì„ ë•Œ, êµ¬ì²´ì ì¸ í”Œë¡œìš°ëŠ” ê³µê°œí•  ìˆ˜ ì—†ìœ¼ë‚˜ ë‚´ê°€ ì§  ì½”ë“œëŠ” ë¬´ê´€í•˜ë‹¤ê³  ë‹µë³€ì„ ì£¼ì…”ì„œ ê³µì‹ Hackday github ì´ìŠˆì— ë…¸ì¶œë˜ì–´ìˆëŠ” í”„ë¡œì íŠ¸ì˜ ê°œê´„ì ì¸ ë‚´ìš©ê³¼ í•¨ê»˜ ëŠë‚€ì ë§Œ ê°„ëµí•˜ê²Œ ì •ë¦¬í•˜ê³ ì í•œë‹¤.</p><br/><p>ìš°ë¦¬ íŒ€ì˜ ê²½ìš° íŠ¹íˆ ì¸í”„ë¼ êµ¬ì¶•ì´ í•„ìš”í•œ ì£¼ì œì˜€ê¸° ë•Œë¬¸ì— ì‚¬ì „ì— LINEê³¼ Githubì„ í†µí•´ ì˜¨ë¼ì¸ íšŒì˜ë¥¼ ì§€ì†ì ìœ¼ë¡œ ì§„í–‰í–ˆë‹¤. ì´ë¥¼ í†µí•´ ë‚˜ëŠ” ì•„ë˜ì™€ ê°™ì€ ì‚¬ì „ ì¤€ë¹„ë¥¼ í•˜ê³ ì„œ Hackdayì— ì°¸ê°€í•˜ì˜€ë‹¤.</p><ol><li><p>MQ(Message Queue), ë°ì´í„° ì²˜ë¦¬ ë°©ë²• ë“±ì— ëŒ€í•œ ì´í•´</p><ul><li>MQë€ ë¬´ì—‡ì´ê³ , í”„ë¡œì íŠ¸ì— ì í•©í•œ í”„ë¡œì íŠ¸ëŠ” ë¬´ì—‡ì¸ê°€?</li><li>ë°ì´í„° ì²˜ë¦¬ ë°©ì‹ ì¤‘ Batchì™€ Streamì˜ ì°¨ì´ì™€ ê°ê°ì˜ ì¥ë‹¨ì ì€?</li><li>í™•ì¥ì„±ê³¼ ê³ ê°€ìš©ì„±ì„ ê³ ë ¤í•˜ì˜€ì„ ë•Œ ì í•©í•œ ë°ì´í„° ì €ì¥ ë° ë¶„ì„ ë°©ë²•ì€?</li></ul></li><li><p>ì„œë²„ ìš´ìš© ë° í´ëŸ¬ìŠ¤í„°ë§ ê³„íš</p><ul><li>ì‚¬ì „ì— í• ë‹¹ë°›ì€ 10ê°œì˜ ì„œë²„ë¥¼ ì–´ë–»ê²Œ ìš´ìš©í•  ê²ƒì¸ê°€?</li><li>ì–´ë–¤ ê¸°ìˆ  ìŠ¤íƒì„ ì‚¬ìš©í•  ê²ƒì¸ê°€?</li><li>ì–´ë–¤ì‹ìœ¼ë¡œ Clusteringí•  ê²ƒì¸ê°€?</li><li>ì–´ë– í•œ í”Œë¡œìš°ë¡œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê³ , ì–´ë–»ê²Œ ë¶„ì„í•  ê²ƒì¸ê°€? (ì„¤ê³„)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Container Management : Kubernetes</span><br><span class="line">Message Queue : Kafka</span><br><span class="line">Database &amp; Analytics Engine : Hbase + Spark</span><br></pre></td></tr></table></figure></li></ul></li><li><p>ì»¨í…Œì´ë„ˆ ê¸°ë°˜ (Kubernetes)</p><ul><li>ì–´ëŠ ë²”ìœ„ê¹Œì§€ ì»¨í…Œì´ë„ˆí™”í•  ê²ƒì¸ê°€?</li><li>Kubernetes Clusteringì€ ì–´ë–»ê²Œ êµ¬ì„± í•  ê²ƒì¸ê°€?</li><li>Docker registryëŠ” ì–´ë–¤ì‹ìœ¼ë¡œ ì‚¬ìš©í•  ê²ƒì¸ê°€?</li></ul></li></ol><br/><p>ê·¸ ì™¸ì—ë„ ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ì„ì„ ê³ ë ¤í•˜ì—¬ ì–´ë–»ê²Œí•˜ë©´ ì†ë„ì™€ ê³µê°„ íš¨ìœ¨ì„±ì„ í™•ë³´í•  ìˆ˜ ìˆì„ ì§€ì— ëŒ€í•œ ê³ ë¯¼ì„ ì •ë§ ë§ì´ í–ˆë‹¤.</p><p>ë‚´ê°€ ì•Œê³  ìˆëŠ”ê±°ë¼ê³¤ â€˜ì¿ ë²„ë„¤í‹°ìŠ¤â€™ ë‹¤ì„¯ ê¸€ì ë¿â€¦<br>ì´ë•Œê¹Œì§€ ì´ì •ë„ì˜ ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ë¥¼ í•´ë³¸ì ì´ ì—†ì—ˆê³  MQ ë‚˜ Hadoop ì‚¬ìš© ê²½í—˜ë„ ì—†ì—ˆê¸° ë•Œë¬¸ì— ì²˜ìŒ ì ‘í•˜ëŠ” ê²ƒë“¤ì´ ëŒ€ë¶€ë¶„ì´ì—ˆë‹¤. ì±…ë„ ì°¾ì•„ ì½ê³  ë‚˜ë¦„ëŒ€ë¡œì˜ ê³µë¶€ë„ ë§ì´ í•´ì„œ ì–´ëŠì •ë„ ì„¤ê³„ê¹Œì§€ëŠ” í–ˆì§€ë§Œ ë§‰ìƒ ì‹¤ì œ ì¸í”„ë¼ êµ¬ì¶•ì€ ë§‰ë§‰í•˜ê¸°ë§Œ í–ˆëŠ”ë°, ìš°ë¦¬ íŒ€ì— ë°ì´í„° ë§ˆìˆ ì‚¬ë‹˜(!)ì´ ê³„ì…”ì„œ ì´ˆë°˜ êµ¬ì¶•ì„ <del>ì•Œì˜ë”±ê¹”ì„¼</del> í•´ì£¼ì…”ì„œ ğŸ¶ğŸ¯ ì´ì—ˆë‹¤.</p><p>Hackday ì¤€ë¹„ë¥¼ í•˜ë©´ì„œ ê³µë¶€ë„ ë§ì´ ëì§€ë§Œ ëŠ¥ë ¥ìˆê³  ì—´ì •ìˆëŠ” íŒ€ì›ë‹˜ì„ ë³´ë©´ì„œ íŠ¹íˆ ë§ì´ ë°°ì› ë‹¤. ìµœê³ ì˜ íŒ€ì› ìµœê³  bbb</p><br/><h2 id="D-day-Hack-day"><a href="#D-day-Hack-day" class="headerlink" title="D-day, Hack-day"></a>D-day, Hack-day</h2><p>Hackday ë‹¹ì¼, ì¶˜ì²œìœ¼ë¡œ ì¶œë°œ ì „ì— ë¯¸ë¦¬ ëª¨ì—¬ ë©˜í† ë‹˜ê³¼ ê°„ë‹¨í•˜ê²Œ ì ì‹¬ ì‹ì‚¬ë¥¼ í–ˆë‹¤.<br>ê·¸ë¦° íŒ©í† ë¦¬ ê·¼ì²˜ ì‹ë‹¹ì—ì„œ ëˆê¹ŒìŠ¤ ë¨¹ì—ˆëŠ”ë° êµ‰ì¥íˆ ë§·-ì§‘ ì´ë”ë¼. JMTGR.</p><center><img src="https://user-images.githubusercontent.com/26691216/60395184-bb234400-9b6a-11e9-8966-64be35892e6b.jpg" width=40%>??: ì¢‹ì•„í•´ìš”? </center><p>ë©˜í† ë‹˜ì„ ì²˜ìŒ ëµ™ëŠ” ìë¦¬ë¼ ì¡°ê¸ˆ ê¸´ì¥ë„ ëì—ˆëŠ”ë° ìƒê°ë³´ë‹¤ í¸í•œ ë¶„ìœ„ê¸°ë¡œ ì–˜ê¸°ë¥¼ ë‚˜ëˆ„ê³  ê·¼ì²˜ ì¹´í˜ì—ì„œ ì»¤í”¼ë„ ì‚¬ì£¼ì…”ì„œ ê°ì‚¬í•˜ê²Œ ë¨¹ê³  ê·¸ë¦°íŒ©í† ë¦¬ë¡œ í–¥í–ˆë‹¤.</p><p>í•˜ì§€ë§Œ ëª¨ë“ ê²Œ í‰í™”ë¡­ê³  ìˆœì¡°ë¡œìš´ ê°€ìš´ë°, <strong>í•œê°€ì§€ ë¬¸ì œ</strong>ê°€ ìˆì—ˆë‹¤.</p><p>íŒ€ì› ë¶„ ì¤‘ì— í•œ ë¶„ì´ ëª¸ì´ ì•„í”„ì…”ì„œ ë‹¹ì¼ ë‚  ëª» ì˜¤ì‹  ê²ƒì´ë‹¤. ìœ„ì—ì„œ ë§í–ˆë‹¤ ì‹¶ì´ í•œ íŒ€ë‹¹ 3ëª…ì´ íŒ€ì´ì—ˆê³ , ëŒ€ë¶€ë¶„ ì„¸ ëª…ì¸ ê°€ìš´ë° ê°‘ìê¸° ìš°ë¦¬íŒ€ë§Œ ë‘˜ì´ ë˜ì—ˆë‹¤.</p><p>ì´ ë•Œ ëŠë‚Œì™”ë‹¤. <U>ì˜¤ëŠ˜ ìˆ™ì†Œ êµ¬ê²½ì€ ë¬¼ê±´ë„ˆ ê°”ìŒì„.</U></p><br/><center><img src="https://user-images.githubusercontent.com/26691216/60395094-3c79d700-9b69-11e9-9a2f-faf606655425.JPG" width=50%><i>í–‰ì‚¬ ì§„í–‰ ì¥ì†Œì¸ NAVER CONNECT ONEì€ ë‚´ë¶€ ì‚¬ì§„ ê³µê°œë¥¼ ê¸ˆí•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì‹œì„¤ ëª¨ìŠµì´ ë³´ì´ëŠ” êµ¬ì²´ì ì¸ ì‚¬ì§„ë“¤ì€ ê³µê°œí•  ìˆ˜ ì—†ë‹¤.</i></center><br/><p>ì‚¬ì‹¤ ë‚˜ì™€ ë‹¤ë¥¸ íŒ€ì›ë‹˜ì€ ì»¤ë„¤íŠ¸ì›ì´ ë‘ ë²ˆì§¸ ë°©ë¬¸ì´ë¼ êµ¬ê²½ì€ ì œì³ë‘ê³  íšŒì˜ì‹¤ì—ë§Œ ë°•í˜€ìˆì—ˆì–´ì„œ ì‚¬ì§„ë„ ê±°ì˜ ì•ˆì°ì—ˆë‹¤. ë•Œ ë§ì¶° ë‚˜ì™€ ë°¥ ë¨¹ê³  ë‹¹ ë–¨ì–´ì§€ë©´ ê°„ì‹ ê°€ì ¸ì˜¤ëŠ” ê±° ì™¸ì—ëŠ” íšŒì˜ì‹¤ì— ìŠ¤ìŠ¤ë¡œë¥¼ ê°ê¸ˆí–ˆë‹¤.</p><p>ì™œëƒê³ ? ìˆœì¡°ë¡­ê¸´ ê°œë¿” ë‚´ê°€ í•´ê°„ê±° í•˜ë‚˜ë„ ì•ˆëë‹¤. <del>tlqk</del></p><blockquote><p>ì¸í”„ë¼ íŠ¹ _ ì´ìœ ì—†ì´ ê°‘ìê¸° ì•ˆë¨</p><p>ë£¨ê¹Œ íŠ¹ _ ì´ìœ ì—†ê¸´ ì‚¬ì‹¤ìƒ <strong>ë³¸ì¸ ì˜ëª»</strong>ì„</p></blockquote><br/><p>ë„ì°©í•˜ì ë§ˆì ë§ˆìŒì´ ê¸‰í–ˆë˜ ìš°ë¦¬ íŒ€ì€ ê³§ ë°”ë¡œ íšŒì˜ë¥¼ ì‹œì‘í–ˆë‹¤. ì‚¬ì „ì— ì˜¨ë¼ì¸ íšŒì˜ë¥¼ í†µí•´ ì„¤ê³„ë¥¼ ë…¼ì˜í•˜ê¸´ í–ˆì—ˆì§€ë§Œ í™•ì •ì€ ì•„ë‹ˆì—ˆê³ , ê·¸ ì´í›„ë¡œ ê°ìê°€ ê³ ë¯¼í–ˆë˜ ë¶€ë¶„ê³¼ ê·¸ ê²°ê³¼ë¡œ ì„¤ê³„í•œ êµ¬ì¡°ë¥¼ ì„œë¡œ ê³µìœ í•˜ê³  ë©˜í† ë‹˜ê»˜ í”¼ë“œë°±ì„ ë°›ì•˜ë‹¤.</p><p><strong><em>ê²°ë¡ ë§Œ ì–˜ê¸°í•˜ìë©´, ë‚˜ì™€ ë‹¤ë¥¸ íŒ€ì›ë‹˜ì˜ ë””ìì¸ì€ ì™„ì „íˆ ë‹¬ëë‹¤.</em></strong></p><p>ê°™ì€ ë¬¸ì œë¥¼ ì ‘í–ˆê³  ì‚¬ìš©í•  ì¸í”„ë¼ë„ ê°™ì´ ì •í–ˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³ , ìƒê°í•˜ëŠ” í•´ê²° ë°©ì‹ì´ ë‹¤ë¥¸ ê²ƒì´ë‹¤. ì´ëŸ° ì ì´ ì‚¬ì‹¤ ë†€ëê¸°ë„ í•˜ê³  ë˜ ê° ë°©ë²•ì˜ ì¥ë‹¨ì ì´ ë¶„ëª…í•´ì„œ ì–´ë–¤ ì„¤ê³„ì— ë”°ë¼ êµ¬í˜„í• ì§€ í† ì˜ë¥¼ í•˜ë©´ì„œ ë§ì€ ê³ ë¯¼ì´ ë˜ì—ˆë‹¤. ê²°êµ­ ì¼ë‹¨ì€ ë‚´ ì„¤ê³„ëŒ€ë¡œ ì§„í–‰í•˜ê¸°ë¡œ ê²°ë¡ ì„ ëƒˆì§€ë§Œ, ì—¬ê¸°ì˜ ê°€ì¥ í° ì´ìŠˆëŠ” <U>Hackday ê¸°ê°„ ì•ˆì— êµ¬í˜„ì´ ê°€ëŠ¥í• ì§€</U> ì˜€ë‹¤. </p><blockquote><p>âœ½ í”„ë¡œì íŠ¸ ë‚´ìš©ì€ ê³µê°œ ê°€ëŠ¥í•œ ë²”ìœ„ê°€ ëª¨í˜¸í•˜ì—¬ ì¼ë‹¨ ë³´ë¥˜í•˜ê³ , ì¶”í›„ì— ê¸°íšŒê°€ ë˜ëŠ”ëŒ€ë¡œ ì§°ë˜ ì½”ë“œì™€ í•¨ê»˜ ê²ªì—ˆë˜ ë¬¸ì œì , í•´ê²° ê³¼ì •, ëŠë‚€ì  ë“±ì„ ë”°ë¡œ ì •ë¦¬í•˜ë ¤ í•œë‹¤.</p></blockquote><br/><h4 id="â€˜í˜¹ì‹œâ€™í•˜ë©´-â€˜ì—­ì‹œâ€™ë‹¤"><a href="#â€˜í˜¹ì‹œâ€™í•˜ë©´-â€˜ì—­ì‹œâ€™ë‹¤" class="headerlink" title="â€˜í˜¹ì‹œâ€™í•˜ë©´ â€˜ì—­ì‹œâ€™ë‹¤."></a>â€˜í˜¹ì‹œâ€™í•˜ë©´ â€˜ì—­ì‹œâ€™ë‹¤.</h4><center><img src="https://user-images.githubusercontent.com/26691216/60401215-0ebc7e80-9bb9-11e9-90bf-d301476adcce.gif" width="210"></center><center><i>ì„œë²„ë“¤ì€ ì´ìœ  ì—†ì´ ëŒì•„ê°€ë©° í„°ì§€ê³ , <br/>KubernetesëŠ” ê°‘ìê¸° ë§‰í˜”ê³ , <br/>Hbase Clusterë„ ê°‘ìê¸° í„°ì ¸ íŒ€ì›ë‹˜ì´ í•´ê²°í•˜ê³  ê³„ì‹œëŠ” ì™€ì¤‘ì— <br/>ìš°ë ¤ í–ˆë˜ Spark (Scalar) ë©˜ë¶•ê¹Œì§€ <strong>í„°/ì ¸/Ba/by</strong> ìƒíƒœ <br/></i></center> <p>ìƒˆë¡œìš´ ë„ë©”ì¸ ì§€ì‹ ìŠµë“ê³¼ ì„¤ê³„ì— ê¸‰ê¸‰í–ˆë˜ ë‚˜ë¨¸ì§€ ë‚˜ëŠ” ì´ˆë°˜ ì¸í”„ë¼ êµ¬ì¶• ì°¸ì—¬ê°€ ì ì—ˆê³  ê±°ê¸°ì— ëŒ€í•œ ì´í•´ë„ê°€ ë‹¤ì†Œ ë¶€ì¡±í–ˆë‹¤. ê·¸ ì¤‘ KafkaëŠ” ë¹„êµì  ë§ì´ ê³µë¶€ë¥¼ í•´ê°”ì§€ë§Œ DB ìª½ì—ëŠ” ì‹ ê²½ì„ ë§ì´ ì“°ì§€ ëª»í–ˆë”ë‹ˆ,</p><p><strong>Javaë¡œ Consumerì™€ Producerë¥¼ êµ¬í˜„í•˜ê¸´ í–ˆëŠ”ë° ë§‰ìƒ ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ë‹¤ë¤„ì•¼ ë˜ëŠ”ì§€ë¥¼ ëª¨ë¥´ê² ëŠ” ê±°ë‹¤.</strong></p><p>ë‹¤ë¥¸ íŒ€ì›ë‹˜ì´ DB ë¬¸ì œë¥¼ í•´ê²°í•˜ê³  ê³„ì‹œëŠ” ë™ì•ˆ í˜¼ì Consumer ëª¨ë“ˆì— Sparkë¥¼ ì ìš©í•´ë³´ë ¤ë‹ˆ ëˆˆì•ì´ ìº„ìº„í–ˆë‹¤. ë°¤ìƒˆ Sparkê°€ ëŒ€ì²´ ë­ë©° ì–´ë–»ê²Œ ì ìš©í•´ì•¼ í•˜ëŠ”ì§€ë¥¼ ì°¾ì•„ë´ë„ ì°¸ê³ í•˜ë¼ê³  ì£¼ì‹  Scalar ì½”ë“œë¥¼ ë´ë„ ì¢€ ì²˜ëŸ¼ ê°ì´ ì•ˆë‚˜ì™”ë‹¤.<br>ì´ ë•Œ ì‚¬ì‹¤ íŒ€ì›ë¶„ì´ ë°ì´í„° ì²˜ë¦¬ ê²½í—˜ì´ ë‚˜ë³´ë‹¤ ë§ë‹¤ëŠ” ì´ìœ ë¡œ ë‚˜ëŠ” ë„ˆë¬´ ì•ˆì¼í•˜ê²Œ ì¤€ë¹„í•œê²Œ ì•„ë‹Œê°€ë¼ëŠ” ë°˜ì„±ì„ ë§ì´ í–ˆë‹¤.</p><p>ì˜ˆìƒí–ˆë˜ ëŒ€ë¡œ <U>ê·¸ ì¢‹ì€ ìˆ™ì†ŒëŠ” ì£¼ì¸ ì—†ëŠ” ë°¤ì„ ë³´ë‚´ê²Œ ë˜ì—ˆë‹¤</U>. ğŸ›</p><br/><br/><p>ë‹¤ìŒ ë‚  ì ì‹¬ ì‹ì‚¬ í›„, ìµœì¢… ê²°ê³¼ë¬¼ì„ ë©˜í† ë‹˜ê»˜ ê³µìœ í•˜ê³  í”¼ë“œë°±ì„ ë°›ì•˜ë‹¤.</p><p>ì²˜ìŒì—ëŠ” íŒ€ í”„ë¡œì íŠ¸ì˜€ì§€ë§Œ ì§„í–‰í•˜ë‹¤ë³´ë‹ˆ ê³„íší–ˆë˜ ê²°ê³¼ë¥¼ ë‚´ê¸°ì—ëŠ” ë¶€ì¡±í•¨ì´ ìˆì–´ ê²°êµ­ íŒ€ì› ê°ì ë‚˜ë¦„ì˜ êµ¬í˜„ ê²°ê³¼ë¬¼ì„ ë‚´ê²Œ ë˜ì—ˆë‹¤.<br>(ê°ìì˜ ì„¤ê³„ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ë˜, ê°ìê°€ ì²˜í•œ ìƒí™©ì— ë”°ë¼ ìŠ¤í™ì„ ì¡°ê¸ˆì”© ë°”ê¾¸ì—ˆë‹¤)</p><p>ë°¤ìƒˆ êµ¬í˜„í•œ ê±¸ ëª‡ ë²ˆì´ê³  ë’¤ì§‘ì–´ ì—ì–´ ìµœì¢…ì ìœ¼ë¡œ ê³„íš í–ˆë˜ ë™ì‘ì€ êµ¬í˜„í•˜ê¸´ í–ˆì§€ë§Œ â€˜ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬â€™ì™€ â€˜ì»¨í…Œì´ë„ˆ í™˜ê²½â€™ì— ëŒ€í•œ ì•„ì‰¬ì›€ì€ ì–´ì©” ìˆ˜ ì—†ì—ˆë‹¤. ì´ë ‡ê²Œ ì•„ì‰¬ì›€ì„ í•œ ê°€ë“ ì•ˆê³  <strong>Campus Hackday</strong>ëŠ” ë§ˆë¬´ë¦¬ ë˜ì—ˆì§€ë§Œ, ë˜ ë°°ì›Œê°€ëŠ” ê²ƒë„ í•œ ê°€ë“ì´ë¼ ì—¬ëŸ¬ëª¨ë¡œ ì˜ë¯¸ê°€ í° í–‰ì‚¬ì˜€ë‹¤.</p><br/><h2 id="After"><a href="#After" class="headerlink" title="After .."></a>After ..</h2><p>Hackdayë¥¼ ë‹¤ë…€ì™€ì„œ ê°€ì¥ ë¨¼ì € í•œ ì¼ì€ <strong>ì </strong> ğŸ¥± ì´ë‹¤. ì¦ˆì§ˆ ì²´ë ¥â€¦;;</p><p>ê·¸ëŸ¬ê³ ë‚˜ì„œ ê¹Œë¨¹ê¸° ì „ì— ë¶€ì¡±í–ˆë˜ ì ê³¼ ë°°ìš´ ì ì„ ì •ë¦¬í•˜ë©´ì„œ<br>ë©˜í† ë‹˜ê»˜ í”¼ë“œë°± ë°›ì€ ë¶€ë¶„ê³¼ ìŠ¤ìŠ¤ë¡œ ì•„ì‰¬ì› ë˜ ë¶€ë¶„ì€ ì¸í”„ë¼ê°€ ì•„ì§ ë‚¨ì•„ìˆì„ ë•Œ ê³µë¶€í•˜ë©´ì„œ ë³´ì™„í•´ë³´ê³ ì í–ˆë‹¤.</p><center><img src="https://user-images.githubusercontent.com/26691216/60398767-339ffa00-9b97-11e9-9caa-05023dba1d11.png" width="210"><s>ì‚¬ëŒì´ ì•ˆí•˜ë˜ ì§“ì„ í•˜ë©´...</s></center><p>ìƒê°í–ˆë˜ ê²ƒë³´ë‹¤ ì„œë²„ íšŒìˆ˜ ì‹œê¸°ê°€ ì•ë‹¹ê²¨ì ¸ì„œ ì•„ì‰½ê¸°ëŠ” í–ˆì§€ë§Œ, ì•„ì‰¬ìš´ëŒ€ë¡œ ë¡œì»¬ì— ìµœëŒ€í•œ ë™ì¼í•œ í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ êµ¬ì¶•í•´ì„œ Code Refactoring / Test ì™€ ì •ë¦¬í•œ ë‚´ìš© ë°”íƒ•ì˜ ë¬¸ì„œ ì‘ì„±ì„ ë§ˆì¹˜ê³  íŒ€ Githubì— Issueì™€ PRì„ ì˜¬ë¦¼ìœ¼ë¡œì¨ Hackday í”„ë¡œì íŠ¸ë¥¼ ë§ˆë¬´ë¦¬ ì§€ì—ˆë‹¤.</p><hr><br/><h4 id="ëŠë‚€ì "><a href="#ëŠë‚€ì " class="headerlink" title="ëŠë‚€ì "></a>ëŠë‚€ì </h4><p>Naver Campus Hackdayì™€ ë‹¤ë¥¸ í•´ì»¤í†¤ê³¼ì˜ ì°¨ì´ì ì€ ì‹¤ë¬´ì— ì–´ëŠì •ë„ ì§ì ‘ì ì¸ ì—°ê´€ì´ ìˆëŠ” ë¬¸ì œë“¤ì„ ì ‘í•˜ê³  ê·¸ ì¤‘ ë³¸ì¸ì´ ê´€ì‹¬ìˆëŠ” ì£¼ì œë¥¼ ì •í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ê³ , 1ë°• 2ì¼ í–‰ì‚¬ ê¸°ê°„ ì™¸ì—ë„ ë¬¸ì œì— ëŒ€í•´ ì¢€ ë” ê¹Šê²Œ ê³ ë¯¼í•˜ê³  ê°œë°œí•  ìˆ˜ ìˆëŠ” ì‹œê°„ì´ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. </p><p>ê·¸ë¦¬ê³  ë˜ ë‹¤ë¥¸ í° ì°¨ì´ì ì€ <strong>â€˜ê²½ìŸì´ë‚˜ ì‹œí—˜ì´ ì•„ë‹ˆë‹¤â€™</strong> ë¼ëŠ” ê²ƒì´ë‹¤.<br>ë‹¤ë¥¸ íŒ€ê³¼ì˜ ë‚´ìš© ê³µìœ ê°€ ë”°ë¡œ ì—†ì–´ ì–´ë–¤ ê±¸ ì–´ë–»ê²Œ í•´ê²°í•˜ì…¨ëŠ”ì§€ ì •ë§ ê¶ê¸ˆí•˜ê¸´ í–ˆì§€ë§Œ, ëŒ€ì‹ ì— ë¹„êµë„ ì—†ê³  ê²½ìŸë„ ì—†ë‹¤. </p><p>ë¬¼ë¡  ìš°ìˆ˜ì°¸ê°€ìì—ê²ŒëŠ” ë„¤ì´ë²„ ì¸í„´ ë©´ì ‘ê¸°íšŒë¥¼ ì¤€ë‹¤ëŠ” í˜œíƒì´ ë¶„ëª… ì¡´ì¬í•˜ì§€ë§Œ, ë©˜í† ë‹˜ë„ ì—¬ëŸ¬ ì°¨ë¡€ ê°•ì¡°í•˜ì…¨ë˜ ê²ƒ ì²˜ëŸ¼ ì •í•´ì§„ ë‹µì„ ì°¾ëŠ”ë‹¤ê¸°ë³´ë‹¤ <U>ì‹¤ì œ ì‹¤ë¬´ì—ì„œì˜ ë¬¸ì œë¥¼ ì ‘í•˜ê³  í•´ê²°í•˜ëŠ” ê²½í—˜</U>ì„ í•  ìˆ˜ ìˆëŠ” ê¸°íšŒì´ë‹¤. ê²½ìŸì´ ì•„ë‹Œ ë˜ë˜ì˜ ì—´ì •ì ì´ê³  ì‹¤ë ¥ìˆëŠ” ë¶„ë“¤ì„ ë§Œë‚˜ ë§ì´ ë°°ìš°ê³  ìê·¹ì„ ë°›ì„ ìˆ˜ ìˆëŠ” ì ì´ë‚˜, í˜„ì—…ì˜ ë„¤ì´ë²„ ê°œë°œìë‹˜ì˜ ë©˜í† ë§ê³¼ í”¼ë“œë°±ì„ ë°›ì„ ìˆ˜ ìˆëŠ” ì  ëª¨ë‘ ë‹¤ë¥¸ ê³³ì—ì„œ ê²½í—˜ í•  ìˆ˜ ì—†ëŠ” ê·€í•œ ê²½í—˜ì¸ ê²ƒ ê°™ë‹¤.</p><p>ëë‚˜ê³  ê°€ì¥ ì•„ì‰¬ì› ë˜ ì  ì¤‘ í•˜ë‚˜ëŠ” ì‚¬ì „ì— ì¢€ ë” ë§ì€ ì‹œê°„ì„ íˆ¬ìí•´ì„œ ë‹¹ì¼ì—ëŠ” ì¢€ ë” í™œë°œí•œ ë„¤íŠ¸ì›Œí‚¹ê³¼ êµ¬ì²´ì ì¸ í”¼ë“œë°± (+ ì½”ë“œ ë¦¬ë·°) ì„ ë°›ì„ ìˆ˜ ìˆì—ˆìœ¼ë©´ ë” ì¢‹ì§€ ì•Šì•˜ì„ê¹Œ í•˜ëŠ” ê²ƒì´ë‹¤. </p><blockquote><p><em>â€˜Hackathonâ€™</em> ì´ë¼ê³  ìƒê°í•˜ê³  <em>â€˜Hackdayâ€™</em> ë¥¼ ì¶©ë¶„íˆ ì¦ê¸°ì§€ ëª»í–ˆë˜ê²Œ ì•„ì‰½ê¸´í•˜ì§€ë§Œ,<br>ê·¼ë˜ ì¡°ê¸ˆì€ ì§€ì³¤ë˜ ë‚˜ì—ê²Œ <strong><em>ì¢‹ì€ ìê·¹</em></strong> ì´ ë˜ì—ˆìŒì—ëŠ” í‹€ë¦¼ ì—†ë‹¤.  </p></blockquote><br/><p>í˜¹ì‹œë‚˜ Naver Campus Hackday ì°¸ê°€ë¥¼ í¬ë§í•˜ê±°ë‚˜ ì´ë¯¸ í•©ê²©í•˜ì‹  ë¶„ì´ ì´ ê¸€ì„ ì½ëŠ”ë‹¤ë©´ ì¡°ê¸ˆì˜ ë„ì›€ì´ ë˜ì‹œê¸¸ ë°”ë¼ë©° ê¸€ì„ ë§ˆì¹œë‹¤.</p><br/><p>ì•„ë””ë‹¤ë””ë„ìŠ¤! ğŸ‘‹ğŸ»</p><br/>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ì–¸ì  ê°€ë¶€í„° ì£¼ìœ„ ë™ê¸°ë“¤ì´ &lt;em&gt;í•´ì»¤í†¤ (Hackaton)&lt;/em&gt; ì—ì„œ ì¢‹ì€ ê²½í—˜ì„ í•˜ê³  ì˜¤ëŠ” ê±¸ ë³´ë©´ì„œ,&lt;br&gt;í•­ìƒ ë‚˜ë„ í•´ë³´ê³  ì‹¶ë‹¤ëŠ” ë§ˆìŒì€ ìˆì—ˆì§€ë§Œ í˜„ìƒì´ ë°”ì˜ë‹¤ëŠ” ì´ìœ ë¡œ ë‹¨ í•œë²ˆë„ ë„ì „í•´ë³´ì§€ ì•Šì•˜ì—ˆë‹¤.&lt;/p&gt;
&lt;center&gt;&lt;img sr</summary>
      
    
    
    
    <category term="retrospect" scheme="https://minsw.github.io/categories/retrospect/"/>
    
    
    <category term="naver" scheme="https://minsw.github.io/tags/naver/"/>
    
    <category term="hackathon" scheme="https://minsw.github.io/tags/hackathon/"/>
    
    <category term="container" scheme="https://minsw.github.io/tags/container/"/>
    
    <category term="kafka" scheme="https://minsw.github.io/tags/kafka/"/>
    
    <category term="CNCF" scheme="https://minsw.github.io/tags/CNCF/"/>
    
  </entry>
  
  <entry>
    <title>KubernetesëŠ” ë­˜ê¹Œ</title>
    <link href="https://minsw.github.io/2019/01/26/Kubernetes%EB%8A%94-%EB%AD%98%EA%B9%8C/"/>
    <id>https://minsw.github.io/2019/01/26/Kubernetes%EB%8A%94-%EB%AD%98%EA%B9%8C/</id>
    <published>2019-01-26T05:38:20.000Z</published>
    <updated>2021-01-24T18:11:30.112Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Kubernetesë¥¼-ì‹œì‘í•˜ê¸°-ì•ì„œ"><a href="#Kubernetesë¥¼-ì‹œì‘í•˜ê¸°-ì•ì„œ" class="headerlink" title="Kubernetesë¥¼ ì‹œì‘í•˜ê¸° ì•ì„œ"></a>Kubernetesë¥¼ ì‹œì‘í•˜ê¸° ì•ì„œ</h2><blockquote><p><em>ìµœì‹  ê°œë°œ íŠ¸ë Œë“œëŠ” â€¦</em></p><p><em>ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ êµ¬ì¡°ë¥¼ <u>ì‘ê³ , ë…ë¦½ì ì¸ ë‹¨ìœ„</u>ë¡œ ê°œë°œí•˜ê³  (Microservices),</em></p><p><em>ì´ë¥¼ <u>ê²½ëŸ‰í™”ëœ ê°€ìƒí™” í™˜ê²½</u>ì—ì„œ êµ¬ë™í•  ìˆ˜ ìˆëŠ” ë‹¨ìœ„ (Container)ë¡œ ìƒì„±í•˜ì—¬,</em></p><p><em>ì´ëŸ¬í•œ <u>ì»¨í…Œì´ë„ˆë“¤ì„ ê´€ë¦¬</u>í•  ìˆ˜ ìˆëŠ” í™˜ê²½ (Cloud Native)ì„ êµ¬ì„±í•˜ëŠ” ê²ƒì´ë‹¤</em></p></blockquote><br><h3 id="1-Microservice-Architecture-MSA"><a href="#1-Microservice-Architecture-MSA" class="headerlink" title="1. Microservice Architecture (MSA)"></a>1. Microservice Architecture (MSA)</h3><p>ê³¼ê±°ì—ëŠ” ì„œë¹„ìŠ¤ë¥¼ í•˜ë‚˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ë§Œë“¤ì–´ ëª¨ë“  ì‹œìŠ¤í…œì„ ê·¸ í•˜ë‚˜ì— ë‹¤ ì§‘ì–´ë„£ëŠ” <strong>ëª¨ë†€ë¦¬ì‹ ì•„í‚¤í…ì²˜(Monorithic Architecture)</strong> ë¡œ ë§Œë“¤ì—ˆë‹¤. ì´ëŸ¬í•œ ì¼ì²´ì‹ êµ¬ì¡°ëŠ” ê°œë°œ/ë°°í¬/í™•ì¥ì„ ë‹¨ìˆœí•˜ê²Œ ë§Œë“œëŠ” ì¥ì ì„ ê°€ì§€ì§€ë§Œ, í° ê·œëª¨ì¼ ìˆ˜ë¡ ì½”ë“œì´í•´ë‚˜ ìˆ˜ì •ì´ ì–´ë µë‹¤.</p><p>ê·¸ë˜ì„œ ë“±ì¥í•˜ê²Œëœ <strong>ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜(Microservice Architecture)</strong> ëŠ” ì„œë¹„ìŠ¤ë¥¼ <u>ì‘ê³ </u>, <u>ë…ë¦½ì ì´ê³ </u>, <u>ëŠìŠ¨í•˜ê²Œ ê²°í•©</u>í•˜ëŠ” ë°©ì‹ì˜ ì„œë¹„ìŠ¤ ì§€í–¥ ì•„í‚¤í…ì²˜ì´ë‹¤. ê°ê°ì˜ ìš”ì†Œë¥¼ ë…ë¦½ì ì¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ë§Œë“¤ê³ , APIë¡œ ì¡°í•©í•´ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ë§Œë“ ë‹¤.</p><blockquote><p><strong>MSA êµ¬ì„±ìš”ì†Œ</strong></p><ul><li>Service Discovery</li><li>Circuit Breaker</li><li>Sidecar (Service Discovery + Circuit Breaker) </li><li>Service Mesh</li><li>Service Meshâ€™s Control Plane</li></ul></blockquote><br><br><h3 id="2-Virtualization"><a href="#2-Virtualization" class="headerlink" title="2. Virtualization"></a>2. Virtualization</h3><p>ì„œë²„ë¥¼ ê°€ìƒìœ¼ë¡œ ë¶„í• í•˜ëŠ” <strong>ê°€ìƒí™” (Virtualization)</strong> ëŠ”, ë¶„í• ëœ ê°€ìƒì˜ ì„œë²„ ë‚´ë¶€ì—ì„œ ì„œë¹„ìŠ¤ë¥¼ ì‹¤í–‰í•˜ì—¬ ë¦¬ì†ŒìŠ¤ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì“°ê³ ìí•˜ëŠ” ê¸°ìˆ ì´ë‹¤. ê°€ìƒí™”ëŠ” <strong>KVM, XEN, Hyper-V</strong> ë“±ì˜ í•˜ì´í¼ë°”ì´ì € ê¸°ë°˜ì˜ ê¸°ìˆ ê³¼, <strong>Docker, LXC</strong> ë“±ì˜ ì»¨í…Œì´ë„ˆ ê¸°ë°˜ì˜ ê¸°ìˆ ì´ ë°œì „í•˜ë©´ì„œ ìƒìš©í™”ë˜ê³  ìˆë‹¤.</p><br><h3 id="Container"><a href="#Container" class="headerlink" title="Container"></a>Container</h3><blockquote><p><strong>VM</strong> ì€ í•˜ì´í¼ë°”ì´ì €ë¥¼ í†µí•œ í•˜ë“œì›¨ì–´ì˜ ê°€ìƒí™”ì´ê³ , </p><p><strong>Container</strong> ëŠ” OSë ˆë²¨ì˜ ê°€ìƒí™” (User ê³µê°„ì˜ ì¶”ìƒí™”)ë¥¼ ì œê³µí•œë‹¤.</p></blockquote><p><strong>Container</strong>ëŠ” host ì‹œìŠ¤í…œì˜ ì»¤ë„ì„ containerë“¤ë¼ë¦¬ ê³µìœ í•˜ê¸°ë•Œë¬¸ì— ê°€ë³ê³  ë¹ ë¥¸ ì†ë„ë¥¼ ê°€ì§€ë©° í¸ë¦¬í•˜ë‹¤.</p><p>ëª¨ë“ˆì„±(modularity)ì™€ í™•ì¥ì„±(scalability)ì´ ì¢‹ì§€ë§Œ ë³´ì•ˆì„±ì´ ì•½í•˜ë‹¤ =&gt; VMê³¼ ê³µì¡´ í•„ìš”</p><p>â€‹        <em>ì—¬ëŸ¬ëŒ€ì˜ ì„œë²„ì— ì—¬ëŸ¬ëŒ€ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì“´ë‹¤ë©´ VMì´,</em></p><p>â€‹        <em>í•˜ë‚˜ì˜ ì„œë²„ì— ì—¬ëŸ¬ëŒ€ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì“´ë‹¤ë©´ Containerê°€ ì í•©í•  ìˆ˜ ìˆë‹¤</em></p><br><h3 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h3><p>ë¦¬ëˆ…ìŠ¤ ì»¨í…Œì´ë„ˆë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸</p><p>namespace, control group(cgroup)ê³¼ ê°™ì€ ë¦¬ëˆ…ìŠ¤ ì»¤ë„ ê¸°ëŠ¥ì„ ì´ìš©í•´ì„œ OS ìœ„ì— ì»¨í…Œì´ë„ˆë“¤ì„ ìƒì„±í•˜ëŠ” ê¸°ìˆ ì´ë‹¤.</p><br><br><h3 id="3-Cloud-Native-Computing-Foundation-CNCF"><a href="#3-Cloud-Native-Computing-Foundation-CNCF" class="headerlink" title="3. Cloud Native Computing Foundation (CNCF)"></a>3. Cloud Native Computing Foundation (CNCF)</h3><p><strong>Cloud Native Computing</strong> ì€ í´ë¼ìš°ë“œ ì»´í“¨íŒ… ëª¨ë¸ì˜ ì¥ì ì„ ëª¨ë‘ í™œìš©í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•˜ê³  ì‹¤í–‰í•˜ê¸° ìœ„í•œ ì ‘ê·¼ ë°©ì‹ì´ë‹¤.</p><p>microserviceë¡œ ì•±ì„ ë°°í¬í•˜ê³ , ì»¨í…Œì´ë„ˆ ë³„ë¡œ íŒ¨í‚¤ì§•í•˜ê³ , ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ì„ ìµœì í™”í•˜ëŠ” ë™ì  ì¡°ì ˆì„ìœ„í•´ ì˜¤í”ˆì†ŒìŠ¤ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì‚¬ìš©í•œë‹¤. <strong>Cloud Native Computing Foundation (CNCF)</strong> ëŠ” ì´ëŸ¬í•œ í´ë¼ìš°ë“œ ê¸°ìˆ ê³¼ ê´€ë ¨ëœ í‘œì¤€í˜•ì„ ê°œë°œí•˜ë ¤ëŠ” ë‹¨ì²´ì´ë©°, **<u>Kubernetes</u>**ê°€ ìœ ì¼í•œ ì¤‘ì‹¬ í”„ë¡œì íŠ¸ë¡œ í¸ì„±ë˜ì—ˆë‹¤.</p><blockquote><p> kubernetes, prometheus, envoy, istio, â€¦</p></blockquote><br><br><br><h1 id="Kubernetes-k8s-ë€"><a href="#Kubernetes-k8s-ë€" class="headerlink" title="Kubernetes (k8s) ë€?"></a>Kubernetes (k8s) ë€?</h1><blockquote><p><em>ê·¸ë˜ì„œ MSAí˜•íƒœë¡œ ê°œë°œëœ ì„œë¹„ìŠ¤ë“¤ì„ Dockerë¡œ ì»¨í…Œì´ë„ˆí™”í•´ì„œ ë„ìš°ê¸´í–ˆëŠ”ë°..</em></p><ul><li>ì—¬ëŸ¬ëŒ€ì˜ ë¬¼ë¦¬ì„œë²„ì—ì„œ ê°ê° ê´€ë¦¬í•˜ê¸°ë„ ì–´ë µê³ </li></ul><ul><li><p><u>lifecycle management</u>ë„ í•„ìš”í•˜ê³  (ë¬¸ì œ ëŒ€ì‘, íŒ¨ì¹˜, ì—…ë°ì´íŠ¸ ë“±)</p></li><li><p>ì»¨í…Œì´ë„ˆ ë°°í¬, ìŠ¤ì¼€ì¼ë§, ì˜¤í¼ë ˆì´íŒ…ë“±ë„ ìë™ìœ¼ë¡œ ë˜ë©´ ì¢‹ê² ëŠ”ë°â€¦</p><p>=&gt; (â€œí•´ê²°ì‚¬ê°€ ì™”ì–´!â€) <strong>Kubernetes</strong></p></li></ul></blockquote><br><h3 id="Kubernetes"><a href="#Kubernetes" class="headerlink" title="Kubernetes"></a>Kubernetes</h3><p><strong>kubernetes</strong>ëŠ” â€œDocker container Orchestration toolâ€ </p><p>ì»¨í…Œì´ë„ˆí™”ëœ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ Automatic deployment / Scaling / Management</p><p>- ê·¸ë¦¬ìŠ¤ì–´ë¡œ â€˜í‚¤ì¡ì´â€™ë¼ëŠ” ëœ»ìœ¼ë¡œ, ì¤„ì—¬ì„œ k8së¼ê³  ë¶€ë¥¸ë‹¤. (kì™€ sì‚¬ì´ì— 8ê¸€ì)</p><p>- Googleì—ì„œ ìµœì´ˆ ê°œë°œë˜ì—ˆê³  í˜„ì¬ëŠ” CNCFì— ê¸°ì¦ëœ ìƒíƒœ</p><blockquote><p><em>serviceë¥¼ host osë¥¼ ê³µìœ í•˜ëŠ” containerí™”í•´ì„œ ì˜¬ë¦¬ëŠ”  <strong>docker</strong></em></p><p><em>dockerë¥¼ ê´€ë¦¬í•˜ëŠ” <strong>k8s</strong>  (kubernetes)</em> </p><p><em>ì´ëŸ¬í•œ k8s applicationë“¤ì„ chartí™” ì‹œí‚¤ê³  ê´€ë¦¬í•˜ëŠ” <strong>helm</strong></em></p></blockquote><br><h3 id="k8s-Object"><a href="#k8s-Object" class="headerlink" title="k8s Object"></a>k8s Object</h3><ul><li> <strong>Pod</strong> (name + spec + containers)</li></ul><p>- k8sì˜ ê°€ì¥ ê¸°ë³¸ë‹¨ìœ„ì´ì Containerì˜ ë¬¶ìŒ</p><p>- pod ë‹¨ìœ„ë¡œ network namespaceì™€ ip ê°€ì§ˆ ìˆ˜ ìˆìŒ (!= namespace in k8s)</p><p>- ê°™ì€ podì—ì„œëŠ” ê°™ì€ volume ì ‘ê·¼ê°€ëŠ¥</p><br><ul><li><strong>ReplicaSet</strong> (<strong>Pod</strong> + replicas)</li></ul><p>- <u>replica</u>ëŠ” ë³µì œë¼ëŠ” ì˜ë¯¸ë¡œ replicas ìˆ˜ë§Œí¼ podê°€ ìœ ì§€ë˜ë„ë¡ ê´€ë¦¬ëœë‹¤</p><p>- podëŠ” ì£½ìœ¼ë©´ ë‹¤ì‹œ ë˜ì‚´ë¦¬ì§€ì•Šì§€ë§Œ, ReplicaSetìœ¼ë¡œ ë§Œë“¤ë©´ replicas ìˆ˜ (=pod ìˆ˜)ì— ë§ê²Œ ê³„ì† ì‚´ë¦°ë‹¤</p><p>- (ë‹¨, ëª¨ë‹ˆí„°ë§ì´ ë˜ì–´ autoscalerê°€ ì‘ë™ë˜ê³  ìˆëŠ” ìƒí™©ì´ì–´ì•¼ í•¨)</p><br><ul><li><strong>Deployment</strong> (<strong>ReplicasSet</strong> + History (revision))</li></ul><p>- deploymentëŠ” name + replicas + pod ë‚´ìš©ìœ¼ë¡œ êµ¬ì„±ë˜ê³ , ëŒ€ë¶€ë¶„ì€ deploymentë¥¼ ì‚¬ìš©í•´ì„œ ë°°í¬í•œë‹¤</p><p>- ë²„ì „ë³„ë¡œ ì„¤ì¹˜/ë¡¤ë°±ë˜ê³  ë°°í¬ ê´€ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤</p><p>- apps/v1ì¼ë•ŒëŠ” <u>selector</u>ê°€ ìˆì–´ì•¼ <u>labels</u>ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤</p><blockquote><p>â€‹    <code>kubectl create deployment.yaml</code> <em>ë¡œ Deploymentë¥¼ ìƒì„±í•  ë•Œ ìˆœì„œë¥¼ í™•ì¸í•´ë³´ë©´ ,</em></p><p>â€‹    <em>â€œ Deployment -&gt; ReplicaSet -&gt; Pod â€œ  ìˆœìœ¼ë¡œ ìƒì„±ëœë‹¤</em></p></blockquote><br><ul><li><strong>Service</strong></li></ul><p>Load balancerë¥¼ ì´ìš©í•˜ì—¬ ì—¬ëŸ¬ podë“¤ì„ í•˜ë‚˜ì˜ ip, portë¡œ ë¬¶ì–´ì„œ ì œê³µí•˜ëŠ” DNSì´ë‹¤</p><p>ê·¸ ê¸°ì¤€ì€ <u>label selector</u> ë¡œ, íŠ¹ì • labelì„ ê°€ì§„ ê²ƒë“¤ì„ í•˜ë‚˜ì˜ ì„œë¹„ìŠ¤ë¡œ ë¬¶ëŠ”ë‹¤.</p><blockquote><p>Service object ë…¸ì¶œ ë°©ì‹ 3ê°€ì§€</p><ol><li><strong>ClusterIP</strong> - defaultê°’ìœ¼ë¡œ, Serviceì— Cluster IP (ë‚´ë¶€ IP)ë¥¼ í• ë‹¹í•œë‹¤. í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥í•˜ê³  ì™¸ë¶€ì—ì„œëŠ” ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥</li><li><strong>NodePort</strong> - ê°ê°ì˜ Nodeì˜ IPì™€ static í¬íŠ¸ë¥¼ ë…¸ì¶œí•˜ì—¬ ì ‘ê·¼ê°€ëŠ¥í•˜ê²Œ í•˜ê³ , í´ëŸ¬ìŠ¤í„° ì™¸ë¶€ì—ì„œë„ ì ‘ê·¼ê°€ëŠ¥</li><li><strong>Load Balancer</strong> - Cloud provider(GCE/AWS)ì™€ ê°™ì€ ì™¸ë¶€IPë¥¼ ê°€ì§„ Load balancerì—ê²Œ Serviceë¥¼ ë…¸ì¶œ</li></ol></blockquote><br><ul><li>ê·¸ ì™¸ ê³ ì˜¤ê¸‰ ì˜¤ë¸Œì íŠ¸</li></ul><p>- <strong>DaemonSet</strong> : ë§µí•‘ëœ labelì´ ìˆëŠ” nodeê°€ ì¶”ê°€ë˜ë©´ ìë™ìœ¼ë¡œ í•´ë‹¹ nodeì— pod ìƒì„±ì„ ë³´ì¥ (scaling)</p><p>- <strong>StatefulSet</strong> : ì»¨í…Œì´ë„ˆê°€ ì œê±°/ì¬ì‹œì‘ë˜ì–´ë„ ìƒíƒœì˜ ì˜ì†ì„±ê³¼ ì§€ì†ì„±ì„ ë³´ì¥    =&gt; like DB<br><br></p><blockquote><p>- <strong>Affinity</strong> : kube-schedularì—ê²Œ ì •ë³´ ì œê³µ. ë¶€í•˜ ë¶„ì‚° ë˜ëŠ” ë²„ì „ê´€ë¦¬ ê°€ëŠ¥</p><p>( Session <strong>Affinity</strong> - sticky session ì œê³µ (canary deployment) )</p></blockquote><br><br><h3 id="ê¸°íƒ€-Keyword"><a href="#ê¸°íƒ€-Keyword" class="headerlink" title="ê¸°íƒ€ Keyword"></a>ê¸°íƒ€ Keyword</h3><p><strong>Docker ë°°í¬</strong></p><blockquote><p>íŠ¹ì§• : í™•ì¥ì„±, í‘œì¤€ì„±, ì´ë¯¸ì§€ ê¸°ë°˜, í™˜ê²½ë³€ìˆ˜ë¡œ ì œì–´í•˜ëŠ” ì„¤ì •, ê³µìœ ìì›..</p></blockquote><p>ë°°í¬íˆ´ : <u><strong>kubernetes</strong></u>, docker swarm, coreos, fleet,â€¦</p><br><p><strong>Kubernetes ë°°í¬ í”„ë¡œì„¸ìŠ¤</strong></p><blockquote><p><em>binary build -&gt; containerizing(image) -&gt; push image -&gt; service define -&gt; test deploy (canary test) -&gt; prod deploy</em>  </p><p>=&gt; ì–´ë µê³  ë³µì¡. ì´ëŸ° ë°°í¬ í”„ë¡œì„¸ìŠ¤ë¥¼ í†µí•©/ìë™í™”í•˜ëŠ” CICD (ë°°í¬íˆ´) í•„ìš”!</p></blockquote><p>ë°°í¬íˆ´ : <u>kubespray</u>, kubeadm, kops, â€¦ (CaaS ì§€ì›)</p><br><br><p>* <strong>ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜</strong> (Orchestration)</p><p>ì—¬ëŸ¬ ì„œë²„ë¥¼ ìš´ì˜í• ë•Œ, ì´ë“¤ì„ ê´€ë¦¬í•˜ëŠ” ê²ƒ</p><ul><li><p>IaCë¥¼ ë•ëŠ” ì„¤ì •ê´€ë ¨ ë„êµ¬ëŠ” chef puppet <u>Ansible</u> SaltStackâ€¦</p></li><li><p>CI/CD ê´€ë¦¬ ë„êµ¬ëŠ” Travis CI, <u>Jenkins</u>, Circle CI ..</p></li><li><p>ì»¨í…Œì´ë„ˆê´€ë¦¬ ë„êµ¬ëŠ” Docker swarm, <u>Kubernetes</u> â€¦</p></li></ul><br><p>* <strong>Ansible</strong></p><p>êµ¬ì„±ê´€ë¦¬ toolë¡œ, ì¸í”„ë¼ ê´€ë¦¬ê³¼ì •ì„ ì½”ë“œë¡œ ê¸°ìˆ í•œ IaC (Infra as Code)ë¥¼ íš¨ìœ¨ì ì´ê³  ìë™ìœ¼ë¡œ ê´€ë¦¬í• ìˆ˜ìˆëŠ” ì¸í”„ë¼ ë„êµ¬.</p><p>Python ê¸°ë°˜ì˜ ê°œë°œ + YAMLë¡œ ì •ì˜ + JSONìœ¼ë¡œ í†µì‹ </p><p>ì´ˆê¸°ì„¤ì •ì´ë‚˜ ëª¨ë‹ˆí„°ë§, ë³€ê²½ì‚¬í•­ ì¶”ì ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ë‹¨ì ì´ ìˆì§€ë§Œ, shell commandë¥¼ ì œì™¸í•˜ê³ ëŠ” ëª¨ë‘ <strong>Idempotency(ë©±ë“±ì„±)</strong> ì„ ì œê³µí•œë‹¤.</p><blockquote><p> <em>kubesprayëŠ” ansible ê¸°ë°˜ì˜ ë°°í¬íˆ´ì´ë‹¤.</em></p></blockquote><br><p>* <strong>Helm</strong></p><p>Chartë¼ëŠ” ê°œë…ìœ¼ë¡œ kubernetesì˜ applicationì„ ì •ì˜, ë°°í¬í•˜ê³  ê´€ë¦¬</p><ul><li>Chart: app êµ¬ì„±í•˜ëŠ” Kubernetes ê°ì²´ë“¤ì„ ì •ì˜í•œ manifest templateíŒŒì¼ ë° ì„¤ì •ë¬¶ìŒ</li><li>Cient (helm client, CLI) - Server (<strong>tiller</strong>, podí˜•íƒœë¡œ ë°°í¬ë¨) êµ¬ì¡°</li><li>Release: client í†µí•´ kube ìœ„ì— ë°°í¬ëœ app</li></ul><p>=&gt; helm client ì„¤ì¹˜ í›„ tiller serverë¥¼ kubernetes clusterìœ„ì— ì„¤ì¹˜í•´ì•¼í•¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">helm init (â€”upgrade)&#x2F;&#x2F; tiller ì„¤ì¹˜ </span><br><span class="line">helm install &#x2F;&#x2F; repositoryì— ë“±ë¡ëœ chartë¥¼ client-&gt;tillerë¡œ ë³´ëƒ„</span><br><span class="line">helm lint&#x2F;&#x2F; chartì˜ ë¬¸ë²•ê²€ì‚¬</span><br></pre></td></tr></table></figure><br><p>* <strong>CI/CD</strong></p><ul><li><p>CI (Continuous Integration): ì§€ì†ì  í†µí•©, ìì£¼ Build &amp; Packaging</p></li><li><p>CD (Continous Delivery / Deployment): ì§€ì†ì  ë°°í¬, ìì£¼ Deployment</p></li></ul><br><br><h3 id="ì°¸ì¡°"><a href="#ì°¸ì¡°" class="headerlink" title="ì°¸ì¡°"></a>ì°¸ì¡°</h3><ol><li><a href="https://www.samsungsds.com/global/ko/support/insights/101917_RD_Cloudnative.html">https://www.samsungsds.com/global/ko/support/insights/101917_RD_Cloudnative.html</a>)</li><li><a href="https://engineering.linecorp.com/ko/blog/infrastructure-trends-open-infra-days-korea-2018/">https://engineering.linecorp.com/ko/blog/infrastructure-trends-open-infra-days-korea-2018/</a></li><li>ê°“ìŠ¹ê·œë‹˜ ë¸”ë¡œê·¸ <a href="https://ahnseungkyu.com/">https://ahnseungkyu.com/</a> </li><li>Google Cloud - JAM k8s ì…ë¬¸ë°˜ QWIK LAB ì§„í–‰</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Kubernetesë¥¼-ì‹œì‘í•˜ê¸°-ì•ì„œ&quot;&gt;&lt;a href=&quot;#Kubernetesë¥¼-ì‹œì‘í•˜ê¸°-ì•ì„œ&quot; class=&quot;headerlink&quot; title=&quot;Kubernetesë¥¼ ì‹œì‘í•˜ê¸° ì•ì„œ&quot;&gt;&lt;/a&gt;Kubernetesë¥¼ ì‹œì‘í•˜ê¸° ì•ì„œ&lt;/h2&gt;&lt;bloc</summary>
      
    
    
    
    <category term="kubernetes" scheme="https://minsw.github.io/categories/kubernetes/"/>
    
    
    <category term="container" scheme="https://minsw.github.io/tags/container/"/>
    
    <category term="CNCF" scheme="https://minsw.github.io/tags/CNCF/"/>
    
    <category term="kubernetes" scheme="https://minsw.github.io/tags/kubernetes/"/>
    
    <category term="k8s" scheme="https://minsw.github.io/tags/k8s/"/>
    
    <category term="mwolkka" scheme="https://minsw.github.io/tags/mwolkka/"/>
    
  </entry>
  
</feed>
